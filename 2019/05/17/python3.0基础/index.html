<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Python,python,">





  <link rel="alternate" href="/atom.xml" title="刘心怡" type="application/atom+xml">






<meta name="description" content="大小写敏感，强类型定义的动态语言优点：简单，高效，优雅，跨平台，可扩展。缺点：运行速度慢，代码不能加密">
<meta name="keywords" content="Python,python">
<meta property="og:type" content="article">
<meta property="og:title" content="python3.0基础">
<meta property="og:url" content="http://yoursite.com/2019/05/17/python3.0基础/index.html">
<meta property="og:site_name" content="刘心怡">
<meta property="og:description" content="大小写敏感，强类型定义的动态语言优点：简单，高效，优雅，跨平台，可扩展。缺点：运行速度慢，代码不能加密">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220816-09-56-07.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220816-10-01-29.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220701-14-03-03.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220816-10-07-01.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220701-15-11-20.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220701-15-16-36.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220701-15-16-58.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220701-15-18-01.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220701-15-36-02.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220701-15-36-46.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220701-15-43-18.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220816-10-05-01.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220816-10-11-59.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220722-14-27-05.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220722-14-29-42.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220816-10-09-05.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20190517-16-39-40.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220704-10-52-02.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220704-10-57-54.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220704-10-59-28.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220704-13-31-52.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220704-13-37-56.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220704-13-38-53.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220816-10-10-01.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220704-14-00-01.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220705-10-57-26.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220816-10-14-25.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220816-10-15-06.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220816-10-16-37.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220816-10-17-59.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220816-10-18-54.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220816-10-20-02.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220816-10-22-28.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220816-10-31-36.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220728-10-11-57.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220807-14-24-06.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220807-15-51-07.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220812-16-03-31.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220812-16-29-29.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220815-15-36-36.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220816-10-32-13.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220816-10-42-00.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220726-09-37-31.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220816-10-44-13.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220816-10-44-51.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220726-15-05-36.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220726-15-16-41.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220726-15-19-47.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220726-15-20-46.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220816-10-45-41.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220816-10-46-19.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220816-10-47-02.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220816-11-55-52.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220831-21-38-28.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220816-10-12-47.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220816-10-13-26.png">
<meta property="og:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20230915-13-22-21.png">
<meta property="og:updated_time" content="2022-08-16T03:56:00.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="python3.0基础">
<meta name="twitter:description" content="大小写敏感，强类型定义的动态语言优点：简单，高效，优雅，跨平台，可扩展。缺点：运行速度慢，代码不能加密">
<meta name="twitter:image" content="http://yoursite.com/2019/05/17/python3.0基础/python3.0基础-20220816-09-56-07.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2019/05/17/python3.0基础/">





  <title>python3.0基础 | 刘心怡</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">刘心怡</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Tomorrow will be better than today!</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/17/python3.0基础/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="刘心怡">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="刘心怡">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">python3.0基础</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-17T11:25:00+08:00">
                2019-05-17
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/python/" itemprop="url" rel="index">
                    <span itemprop="name">python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p><strong>大小写敏感</strong>，强类型定义的动态语言<br>优点：简单，高效，优雅，跨平台，可扩展。<br>缺点：运行速度慢，代码不能加密<br><a id="more"></a></p>
<h2 id="介绍概览"><a href="#介绍概览" class="headerlink" title="介绍概览"></a>介绍概览</h2><p><img src="/2019/05/17/python3.0基础/python3.0基础-20220816-09-56-07.png" alt="Python介绍"></p>
<h2 id="优缺点"><a href="#优缺点" class="headerlink" title="优缺点"></a>优缺点</h2><h3 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h3><ul>
<li>简单，优雅，易懂</li>
<li>高效，有非常强大的第三方库，通过计算机实现任何功能，Python官方库里都有相应的模块进行支持</li>
<li>高级语言，无需考虑底层细节</li>
<li>可移植性，开源，可以被移植在许多平台上（经过改动依赖于系统的特性，它能工作在不同平台上）。如果避免使用依赖于系统的特性，则无需修改可以在市场上所有的系统平台上运行</li>
<li>可扩展性，可以在python中使用其他语言编写的程序，如C、C++</li>
<li>可嵌入性，可以把Python嵌入C/C++程序，从而向程序用户提供脚本功能。</li>
</ul>
<h3 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h3><ul>
<li>速度慢，比C语言和java慢，大多数情况下用户无法直接感知到速度差距，除非开发对速度要求极高的搜索引擎等</li>
<li>代码不能加密，因为解释型语言，它的源码都是以名文形式存放的</li>
<li>线程不能利用多CPU，即使在多核CPU平台上，因为GIL（全局解释器锁Global Interpreter Lock），所以禁止多线程的并行执行</li>
</ul>
<h2 id="python版本"><a href="#python版本" class="headerlink" title="python版本"></a>python版本</h2><p>python3.x不兼容python2.x</p>
<table>
<thead>
<tr>
<th style="text-align:center">版本</th>
<th style="text-align:center">默认编码</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">python2.x</td>
<td style="text-align:center">ASCII</td>
</tr>
<tr>
<td style="text-align:center">python3.x</td>
<td style="text-align:center">UNICODE(万国码，支持所有国家和地区的编码)</td>
</tr>
</tbody>
</table>
<blockquote>
<p>python2.x中使用中文需要声明编码类型，文件首行写入<code># coding:utf-8</code></p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#coding:utf-8</span></span><br><span class="line">print(<span class="string">"你好"</span>)</span><br></pre></td></tr></table></figure>
<h2 id="python解释器"><a href="#python解释器" class="headerlink" title="python解释器"></a>python解释器</h2><p>python解释器是一款应用程序，专门用来解释python这门语言的语法风格并执行的，可以这么说python语言更多地都是在调用python解释器的功能，所以解释器性能的高低很大程度决定了我们用python写出来的程序执行效率的高低</p>
<ul>
<li>CPython：官方版本的解释器，C语言开发的，使用最广泛</li>
<li>IPython：基于CPython之上的一个交互式解释器，只是在交互方式上有所增强执行Python代码的功能和CPython是完全一样。</li>
<li>PyPy：<ul>
<li>显著提高Python代码的执行速度，采用JIT技术</li>
<li>PyPy和CPython有一些不同，相同的Python代码在两种解释器下执行可能会有不同的结果</li>
</ul>
</li>
<li>Jython：Java平台上的Python解释器，可以直接把Python代码编译成Java字节码执行</li>
<li>IronPython：运行在微软.Net平台上的Python解释器，可以直接把Python代码编译成.Net的字节码</li>
</ul>
<blockquote>
<p>如果要和Java或.Net平台交互，最好的办法是通过网络调用来交互</p>
</blockquote>
<h2 id="命令行"><a href="#命令行" class="headerlink" title="命令行"></a>命令行</h2><ul>
<li><code>python</code>在命令行模式下进入python交互模式，提示符<code>&gt;&gt;&gt;</code></li>
<li><code>exit()</code>退出python交互模式，回到命令行模式</li>
<li><code>python filename.py</code>执行python文件</li>
</ul>
<blockquote>
<p>交互模式下，上一次打印出来的结果被复制给变量<code>_</code></p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt;num=<span class="number">9</span></span><br><span class="line">&gt;&gt;&gt;num*<span class="number">0.1</span></span><br><span class="line"><span class="number">0.9</span></span><br><span class="line">&gt;&gt;&gt;num+_</span><br><span class="line"><span class="number">9.9</span></span><br></pre></td></tr></table></figure>
<h2 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 单行注释</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">多行</span></span><br><span class="line"><span class="string">注释</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">多行</span></span><br><span class="line"><span class="string">注释</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>
<h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><p><img src="/2019/05/17/python3.0基础/python3.0基础-20220816-10-01-29.png" alt="变量概览"></p>
<ul>
<li>python是动态语言，变量类型不固定</li>
<li><code>=</code>是赋值语句，同一个变量可以反复赋值</li>
<li>变量有三大组成部分：<ul>
<li>变量名：是指向等号右侧值的内存地址的，用来访问等号右侧的值</li>
<li>赋值符号：将变量值的内存地址绑定给变量名</li>
<li>变量值：代表记录的事物的状态<br><img src="/2019/05/17/python3.0基础/python3.0基础-20220701-14-03-03.png" alt="变量的三大组成部分"></li>
</ul>
</li>
</ul>
<h3 id="变量名的命名的规则"><a href="#变量名的命名的规则" class="headerlink" title="变量名的命名的规则"></a>变量名的命名的规则</h3><ul>
<li>变量名不能与保留字符相同</li>
<li>为了代码的可读性，变量名要具有描述性</li>
<li>变量名必须是大小写英文、数字和<code>_</code>的组合，且<strong>不能用数字开头</strong></li>
<li>通常用全部大写的变量名表示常量(不变的变量，如代表数学常数π的变量)，这只是习惯上的用法，实际常量仍是变量，没有任何机制保证它不会被改变</li>
<li>命名风格：<ul>
<li>纯小写加下划线的方式(在python中，关于变量名的命名推荐使用这种方式)</li>
<li>驼峰体</li>
</ul>
</li>
</ul>
<h3 id="变量值的三个重要特征"><a href="#变量值的三个重要特征" class="headerlink" title="变量值的三个重要特征"></a>变量值的三个重要特征</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">name=<span class="string">'xxx'</span></span><br><span class="line"><span class="comment"># id：反映的是变量值的内存地址，内存地址不同id则不同</span></span><br><span class="line">print(id(name))</span><br><span class="line"><span class="comment"># type：不同类型的值用来表示记录不同的状态</span></span><br><span class="line">print(type(name))</span><br><span class="line"><span class="comment"># value：值本身</span></span><br><span class="line">print(name)</span><br></pre></td></tr></table></figure>
<h3 id="is与"><a href="#is与" class="headerlink" title="is与=="></a>is与==</h3><ul>
<li><code>is</code>：比较左右两个值身份id是否相等</li>
<li><code>==</code>：比较左右两个值他们的值是否相等</li>
</ul>
<blockquote>
<ul>
<li>id不同的情况下，值有可能相同，即两块不同的内存空间里可以存相同的值</li>
<li>id相同的情况下，值一定相同，x is y成立，x == y也必然成立</li>
</ul>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">x=<span class="string">'info：Egon：18'</span></span><br><span class="line">y=<span class="string">'info：Egon：18'</span></span><br><span class="line">print(id(x),id(y)) <span class="comment"># 4565819264 4566192176</span></span><br><span class="line">print(x == y) <span class="comment"># True</span></span><br><span class="line">print(x <span class="keyword">is</span> y) <span class="comment"># False</span></span><br></pre></td></tr></table></figure>
<h2 id="变量存储-amp-垃圾回收机制"><a href="#变量存储-amp-垃圾回收机制" class="headerlink" title="变量存储&amp;垃圾回收机制"></a>变量存储&amp;垃圾回收机制</h2><p><img src="/2019/05/17/python3.0基础/python3.0基础-20220816-10-07-01.png" alt="内存管理概览"></p>
<h3 id="变量的存储"><a href="#变量的存储" class="headerlink" title="变量的存储"></a>变量的存储</h3><p>内存中有两块区域：堆区与栈区，在定义变量时，变量名与值内存地址的关联关系存放于栈区，变量值存放于堆区，内存管理回收(垃圾回收)的是堆区的内容<br><img src="/2019/05/17/python3.0基础/python3.0基础-20220701-15-11-20.png" alt="变量存储"></p>
<h3 id="垃圾回收机制"><a href="#垃圾回收机制" class="headerlink" title="垃圾回收机制"></a>垃圾回收机制</h3><p>垃圾回收机制（简称GC）是Python解释器自带一种机制，专门用来回收不可用的变量值所占用的内存空间。</p>
<ul>
<li>主要运用了“引用计数”来跟踪和回收垃圾。</li>
<li>在引用计数的基础上，还可以通过“标记-清除”（mark and sweep）解决容器对象可能产生的循环引用的问题，</li>
<li>并且通过“分代回收”以空间换取时间的方式来进一步提高垃圾回收的效率。</li>
</ul>
<h4 id="引用计数（reference-counting）"><a href="#引用计数（reference-counting）" class="headerlink" title="引用计数（reference counting）"></a>引用计数（reference counting）</h4><ul>
<li>引用计数：变量值被变量名关联的次数 <code>age=&#39;10&#39;</code><br><img src="/2019/05/17/python3.0基础/python3.0基础-20220701-15-16-36.png" alt="引用计数"></li>
<li>引用计数增加 <code>m=age</code><br><img src="/2019/05/17/python3.0基础/python3.0基础-20220701-15-16-58.png" alt="引用计数增加"></li>
<li>引用计数减少 <code>age=10</code>,<code>del m</code><br><img src="/2019/05/17/python3.0基础/python3.0基础-20220701-15-18-01.png" alt="引用计数减少"></li>
</ul>
<blockquote>
<ul>
<li>变量值被关联次数的增加或减少，都会引发引用计数机制的执行，存在执行效率问题</li>
</ul>
</blockquote>
<h5 id="引用计数的致命的弱点-循环引用（交叉引用）"><a href="#引用计数的致命的弱点-循环引用（交叉引用）" class="headerlink" title="引用计数的致命的弱点:循环引用（交叉引用）"></a>引用计数的致命的弱点:循环引用（交叉引用）</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">l1=[<span class="string">'xxx'</span>]  <span class="comment"># 列表1被引用一次，列表1的引用计数变为1</span></span><br><span class="line">l2=[<span class="string">'yyy'</span>]  <span class="comment"># 列表2被引用一次，列表2的引用计数变为1</span></span><br><span class="line">l1.append(l2) <span class="comment"># 把列表2追加到l1中作为第二个元素，列表2的引用计数变为2</span></span><br><span class="line">l2.append(l1) <span class="comment"># 把列表1追加到l2中作为第二个元素，列表1的引用计数变为2</span></span><br><span class="line"><span class="comment"># l1与l2之间有相互引用</span></span><br><span class="line"><span class="comment"># l1 = ['xxx'的内存地址,列表2的内存地址] &gt;&gt;&gt; ['xxx', ['yyy', [...]]]</span></span><br><span class="line"><span class="comment"># l2 = ['yyy'的内存地址,列表1的内存地址] &gt;&gt;&gt; ['yyy', ['xxx', [...]]]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">del</span> l1 <span class="comment"># 列表1的引用计数减1，列表1的引用计数变为1</span></span><br><span class="line"><span class="keyword">del</span> l2 <span class="comment"># 列表2的引用计数减1，列表2的引用计数变为1</span></span><br></pre></td></tr></table></figure>
<p>两个列表的引用计数均不为0，但两个列表不再被任何其他对象关联，没有任何人可以再引用到它们，所以它俩占用内存空间应该被回收，但由于相互引用的存在，每一个对象的引用计数都不为0，因此这些对象所占用的内存永远不会被释放，导致内存泄露，所以循环引用是致命的。解决办法标记清除算法</p>
<h4 id="标记-amp-清除（mark-and-sweep）"><a href="#标记-amp-清除（mark-and-sweep）" class="headerlink" title="标记&amp;清除（mark and sweep）"></a>标记&amp;清除（mark and sweep）</h4><p>为了解决循环引用的问题，标记清除算法的做法是<strong>当应用程序可用的内存空间被耗尽时</strong>，就会停止整个程序，然后进行两项工作，第一项则是标记，第二项则是清除</p>
<ul>
<li>标记：标记的过程就行相当于从栈区出发一条线，“连接”到堆区，再由堆区间接“连接”到其他地址，凡是被这条自栈区起始的线连接到内存空间都属于可以访达的，会被标记为存活。具体地：标记的过程其实就是，遍历所有的GC Roots对象(栈区中的所有内容或者线程都可以作为GC Roots对象），然后将所有GC Roots的对象可以直接或间接访问到的对象标记为存活的对象，其余的均为非存活对象，应该被清除。<ul>
<li>直接引用指的是从栈区出发直接引用到的内存地址，间接引用指的是从栈区出发引用到堆区后再进一步引用到的内存地址</li>
</ul>
</li>
<li>清除：清除的过程将遍历堆中所有的对象，将没有标记存活的对象全部清除掉。</li>
</ul>
<p><img src="/2019/05/17/python3.0基础/python3.0基础-20220701-15-36-02.png" alt="标记清除"><br><img src="/2019/05/17/python3.0基础/python3.0基础-20220701-15-36-46.png" alt="标记清除"><br>在启用标记清除算法时，发现栈区内不再有l1与l2（只剩下堆区内二者的相互引用），于是列表1与列表2都没有被标记为存活，二者会被清理掉，这样就解决了循环引用带来的内存泄漏问题。</p>
<h4 id="分代回收（generation-collection）"><a href="#分代回收（generation-collection）" class="headerlink" title="分代回收（generation collection）"></a>分代回收（generation collection）</h4><p>提高回收效率，分代回收采用的是用“空间换时间”的策略。<strong>根据存活时间来为变量划分不同等级(即分代)，等级（代）越高，被垃圾回收机制扫描的频率越低</strong>。</p>
<blockquote>
<p>回收依然是使用引用计数作为回收的依据</p>
</blockquote>
<p>新定义的变量，放到新生代这个等级中，假设每隔1分钟扫描新生代一次，如果发现变量依然被引用，那么该对象的权重（权重本质就是个整数）加一，当变量的权重大于某个设定得值（假设为3），会将它移动到更高一级的青春代，青春代的gc扫描的频率低于新生代（扫描时间间隔更长），假设5分钟扫描青春代一次，这样每次gc需要扫描的变量的总个数就变少了，节省了扫描的总时间，接下来，青春代中的对象，也会以同样的方式被移动到老年代中。也就是等级（代）越高，被垃圾回收机制扫描的频率越低</p>
<p><img src="/2019/05/17/python3.0基础/python3.0基础-20220701-15-43-18.png" alt="分代回收"></p>
<h3 id="小整数池"><a href="#小整数池" class="headerlink" title="小整数池"></a>小整数池</h3><p>从python解释器启动那一刻开始，就会在内存中事先申请好一系列内存空间存放好常用的整数，解释器中为<code>-5</code>到<code>256</code>的整数，在pycharm中这个范围被优化的更大了一点</p>
<h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><p><img src="/2019/05/17/python3.0基础/python3.0基础-20220816-10-05-01.png" alt="基本数据类型概览"><br><img src="/2019/05/17/python3.0基础/python3.0基础-20220816-10-11-59.png" alt="数字类型概览"></p>
<p>python是强类型定义语言</p>
<blockquote>
<p>数学运算结果类型由参与运算的数据类型决定，由高到低为复数&gt;浮点数&gt;分数&gt;整数<br>复数与复数、整数、浮点数、分数的运算结果为复数，虚数前的参数可以为<code>0</code>，即如<code>13+0j</code><br>None和字符串不能直接与整数、浮点数、分数、复数进行运算<br>字符串之间可以进行拼接，即<code>+</code>操作</p>
</blockquote>
<h3 id="整数int-integer"><a href="#整数int-integer" class="headerlink" title="整数int(integer)"></a>整数int(integer)</h3><ul>
<li>十进制：<code>100</code>,<code>-100</code></li>
<li>十六进制，<code>0x</code>为前缀<code>0-9</code>、<code>a-f</code>表示：<code>0xff00</code>，<code>0xa5b4c3d2</code></li>
<li>整数没有需要掌握的内置方法，他们的使用就是数学运算+比较运算</li>
</ul>
<blockquote>
<p>整数没有大小限制</p>
</blockquote>
<h4 id="类型转换及进制转换"><a href="#类型转换及进制转换" class="headerlink" title="类型转换及进制转换"></a>类型转换及进制转换</h4><ul>
<li><code>int</code>：可以将由纯整数构成的字符串直接转换成整型，若包含其他任意非整数符号，则会报错</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 10进制 -&gt; 二进制</span></span><br><span class="line">bin(<span class="number">11</span>) <span class="comment"># '0b1011'</span></span><br><span class="line"><span class="comment"># 10进制 -&gt; 八进制</span></span><br><span class="line">oct(<span class="number">11</span>) <span class="comment"># '0o13'</span></span><br><span class="line"><span class="comment"># 10进制 -&gt; 十六进制</span></span><br><span class="line">hex(<span class="number">11</span>) <span class="comment"># '0xb'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 二进制 -&gt; 10进制</span></span><br><span class="line">int(<span class="string">'0b1011'</span>,<span class="number">2</span>) <span class="comment"># 11</span></span><br><span class="line"><span class="comment"># 八进制 -&gt; 10进制</span></span><br><span class="line">int(<span class="string">'0o13'</span>,<span class="number">8</span>) <span class="comment"># 11</span></span><br><span class="line"><span class="comment"># 十六进制 -&gt; 10进制</span></span><br><span class="line">int(<span class="string">'0o13'</span>,<span class="number">16</span>) <span class="comment"># 11</span></span><br></pre></td></tr></table></figure>
<h3 id="浮点数-小数-float"><a href="#浮点数-小数-float" class="headerlink" title="浮点数(小数)(float)"></a>浮点数(小数)(float)</h3><p>对于很大或很小的浮点数，必须用科学计数法表示，把<code>10</code>用<code>e</code>替代，<code>1.23</code>，<code>1.23e9</code>代表1.23*10^9，<code>1.23e-5</code>代表0.0000123</p>
<blockquote>
<p>整数和浮点数在计算机内部存储的方式是不同的，整数运算永远是精确的（除法也是精确的），而浮点数运算则可能会有四舍五入的误差<br>浮点数没有大小限制，但是超出一定范围就直接表示为inf（无限大）。</p>
</blockquote>
<p>浮点数没有需要掌握的内置方法，他们的使用就是数学运算+比较运算</p>
<h4 id="类型转换"><a href="#类型转换" class="headerlink" title="类型转换"></a>类型转换</h4><ul>
<li><code>float</code>：可以将由小数构成的字符串直接转换成小数，若包含其他任意非小数符号，则会报错</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">float(<span class="string">"3.1"</span>) <span class="comment"># 3.1</span></span><br></pre></td></tr></table></figure>
<h3 id="复数-complex"><a href="#复数-complex" class="headerlink" title="复数(complex)"></a>复数(complex)</h3><p>支持复数，使用后缀<code>j</code>或者<code>J</code>就可以表示虚数，<code>3+5j</code>。或者<code>complex(3,5)</code></p>
<h3 id="分数-fractions-Fraction"><a href="#分数-fractions-Fraction" class="headerlink" title="分数(fractions.Fraction)"></a>分数(fractions.Fraction)</h3><p>声明前要引入标准库<code>fractions</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt;<span class="keyword">import</span> fractions</span><br><span class="line">&gt;&gt;&gt;x=fractions.Fraction(<span class="number">1</span>,<span class="number">10</span>)&gt;&gt;&gt;print(x)</span><br></pre></td></tr></table></figure>
<h3 id="字符串-str"><a href="#字符串-str" class="headerlink" title="字符串(str)"></a>字符串(str)</h3><ul>
<li><code>&#39;abc&#39;</code>或<code>&quot;abc&quot;</code>，单引号或双引号表示单行内容，不能混用</li>
<li><code>&#39;&#39;&#39;</code>，<code>&quot;&quot;&quot;</code>表示多行内容，回车行会自动包含到字符串中，如果不想包含，在行尾加<code>\</code></li>
<li>内容内的<code>&#39;</code>或<code>&quot;</code>用<code>\</code>转义符标识</li>
<li><code>r</code>表示字符串内部不转义</li>
<li><code>len(str)</code>获取字符串长度</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 单行</span></span><br><span class="line"></span><br><span class="line">print(<span class="string">'I\'m "OK"'</span>)</span><br><span class="line"><span class="comment"># I'm "Ok"</span></span><br><span class="line">print(<span class="string">r'I\'m "OK"'</span>)</span><br><span class="line"><span class="comment"># I\'m "OK"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 多行</span></span><br><span class="line">print(<span class="string">'''</span></span><br><span class="line"><span class="string">a</span></span><br><span class="line"><span class="string">b</span></span><br><span class="line"><span class="string">c'''</span>)</span><br><span class="line"><span class="comment">#  </span></span><br><span class="line"><span class="comment"># a</span></span><br><span class="line"><span class="comment"># b</span></span><br><span class="line"><span class="comment"># c</span></span><br><span class="line">print(<span class="string">'''\</span></span><br><span class="line"><span class="string">a</span></span><br><span class="line"><span class="string">b</span></span><br><span class="line"><span class="string">c'''</span>)</span><br><span class="line"><span class="comment"># a</span></span><br><span class="line"><span class="comment"># b</span></span><br><span class="line"><span class="comment"># c</span></span><br><span class="line">print(<span class="string">r'''a\n</span></span><br><span class="line"><span class="string">b</span></span><br><span class="line"><span class="string">c'''</span>)</span><br><span class="line"><span class="comment"># a\n</span></span><br><span class="line"><span class="comment"># b</span></span><br><span class="line"><span class="comment"># c</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>字符串在内存中以unicode编码表示，在传输和硬盘中以utf-8编码表示</p>
</blockquote>
<h4 id="类型转换-1"><a href="#类型转换-1" class="headerlink" title="类型转换"></a>类型转换</h4><ul>
<li><code>str</code>：可以将任意数据类型转换成字符串类型</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">str([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]) <span class="comment"># '[1, 2, 3]'</span></span><br><span class="line">str(&#123;<span class="string">"name"</span>:<span class="string">"xxx"</span>,<span class="string">"age"</span>:<span class="number">18</span>&#125;) <span class="comment"># "&#123;'name': 'xxx', 'age': 18&#125;"</span></span><br><span class="line">str((<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)) <span class="comment"># '(1, 2, 3)'</span></span><br><span class="line">str(&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;) <span class="comment"># '&#123;1, 2, 3, 4&#125;'</span></span><br></pre></td></tr></table></figure>
<h4 id="索引-获取单个字符"><a href="#索引-获取单个字符" class="headerlink" title="索引(获取单个字符)"></a>索引(获取单个字符)</h4><ul>
<li>索引为正数，从<code>0</code>开始<strong>递增</strong>，从字符串<strong>左往右</strong>索引</li>
<li>索引为复数，从<code>-1</code>开始<strong>递减</strong>，从字符串<strong>右往左</strong>索引</li>
</ul>
<blockquote>
<p>越界索引(超出字符串内容的索引)会产生错误</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">msg=<span class="string">'hello world'</span></span><br><span class="line">msg[<span class="number">0</span>] <span class="comment"># 'h'</span></span><br><span class="line">msg[<span class="number">-1</span>] <span class="comment"># 'd'</span></span><br></pre></td></tr></table></figure>
<h4 id="切片-获取子字符串"><a href="#切片-获取子字符串" class="headerlink" title="切片(获取子字符串)"></a>切片(获取子字符串)</h4><p><code>str[n:m:x]</code>：从索引n(包括n)开始到索引m(不包括m)；x步长，可以为负数(反向步长)</p>
<ul>
<li>n在m左边时能取到值，否则为<code>&#39;&#39;</code></li>
<li>n不设置时，表示头开始切片</li>
<li>m不设置时，表示切片到末尾</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">msg=<span class="string">'hello world'</span></span><br><span class="line">msg[<span class="number">0</span>:<span class="number">5</span>] <span class="comment"># 'hello'</span></span><br><span class="line">msg[:<span class="number">5</span>] <span class="comment"># 'hello'</span></span><br><span class="line">msg[<span class="number">0</span>:<span class="number">-2</span>] <span class="comment"># 'hello wor'</span></span><br><span class="line">msg[<span class="number">-3</span>:<span class="number">-2</span>] <span class="comment"># 'r'</span></span><br><span class="line">msg[<span class="number">-3</span>:] <span class="comment"># 'rld'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 步长</span></span><br><span class="line">msg[<span class="number">0</span>:<span class="number">5</span>:<span class="number">2</span>] <span class="comment"># 'hlo'</span></span><br><span class="line"><span class="comment"># 反向步长</span></span><br><span class="line">msg[<span class="number">0</span>:<span class="number">5</span>:<span class="number">-2</span>] <span class="comment"># ''</span></span><br><span class="line">msg[<span class="number">5</span>:<span class="number">0</span>:<span class="number">-2</span>] <span class="comment"># ' le'</span></span><br><span class="line"><span class="comment"># 把字符串倒过来</span></span><br><span class="line">msg[::<span class="number">-1</span>] <span class="comment"># 'dlrow olleh'</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>切片时使用越界索引(超出字符串内容的索引)不会产生错误，自动以界限为止</p>
</blockquote>
<h4 id="长度"><a href="#长度" class="headerlink" title="长度"></a>长度</h4><p><code>len</code>：获取字符串长度</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">msg=<span class="string">'hello world'</span></span><br><span class="line">len(msg) <span class="comment"># 11</span></span><br></pre></td></tr></table></figure>
<h4 id="运算"><a href="#运算" class="headerlink" title="运算"></a>运算</h4><ul>
<li>加法：字符串之间可以相加，但仅限于str与str之间进行（不推荐使用，因为str之间的相加效率极低）<ul>
<li><code>+</code>：和字符串拼接</li>
</ul>
</li>
<li><code>*</code>：字符串重复</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'abc'</span>*<span class="number">3</span> <span class="comment"># 'abcabcabc'</span></span><br></pre></td></tr></table></figure>
<ul>
<li>成员运算in和not in</li>
</ul>
<blockquote>
<p>相邻的两个或多个字符串字面值会自动连接，字符串变量或表达式不行</p>
</blockquote>
<h4 id="内置方法"><a href="#内置方法" class="headerlink" title="内置方法"></a>内置方法</h4><h5 id="strip-lstrip-rstrip-移除首尾两侧特定字符"><a href="#strip-lstrip-rstrip-移除首尾两侧特定字符" class="headerlink" title="strip,lstrip,rstrip(移除首尾两侧特定字符)"></a>strip,lstrip,rstrip(移除首尾两侧特定字符)</h5><ul>
<li><code>strip</code>：移除字符串左右两侧的符号，不传参，默认移除首尾空白字符(空格、\n、\t)</li>
<li><code>lstrip</code>：只移除左边的指定字符</li>
<li><code>rstrip</code>：只移除右边的指定字符</li>
</ul>
<blockquote>
<p>只移除两边，不移除中间</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 默认去掉的空格，只移除两边，不移除中间</span></span><br><span class="line">msg=<span class="string">'   hello world  '</span></span><br><span class="line">msg.strip() <span class="comment"># 'hello world'</span></span><br><span class="line">msg.lstrip() <span class="comment"># 'hello world  '</span></span><br><span class="line">msg.rstrip() <span class="comment"># '   hello world'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 收尾移除多种字符</span></span><br><span class="line">msg=<span class="string">'**/*=-**hello world**-=()**'</span></span><br><span class="line">msg.strip(<span class="string">'*/-=()'</span>) <span class="comment"># 'hello world'</span></span><br></pre></td></tr></table></figure>
<h5 id="split-rsplit-按分隔符切分列表"><a href="#split-rsplit-按分隔符切分列表" class="headerlink" title="split,rsplit(按分隔符切分列表)"></a>split,rsplit(按分隔符切分列表)</h5><ul>
<li><code>split</code>：把一个字符串按照某种分隔符<strong>从左往右</strong>进行切分，得到一个列表</li>
<li><p><code>rsplit</code>：把一个字符串按照某种分隔符<strong>从右往左</strong>进行切分，得到一个列表</p>
</li>
<li><p>参数：</p>
<ul>
<li>第一个：分隔符，默认分隔符是空白字符</li>
<li>第二个：分隔次数，为负数则无效</li>
</ul>
</li>
<li>返回结果为列表数据类型</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 默认分隔符是空格</span></span><br><span class="line">msg=<span class="string">' hello    world '</span></span><br><span class="line">msg.split() <span class="comment"># ['hello', 'world']</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定分隔符</span></span><br><span class="line">msg=<span class="string">'*hello**world*'</span></span><br><span class="line">msg.split(<span class="string">'*'</span>) <span class="comment"># ['', 'hello', '', 'world', '']</span></span><br><span class="line">msg.rsplit(<span class="string">'*'</span>) <span class="comment"># ['', 'hello', '', 'world', '']</span></span><br><span class="line">msg.split(<span class="string">'**'</span>) <span class="comment"># ['*hello', 'world*']</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定分隔次数</span></span><br><span class="line">msg=<span class="string">'**hello**world*'</span></span><br><span class="line">msg.split(<span class="string">'*'</span>,<span class="number">1</span>) <span class="comment"># ['', '*hello**world*']</span></span><br><span class="line">msg.rsplit(<span class="string">'*'</span>,<span class="number">1</span>) <span class="comment"># ['*hello**world', '']</span></span><br></pre></td></tr></table></figure>
<h5 id="lower-upper-大小写转换"><a href="#lower-upper-大小写转换" class="headerlink" title="lower,upper(大小写转换)"></a>lower,upper(大小写转换)</h5><ul>
<li><code>lower</code>：将英文字符串全部变小写</li>
<li><code>upper</code>‘：将英文字符串全部变大写</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">msg=<span class="string">'你好，Hello'</span></span><br><span class="line">msg.lower() <span class="comment"># '你好，hello'</span></span><br><span class="line">msg.upper() <span class="comment"># '你好，HELLO'</span></span><br></pre></td></tr></table></figure>
<h5 id="startswith-endswith-判断首尾字符"><a href="#startswith-endswith-判断首尾字符" class="headerlink" title="startswith,endswith(判断首尾字符)"></a>startswith,endswith(判断首尾字符)</h5><ul>
<li><code>startswith</code>：判断字符串是否以括号内指定的字符开头，结果为布尔值True或False</li>
<li><code>endswith</code>：判断字符串是否以括号内指定的字符结尾，结果为布尔值True或False</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">msg=<span class="string">'hello world'</span></span><br><span class="line">msg.startswith(<span class="string">'hello'</span>) <span class="comment"># True</span></span><br><span class="line">msg.startswith(<span class="string">'helo'</span>) <span class="comment"># False</span></span><br><span class="line">msg.endswith(<span class="string">'world'</span>) <span class="comment"># True</span></span><br><span class="line">msg.endswith(<span class="string">'rd'</span>) <span class="comment"># False</span></span><br></pre></td></tr></table></figure>
<h5 id="join-按分隔符拼接列表或字符串"><a href="#join-按分隔符拼接列表或字符串" class="headerlink" title="join(按分隔符拼接列表或字符串)"></a>join(按分隔符拼接列表或字符串)</h5><p>用指定分隔符拼接列表或字符串，返回字符串</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">''</span>.join([<span class="string">'hello'</span>,<span class="string">'world'</span>,<span class="string">'你好'</span>]) <span class="comment"># 'helloworld你好'</span></span><br><span class="line"><span class="string">' '</span>.join([<span class="string">'hello'</span>,<span class="string">'world'</span>,<span class="string">'你好'</span>]) <span class="comment"># 'hello world 你好'</span></span><br><span class="line"><span class="string">'**'</span>.join([<span class="string">'hello'</span>,<span class="string">'world'</span>,<span class="string">'你好'</span>]) <span class="comment"># 'hello**world**你好'</span></span><br><span class="line"><span class="string">'*'</span>.join(<span class="string">'hello world'</span>) <span class="comment"># 'h*e*l*l*o* *w*o*r*l*d'</span></span><br></pre></td></tr></table></figure>
<h5 id="replace-替换字符"><a href="#replace-替换字符" class="headerlink" title="replace(替换字符)"></a>replace(替换字符)</h5><p>用新的字符替换字符串中旧的字符</p>
<ul>
<li>参数：<ul>
<li>第一个：旧字符</li>
<li>第二个：新字符</li>
<li>第三个：替换次数</li>
</ul>
</li>
<li>返回结果为替换后的结果</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">msg=<span class="string">"you can you up no can no bb"</span></span><br><span class="line">msg.replace(<span class="string">"you"</span>,<span class="string">"YOU"</span>) <span class="comment"># 'YOU can YOU up no can no bb'</span></span><br><span class="line">msg.replace(<span class="string">"you"</span>,<span class="string">"YOU"</span>,<span class="number">1</span>) <span class="comment"># 'YOU can you up no can no bb'</span></span><br></pre></td></tr></table></figure>
<h5 id="find-rfind-查找子字符索引"><a href="#find-rfind-查找子字符索引" class="headerlink" title="find,rfind(查找子字符索引)"></a>find,rfind(查找子字符索引)</h5><ul>
<li><code>find</code>：从指定范围内<strong>从左往右</strong>查找子字符串，找得到则返回子字符串首字母的索引，找不到则返回-1</li>
<li><p><code>rfind</code>：从指定范围内<strong>从右往左</strong>查找子字符串，找得到则返回子字符串首字母的索引，找不到则返回-1</p>
</li>
<li><p>参数：</p>
<ul>
<li>第一个：子字符串</li>
<li>第二个：范围开始索引，包含</li>
<li>第三个：范围结束索引，不包含</li>
</ul>
</li>
<li>返回结果，存在则返回子字符串的首字符在目标字符串中的索引，找不到则返回-1</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">msg=<span class="string">'hello world hahaha'</span></span><br><span class="line">msg.find(<span class="string">'ha'</span>) <span class="comment"># 11</span></span><br><span class="line">msg.rfinx(<span class="string">'ha'</span>) <span class="comment"># 15</span></span><br></pre></td></tr></table></figure>
<h5 id="index-rindex-查找子字符索引"><a href="#index-rindex-查找子字符索引" class="headerlink" title="index,rindex(查找子字符索引)"></a>index,rindex(查找子字符索引)</h5><p>作用同find,rfind，但在找不到时会报错</p>
<h5 id="count-查找子字符出现次数"><a href="#count-查找子字符出现次数" class="headerlink" title="count(查找子字符出现次数)"></a>count(查找子字符出现次数)</h5><p>统计子字符串在字符串中出现的次数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">msg=<span class="string">'hello world hahaha'</span></span><br><span class="line">msg.count(<span class="string">'ha'</span>) <span class="comment"># 3</span></span><br></pre></td></tr></table></figure>
<h5 id="center-ljust-rjust-zfill-填充字符"><a href="#center-ljust-rjust-zfill-填充字符" class="headerlink" title="center,ljust,rjust,zfill(填充字符)"></a>center,ljust,rjust,zfill(填充字符)</h5><ul>
<li><code>center</code>：生成x长的字符串，<strong>字符串居中显示</strong>，不够用特定字符填充<ul>
<li>参数：<ul>
<li>第一个：结果字符串总长度</li>
<li>第二个：填充字符（单个字符）</li>
</ul>
</li>
</ul>
</li>
<li><code>ljust</code>：生成x长的字符串，<strong>字符串左对齐显示</strong>，不够用特定字符填充<ul>
<li>参数：<ul>
<li>第一个：结果字符串总长度</li>
<li>第二个：填充字符（单个字符）</li>
</ul>
</li>
</ul>
</li>
<li><code>rjust</code>：生成x长的字符串，<strong>字符串右对齐显示</strong>，不够用特定字符填充<ul>
<li>参数：<ul>
<li>第一个：结果字符串总长度</li>
<li>第二个：填充字符（单个字符）</li>
</ul>
</li>
</ul>
</li>
<li><code>zfill</code>：生成x长的字符串，<strong>字符串右对齐显示</strong>，不够用<code>0</code>填充<ul>
<li>参数只有一个：结果字符串总长度</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'hello'</span>.center(<span class="number">11</span>,<span class="string">'*'</span>) <span class="comment"># '***hello***'</span></span><br><span class="line"><span class="string">'hello'</span>.ljust(<span class="number">11</span>,<span class="string">'*'</span>) <span class="comment"># 'hello******'</span></span><br><span class="line"><span class="string">'hello'</span>.rjust(<span class="number">11</span>,<span class="string">'*'</span>) <span class="comment"># '******hello'</span></span><br><span class="line"><span class="string">'hello'</span>.zfill(<span class="number">11</span>) <span class="comment"># '000000hello'</span></span><br></pre></td></tr></table></figure>
<h5 id="expandtabs-t制表符转换为几个空格"><a href="#expandtabs-t制表符转换为几个空格" class="headerlink" title="expandtabs(\t制表符转换为几个空格)"></a>expandtabs(\t制表符转换为几个空格)</h5><p>修改\t制表符代表的空格数，参数为单个制表符代表的空格数</p>
<blockquote>
<p>首个制表符只代表一个空格，与传参无关</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># \t表示制表符(tab键)</span></span><br><span class="line"><span class="string">'hello\tworld'</span>.expandtabs(<span class="number">1</span>) <span class="comment"># 'hello world'</span></span><br><span class="line"><span class="string">'hello\tworld'</span>.expandtabs(<span class="number">2</span>) <span class="comment"># 'hello world'</span></span><br><span class="line"><span class="string">'hello\t\tworld'</span>.expandtabs(<span class="number">1</span>) <span class="comment"># 'hello  world'</span></span><br><span class="line"><span class="string">'hello\t\tworld'</span>.expandtabs(<span class="number">2</span>) <span class="comment"># 'hello   world'</span></span><br></pre></td></tr></table></figure>
<h5 id="capitalize-swapcase-title-大小写转换"><a href="#capitalize-swapcase-title-大小写转换" class="headerlink" title="capitalize,swapcase,title(大小写转换)"></a>capitalize,swapcase,title(大小写转换)</h5><ul>
<li><code>capitalize</code>：首字母大写</li>
<li><code>swapcase</code>：大小写翻转</li>
<li><code>title</code>：每个单词的首字母大写</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'hello world'</span>.capitalize() <span class="comment"># 'Hello world'</span></span><br><span class="line"><span class="string">'Hello World'</span>.swapcase() <span class="comment"># 'hELLO wORLD'</span></span><br><span class="line"><span class="string">'hello world'</span>.title() <span class="comment"># 'Hello World'</span></span><br></pre></td></tr></table></figure>
<h5 id="is检查字符串内容"><a href="#is检查字符串内容" class="headerlink" title="is检查字符串内容"></a>is检查字符串内容</h5><h6 id="is检查数字"><a href="#is检查数字" class="headerlink" title="is检查数字"></a>is检查数字</h6><ul>
<li><code>isdigit</code>：判断字符串是否是纯数字组成，返回结果为True或False</li>
<li><code>isdecimal</code>：判断字符串是否是uncicode类型的数字组成，<strong>bytes类型无isdecimal方法</strong></li>
<li><code>isnumberic</code>：判断字符串是否是:unicode,中文数字,罗马数字类型的数字组成，<strong>bytes类型无isnumberic方法</strong></li>
</ul>
<blockquote>
<p>三者都不能判断浮点数</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">num1 = <span class="string">b'4'</span> <span class="comment">#bytes</span></span><br><span class="line">num2 = <span class="string">u'4'</span> <span class="comment">#unicode,python3中无需加u就是unicode</span></span><br><span class="line">num3 = <span class="string">'四'</span> <span class="comment">#中文数字</span></span><br><span class="line">num4 = <span class="string">'Ⅳ'</span> <span class="comment">#罗马数字</span></span><br><span class="line"></span><br><span class="line">num1.isdigit() <span class="comment"># True</span></span><br><span class="line">num2.isdigit() <span class="comment"># True</span></span><br><span class="line">num3.isdigit() <span class="comment"># False</span></span><br><span class="line">num4.isdigit() <span class="comment"># False</span></span><br><span class="line"><span class="string">'12.3'</span>.isdigit() <span class="comment"># False</span></span><br><span class="line"></span><br><span class="line">num2.isdecimal() <span class="comment"># True</span></span><br><span class="line">num3.isdecimal() <span class="comment"># False</span></span><br><span class="line">num4.isdecimal() <span class="comment"># False</span></span><br><span class="line"></span><br><span class="line">num2.isnumeric() <span class="comment"># True</span></span><br><span class="line">num3.isnumeric() <span class="comment"># True</span></span><br><span class="line">num4.isnumeric() <span class="comment"># True</span></span><br></pre></td></tr></table></figure>
<h6 id="is其他"><a href="#is其他" class="headerlink" title="is其他"></a>is其他</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">name=<span class="string">'world123'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 字符串中既可以包含数字也可以包含字母 </span></span><br><span class="line">name.isalnum() <span class="comment"># True</span></span><br><span class="line"><span class="comment"># 字符串中只包含字母</span></span><br><span class="line">name.isalpha() <span class="comment"># False</span></span><br><span class="line"><span class="comment"># 判断字符串是否是有效的标识符，可用来判断变量名是否合法</span></span><br><span class="line">name.isidentifier() <span class="comment"># True</span></span><br><span class="line"><span class="comment"># 字符串是否是纯小写</span></span><br><span class="line">name.islower() <span class="comment"># True</span></span><br><span class="line"><span class="comment"># 字符串是否是纯大写 </span></span><br><span class="line">name.isupper() <span class="comment"># False</span></span><br><span class="line"><span class="comment"># 字符串是否全是空格</span></span><br><span class="line">name.isspace() <span class="comment"># False</span></span><br><span class="line"><span class="comment"># 字符串中的单词首字母是否都是大写 </span></span><br><span class="line">name.istitle() <span class="comment"># False</span></span><br></pre></td></tr></table></figure>
<h5 id="format"><a href="#format" class="headerlink" title="format"></a>format</h5><p>详见格式化输出<code>format</code></p>
<h4 id="格式化输出"><a href="#格式化输出" class="headerlink" title="格式化输出"></a>格式化输出</h4><h5 id=""><a href="#" class="headerlink" title="%"></a><code>%</code></h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 值按照位置与%s一一对应，少一个不行，多一个也不行</span></span><br><span class="line"><span class="string">"my name is %s my age is %s"</span> %(<span class="string">'xxx'</span>,<span class="string">"18"</span>)</span><br><span class="line"><span class="string">"my name is %s my age is %s"</span> %(<span class="string">"18"</span>,<span class="string">'xxx'</span>)</span><br><span class="line"><span class="string">"my name is %s"</span> %<span class="string">"xxx"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 以字典的形式传值，打破位置的限制</span></span><br><span class="line"><span class="string">"我的名字是 %(name)s 我的年龄是 %(age)s"</span> %&#123;<span class="string">"age"</span>:<span class="string">"18"</span>,<span class="string">"name"</span>:<span class="string">'xxx'</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># %s可以接收任意类型，%d只能接收int</span></span><br><span class="line"><span class="string">'my age is %s'</span> %<span class="number">18</span></span><br><span class="line"><span class="string">'my age is %s'</span> %[<span class="number">1</span>,<span class="number">23</span>]</span><br><span class="line"><span class="string">'my age is %s'</span> %&#123;<span class="string">'a'</span>:<span class="number">333</span>&#125;</span><br><span class="line"><span class="string">'my age is %d'</span> %<span class="number">18</span></span><br></pre></td></tr></table></figure>
<h5 id="format-1"><a href="#format-1" class="headerlink" title="format"></a><code>format</code></h5><p>兼容性好</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 按照位置传值</span></span><br><span class="line"><span class="string">'我的名字是 &#123;&#125; 我的年龄是 &#123;&#125;'</span>.format(<span class="string">'xxx'</span>,<span class="number">18</span>) <span class="comment"># 我的名字是 xxx 我的年龄是 18</span></span><br><span class="line"><span class="string">'我的名字是 &#123;0&#125;&#123;0&#125;&#123;0&#125; 我的年龄是 &#123;1&#125;&#123;1&#125;'</span>.format(<span class="string">'xxx'</span>,<span class="number">18</span>) <span class="comment"># 我的名字是 xxxxxxxxx 我的年龄是 1818</span></span><br><span class="line"><span class="comment"># 打破位置的限制，按照key=value传值</span></span><br><span class="line"><span class="string">"我的名字是 &#123;name&#125; 我的年龄是 &#123;age&#125;"</span>.format(age=<span class="number">18</span>,name=<span class="string">'xxx'</span>) <span class="comment"># 我的名字是 xxx 我的年龄是 18</span></span><br></pre></td></tr></table></figure>
<h6 id="填充与格式化"><a href="#填充与格式化" class="headerlink" title="填充与格式化"></a>填充与格式化</h6><p>在冒号后设定填充格式<code>[填充字符][对齐方式][宽度]</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># *&lt;6：左对齐，总共6个字符，不够的用*号填充</span></span><br><span class="line"><span class="comment"># *&gt;6：右对齐，总共6个字符，不够的用*号填充</span></span><br><span class="line"><span class="comment"># *^6：居中显示，总共6个字符，不够的用*号填充</span></span><br><span class="line"><span class="string">'我的名字是 &#123;0:*&lt;6&#125;&#123;0:-^5&#125;&#123;0:*&gt;6&#125; 我的年龄是 &#123;1:$&gt;4&#125;&#123;1:&amp;&lt;3&#125;'</span>.format(<span class="string">'xxx'</span>,<span class="number">18</span>) <span class="comment"># 我的名字是 xxx***-xxx-***xxx 我的年龄是 $$1818&amp;</span></span><br><span class="line"><span class="string">'我的名字是 &#123;name:*^7&#125; 我的年龄是 &#123;age:-^4&#125;'</span>.format(age=<span class="number">18</span>,name=<span class="string">'xxx'</span>) <span class="comment"># 我的名字是 **xxx** 我的年龄是 -18-</span></span><br></pre></td></tr></table></figure>
<h6 id="精度与进制"><a href="#精度与进制" class="headerlink" title="精度与进制"></a>精度与进制</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment"># 精确到小数点后3位，四舍五入</span></span><br><span class="line"><span class="string">'&#123;salary:.3f&#125;'</span>.format(salary=<span class="number">1232132.12351</span>) <span class="comment"># 1232132.124</span></span><br><span class="line"><span class="comment"># 转成二进制</span></span><br><span class="line"><span class="string">'&#123;0:b&#125;'</span>.format(<span class="number">123</span>) <span class="comment"># 1111011</span></span><br><span class="line"><span class="comment"># 转成八进制</span></span><br><span class="line"><span class="string">'&#123;0:o&#125;'</span>.format(<span class="number">9</span>) <span class="comment"># 11</span></span><br><span class="line"><span class="comment"># 转成十六进制</span></span><br><span class="line"><span class="string">'&#123;0:x&#125;'</span>.format(<span class="number">15</span>) <span class="comment"># f</span></span><br><span class="line"><span class="comment"># 千分位格式化</span></span><br><span class="line"><span class="string">'&#123;0:,&#125;'</span>.format(<span class="number">99812939393931</span>) <span class="comment"># 99,812,939,393,931</span></span><br></pre></td></tr></table></figure>
<h5 id="f"><a href="#f" class="headerlink" title="f"></a>f</h5><p>python版本&gt;=3.5</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x = input(<span class="string">'your name: '</span>)</span><br><span class="line">y = input(<span class="string">'your age: '</span>)</span><br><span class="line">res = <span class="string">f'我的名字是<span class="subst">&#123;x&#125;</span> 我的年龄是<span class="subst">&#123;y&#125;</span>'</span></span><br></pre></td></tr></table></figure>
<h3 id="字节字符串-bytes"><a href="#字节字符串-bytes" class="headerlink" title="字节字符串(bytes)"></a>字节字符串(bytes)</h3><p><code>b&#39;abc&#39;</code>，二进制</p>
<h3 id="布尔值-bool"><a href="#布尔值-bool" class="headerlink" title="布尔值(bool)"></a>布尔值(bool)</h3><p><code>True</code>、<code>False</code></p>
<blockquote>
<p>注意大小写<br>隐式布尔值，所有的值都可以当成条件去用，其中<code>0</code>、<code>None</code>、<code>空(空字符串、空列表、空字典)</code>代表的布尔值为<code>False</code>，其余都为<code>True</code></p>
</blockquote>
<h3 id="空值-None"><a href="#空值-None" class="headerlink" title="空值(None)"></a>空值(None)</h3><p><code>None</code>，不能理解为<code>0</code>，<code>0</code>是有意义的，<code>None</code>是一个特殊空值</p>
<h3 id="列表-list"><a href="#列表-list" class="headerlink" title="列表(list)"></a>列表(list)</h3><p>索引对应值，索引从0开始，0代表第一个，索引反映的是顺序、位置，对值没有描述性的功能</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">l=[<span class="number">10</span>, <span class="number">3.1</span>, <span class="string">'aaa'</span>, [<span class="string">'bbb'</span>, <span class="string">'ccc'</span>], <span class="string">'ddd'</span>]</span><br><span class="line">print(l[<span class="number">-1</span>])</span><br><span class="line"><span class="comment"># ddd</span></span><br><span class="line">print(l[<span class="number">3</span>][<span class="number">1</span>])</span><br><span class="line"><span class="comment"># bbb</span></span><br></pre></td></tr></table></figure>
<h4 id="类型转换-2"><a href="#类型转换-2" class="headerlink" title="类型转换"></a>类型转换</h4><ul>
<li><code>list</code>：但凡能被for循环遍历的数据类型都可以传给<code>list</code>转换成列表类型，<code>list</code>会跟for循环一样遍历出数据类型中包含的每一个元素然后放到列表中</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">list(<span class="string">'wdad'</span>) <span class="comment"># ['w', 'd', 'a', 'd'] </span></span><br><span class="line">list([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]) <span class="comment"># [1, 2, 3]</span></span><br><span class="line">list(&#123;<span class="string">"name"</span>:<span class="string">"jason"</span>,<span class="string">"age"</span>:<span class="number">18</span>&#125;) <span class="comment"># ['name', 'age']</span></span><br><span class="line">list((<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)) <span class="comment"># [1, 2, 3] </span></span><br><span class="line">list(&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;) <span class="comment"># [1, 2, 3, 4]</span></span><br></pre></td></tr></table></figure>
<h4 id="索引-存取值"><a href="#索引-存取值" class="headerlink" title="索引(存取值)"></a>索引(存取值)</h4><blockquote>
<p><strong>无论是取值操作还是赋值操作：索引不存在则报错</strong></p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">num=[<span class="string">'XXX'</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line"><span class="comment"># 正向取(从左往右)</span></span><br><span class="line">num[<span class="number">0</span>] <span class="comment"># 'XXX'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 反向取(负号表示从右往左)</span></span><br><span class="line">num[<span class="number">-1</span>] <span class="comment"># 5</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 改值</span></span><br><span class="line">num[<span class="number">2</span>]=<span class="number">1</span></span><br><span class="line">print(num) <span class="comment"># ['XXX',1,3,4,5]</span></span><br></pre></td></tr></table></figure>
<h4 id="切片-类似字符串"><a href="#切片-类似字符串" class="headerlink" title="切片(类似字符串)"></a>切片(类似字符串)</h4><p><code>list[n:m:x]</code>：从索引n(包括n)开始到索引m(不包括m)；x步长，可以为负数(反向步长)</p>
<ul>
<li>n在m左边时能取到值，否则为<code>&#39;&#39;</code></li>
<li>n不设置时，表示头开始切片</li>
<li>m不设置时，表示切片到末尾</li>
</ul>
<blockquote>
<p>切片等同于拷贝行为，而且相当于浅copy</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">num=[<span class="string">'XXX'</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line">num[<span class="number">0</span>:<span class="number">4</span>] <span class="comment"># ['XXX', 2, 3, 4]</span></span><br><span class="line"><span class="comment"># 正向步长</span></span><br><span class="line">num[<span class="number">0</span>:<span class="number">4</span>:<span class="number">2</span>] <span class="comment"># ['XXX', 3]</span></span><br><span class="line"><span class="comment"># 反向步长</span></span><br><span class="line">num[<span class="number">4</span>:<span class="number">0</span>:<span class="number">-2</span>] <span class="comment"># [5,3]</span></span><br><span class="line">num[<span class="number">0</span>:<span class="number">4</span>:<span class="number">-2</span>] <span class="comment"># []</span></span><br><span class="line">num[::<span class="number">-1</span>] <span class="comment"># [5, 4, 3, 2, 'XXX']</span></span><br></pre></td></tr></table></figure>
<h4 id="长度-类似字符串"><a href="#长度-类似字符串" class="headerlink" title="长度(类似字符串)"></a>长度(类似字符串)</h4><p><code>len</code>：获取列表长度</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">num=[<span class="string">'XXX'</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line">len(num) <span class="comment"># 5</span></span><br></pre></td></tr></table></figure>
<h4 id="运算-1"><a href="#运算-1" class="headerlink" title="运算"></a>运算</h4><ul>
<li>成员运算in和not in</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">num=[<span class="string">'XXX'</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line"><span class="string">'XXX'</span> <span class="keyword">in</span> num <span class="comment"># True</span></span><br><span class="line"><span class="number">5</span> <span class="keyword">not</span> <span class="keyword">in</span> num <span class="comment"># False</span></span><br></pre></td></tr></table></figure>
<h4 id="内置方法-1"><a href="#内置方法-1" class="headerlink" title="内置方法"></a>内置方法</h4><h5 id="append-尾部添加"><a href="#append-尾部添加" class="headerlink" title="append(尾部添加)"></a>append(尾部添加)</h5><p>列表尾部追加元素</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">l1 = [<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>]</span><br><span class="line">l1.append(<span class="string">'d'</span>)</span><br><span class="line">print(l1) <span class="comment"># ['a', 'b', 'c', 'd']</span></span><br></pre></td></tr></table></figure>
<h5 id="extend-合并列表，在尾部添加多个元素"><a href="#extend-合并列表，在尾部添加多个元素" class="headerlink" title="extend(合并列表，在尾部添加多个元素)"></a>extend(合并列表，在尾部添加多个元素)</h5><p>一次性在列表尾部添加多个元素，原列表值改变，id不变</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">l1 = [<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>]</span><br><span class="line">l1.extend([<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>])</span><br><span class="line">print(l1) <span class="comment"># ['a', 'b', 'c','a', 'b', 'c']</span></span><br></pre></td></tr></table></figure>
<h5 id="insert-添加到指定位置"><a href="#insert-添加到指定位置" class="headerlink" title="insert(添加到指定位置)"></a>insert(添加到指定位置)</h5><p>在指定位置插入元素</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">l1 = [<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>]</span><br><span class="line">l1.insert(<span class="number">1</span>,<span class="string">'hello'</span>)</span><br><span class="line">print(l1) <span class="comment"># ['a', 'hello', 'b', 'c']</span></span><br></pre></td></tr></table></figure>
<h5 id="pop-按索引删除元素"><a href="#pop-按索引删除元素" class="headerlink" title="pop(按索引删除元素)"></a>pop(按索引删除元素)</h5><ul>
<li><code>pop</code>: 根据索引删除，会返回删除的值<ul>
<li>参数，要删除元素的索引，<strong>不指定索引默认删除最后一个</strong></li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">l1 = [<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>]</span><br><span class="line">l1.pop(<span class="number">1</span>) <span class="comment"># 'b'</span></span><br><span class="line">print(l1) <span class="comment"># ['a','c']</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>还能通过<code>del</code>删除，<code>del l1[1]</code>，但只是单纯的删除、没有返回值</p>
</blockquote>
<h5 id="remove-按值删除元素"><a href="#remove-按值删除元素" class="headerlink" title="remove(按值删除元素)"></a>remove(按值删除元素)</h5><ul>
<li><code>remove</code>：从左往右查找到第一个元素删除，返回None，</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">l1 = [<span class="string">'a'</span>,<span class="string">'b'</span>,[<span class="number">1</span>],<span class="string">'c'</span>,<span class="string">'a'</span>,[<span class="number">1</span>]]</span><br><span class="line">l1.remove(<span class="string">'a'</span>)</span><br><span class="line">print(l1) <span class="comment"># ['b', [1], 'c', 'a', [1]]</span></span><br><span class="line">l1.remove([<span class="number">1</span>])</span><br><span class="line">print(l1) <span class="comment"># ['b', 'c', 'a', [1]]</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>匹配的是值，与JS不同</p>
</blockquote>
<h5 id="reverse-颠倒列表"><a href="#reverse-颠倒列表" class="headerlink" title="reverse(颠倒列表)"></a>reverse(颠倒列表)</h5><ul>
<li><code>reverse</code>：颠倒列表内元素顺序</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">l = [<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>,<span class="number">44</span>]</span><br><span class="line">l.reverse() </span><br><span class="line">print(l) <span class="comment"># [44,33,22,11]</span></span><br></pre></td></tr></table></figure>
<h5 id="sort-列表排序"><a href="#sort-列表排序" class="headerlink" title="sort(列表排序)"></a>sort(列表排序)</h5><ul>
<li><code>sort</code>：给列表内所有元素排序，<strong>默认从小到大排序</strong><ul>
<li>reverse：是否颠倒排序，值为<code>True</code>/<code>False</code>，默认False</li>
</ul>
</li>
</ul>
<blockquote>
<ul>
<li>排序时列表元素之间必须是相同数据类型，不可混搭，否则报错</li>
<li>字符之间的大小取决于它们在ASCII表中的先后顺序，越往后越大</li>
<li>字符串、列表等都可以比较大小，原理相同：都是依次比较对应索引的元素的大小，如果分出大小，则无需比较下一个元素</li>
</ul>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">l = [<span class="number">11</span>,<span class="number">22</span>,<span class="number">3</span>,<span class="number">42</span>,<span class="number">7</span>,<span class="number">55</span>]</span><br><span class="line"><span class="comment"># 默认从小到大排序</span></span><br><span class="line">l.sort()</span><br><span class="line">print(l) <span class="comment"># [3, 7, 11, 22, 42, 55]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># reverse用来指定是否跌倒排序，默认为False</span></span><br><span class="line">l = [<span class="number">11</span>,<span class="number">22</span>,<span class="number">3</span>,<span class="number">42</span>,<span class="number">7</span>,<span class="number">55</span>]</span><br><span class="line">l.sort(reverse=<span class="keyword">True</span>)</span><br><span class="line">print(l) <span class="comment"># [55, 42, 22, 11, 7, 3]</span></span><br></pre></td></tr></table></figure>
<h3 id="元组-tuple"><a href="#元组-tuple" class="headerlink" title="元组(tuple)"></a>元组(tuple)</h3><p>元组与列表类似，也是可以存多个任意类型的元素，不同之处在于元组的元素不能修改，即元组相当于<strong>不可变的列表</strong>，用于记录多个固定不允许修改的值，单纯用于取。<strong>索引(只能取值)，切片，长度，运算特点同列表</strong></p>
<blockquote>
<p><strong>如果元组内只有一个值，则必须加一个逗号，否则<code>()</code>就只是包含的意思而非定义元组</strong><br>元组内的元素无法修改，指的是元组内索引指向的内存地址不能被修改，如果元组中存在可变类型，可变类型的内容是可以修改</p>
</blockquote>
<p><img src="/2019/05/17/python3.0基础/python3.0基础-20220722-14-27-05.png" alt="元组"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在()内用逗号分隔开多个任意类型的值</span></span><br><span class="line">countries = (<span class="string">"中国"</span>，<span class="string">"美国"</span>，<span class="string">"英国"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 强调：如果元组内只有一个值，则必须加一个逗号，否则()就只是包含的意思而非定义元组</span></span><br><span class="line">countries = (<span class="string">"中国"</span>，) <span class="comment"># 本质:countries = tuple("中国")</span></span><br></pre></td></tr></table></figure>
<h4 id="类型转换-3"><a href="#类型转换-3" class="headerlink" title="类型转换"></a>类型转换</h4><ul>
<li><code>tuple</code>：但凡能被for循环的遍历的数据类型都可以传给<code>tuple</code>转换成元组类型，<code>tuple</code>会跟for循环一样遍历出数据类型中包含的每一个元素然后放到元组中</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">tuple(<span class="string">'wdad'</span>) <span class="comment"># ('w', 'd', 'a', 'd') </span></span><br><span class="line">tuple([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]) <span class="comment"># (1, 2, 3)</span></span><br><span class="line">tuple(&#123;<span class="string">"name"</span>:<span class="string">"jason"</span>,<span class="string">"age"</span>:<span class="number">18</span>&#125;) <span class="comment"># ('name', ')</span></span><br><span class="line">tuple((<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)) <span class="comment"># (1, 2, 3)</span></span><br><span class="line">tuple(&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;) <span class="comment"># (1, 2, 3, 4)</span></span><br></pre></td></tr></table></figure>
<h3 id="字典-dict"><a href="#字典-dict" class="headerlink" title="字典(dict)"></a>字典(dict)</h3><p>key对应值，其中key通常为字符串类型，所以key对值可以有描述性的功能</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">d=&#123;<span class="string">'a'</span>:<span class="number">1</span>,<span class="string">'b'</span>:<span class="number">2</span>&#125;</span><br><span class="line">print(d[<span class="string">'a'</span>])</span><br><span class="line"><span class="comment"># 1</span></span><br></pre></td></tr></table></figure>
<h4 id="类型转换-4"><a href="#类型转换-4" class="headerlink" title="类型转换"></a>类型转换</h4><ul>
<li><code>dict</code><ul>
<li>参数格式1: key=value, ‘,’隔开</li>
<li>参数格式2：传入一个元组或列表，其中每个元素也是元组或列表(由key作为第一个元素，对应value作为第二个元素)</li>
</ul>
</li>
<li><code>fromkeys</code>：从元组中取出每个值当做key，与后面的值组层key:value放入目标字典</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># dict </span></span><br><span class="line">p1=dict([[<span class="string">'name'</span>,<span class="string">'xxx'</span>],(<span class="string">'age'</span>,<span class="number">18</span>)])</span><br><span class="line">print(p1) <span class="comment"># &#123;'age': 18, 'name': 'xxx'&#125;</span></span><br><span class="line">p2=dict(name=<span class="string">'xxx'</span>,age=<span class="number">18</span>,sex=<span class="string">'male'</span>)</span><br><span class="line">print(p2) <span class="comment"># &#123;'name': 'xxx', 'age': 18, 'sex': 'male'&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># fromkeys</span></span><br><span class="line">&#123;&#125;.fromkeys((<span class="string">'name'</span>,<span class="string">'age'</span>,<span class="string">'sex'</span>),<span class="keyword">None</span>) <span class="comment"># &#123;&#125;.fromkeys(('name','age','sex'),None)</span></span><br></pre></td></tr></table></figure>
<h4 id="key-存取值"><a href="#key-存取值" class="headerlink" title="key(存取值)"></a>key(存取值)</h4><blockquote>
<ul>
<li>取值操作，key不存在，则会报错，’get’方法取值不会报错,<strong>字典取值建议使用get方法</strong></li>
<li><strong>对于赋值操作，如果key原先不存在于字典，则会新增key:value，如果key原先存在于字典，则会修改对应value的值</strong></li>
</ul>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">dic = &#123;<span class="string">'name'</span>: <span class="string">'xxx'</span>,<span class="string">'age'</span>: <span class="number">18</span>,<span class="string">'hobbies'</span>: [<span class="string">'play game'</span>, <span class="string">'basketball'</span>]&#125;</span><br><span class="line">dic[<span class="string">'name'</span>] <span class="comment"># 'xxx'</span></span><br><span class="line">dic[<span class="string">'hobbies'</span>][<span class="number">1</span>] <span class="comment"># 'basketball'</span></span><br><span class="line"><span class="comment"># key不存在</span></span><br><span class="line">dic[<span class="string">'gender'</span>] = <span class="string">'male'</span></span><br><span class="line">print(dic) <span class="comment"># &#123;'name': 'xxx', 'age': 18, 'hobbies': ['play game', 'basketball'], 'gender': 'male'&#125;</span></span><br><span class="line"><span class="comment"># key存在</span></span><br><span class="line">dic[<span class="string">'age'</span>]=<span class="number">12</span></span><br><span class="line">print(dic) <span class="comment"># &#123;'name': 'xxx', 'age': 12, 'hobbies': ['play game', 'basketball'], 'gender': 'male'&#125;</span></span><br></pre></td></tr></table></figure>
<h4 id="长度-1"><a href="#长度-1" class="headerlink" title="长度"></a>长度</h4><p><code>len</code>：获取字典key的数量</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dic=&#123;<span class="string">'name'</span>: <span class="string">'xxx'</span>, <span class="string">'age'</span>: <span class="number">12</span>, <span class="string">'hobbies'</span>: [<span class="string">'play game'</span>, <span class="string">'basketball'</span>], <span class="string">'gender'</span>: <span class="string">'male'</span>&#125;</span><br><span class="line">len(dic) <span class="comment"># 4</span></span><br></pre></td></tr></table></figure>
<h4 id="运算-2"><a href="#运算-2" class="headerlink" title="运算"></a>运算</h4><ul>
<li>成员运算<code>in</code>和<code>not in</code>：判断某个值是否是字典的key</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dic=&#123;<span class="string">'name'</span>: <span class="string">'xxx'</span>, <span class="string">'age'</span>: <span class="number">12</span>, <span class="string">'hobbies'</span>: [<span class="string">'play game'</span>, <span class="string">'basketball'</span>], <span class="string">'gender'</span>: <span class="string">'male'</span>&#125;</span><br><span class="line"><span class="string">'name'</span> <span class="keyword">in</span> dic <span class="comment"># True</span></span><br></pre></td></tr></table></figure>
<h4 id="内置方法-2"><a href="#内置方法-2" class="headerlink" title="内置方法"></a>内置方法</h4><h5 id="keys-获取所有的key-、values-获取所有的value-，items-获取所有的键值对"><a href="#keys-获取所有的key-、values-获取所有的value-，items-获取所有的键值对" class="headerlink" title="keys(获取所有的key)、values(获取所有的value)，items(获取所有的键值对)"></a>keys(获取所有的key)、values(获取所有的value)，items(获取所有的键值对)</h5><ul>
<li><code>keys</code>：获取字典所有的key，返回dict_keys类型</li>
<li><code>values</code>：获取字典所有的值，返回dict_values类型</li>
<li><code>items</code>：获取字典所有的键值对，返回dict_items类型</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dic=&#123;<span class="string">'name'</span>: <span class="string">'xxx'</span>, <span class="string">'age'</span>: <span class="number">12</span>, <span class="string">'hobbies'</span>: [<span class="string">'play game'</span>, <span class="string">'basketball'</span>], <span class="string">'gender'</span>: <span class="string">'male'</span>&#125;</span><br><span class="line">dic.keys() <span class="comment"># dict_keys(['name', 'age', 'hobbies', 'gender'])</span></span><br><span class="line">dic.values() <span class="comment"># dict_values(['xxx', 12, ['play game', 'basketball'], 'male'])</span></span><br><span class="line">dic.items() <span class="comment"># dict_items([('name', 'xxx'), ('age', 12), ('hobbies', ['play game', 'basketball']), ('gender', 'male')])</span></span><br></pre></td></tr></table></figure>
<h5 id="get-获取key对应value"><a href="#get-获取key对应value" class="headerlink" title="get(获取key对应value)"></a>get(获取key对应value)</h5><ul>
<li><code>get</code>：获取字典中key对应的value，key存在，则获取key对应的value值，<strong>key不存在，不会报错而是默认返回None</strong><ul>
<li>第一个参数：key</li>
<li>第二个参数：当key不存在时的默认返回值</li>
</ul>
</li>
</ul>
<blockquote>
<p>字典取值建议使用get方法</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dic= &#123;<span class="string">'k1'</span>:<span class="string">'111'</span>,<span class="string">'k2'</span>:<span class="string">'222'</span>,<span class="string">'k3'</span>:<span class="string">'333'</span>&#125;</span><br><span class="line">dic.get(<span class="string">'k1'</span>) <span class="comment"># '111'</span></span><br><span class="line">dic.get(<span class="string">'k4'</span>,<span class="number">444</span>) <span class="comment"># 4444</span></span><br></pre></td></tr></table></figure>
<h5 id="pop-按key删除键值对"><a href="#pop-按key删除键值对" class="headerlink" title="pop(按key删除键值对)"></a>pop(按key删除键值对)</h5><ul>
<li><code>pop</code>：指定字典的key来删除字典的键值对，返回key对应的值</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dic=&#123;<span class="string">'name'</span>: <span class="string">'xxx'</span>, <span class="string">'age'</span>: <span class="number">12</span>, <span class="string">'hobbies'</span>: [<span class="string">'play game'</span>, <span class="string">'basketball'</span>], <span class="string">'gender'</span>: <span class="string">'male'</span>&#125;</span><br><span class="line">dic.pop(<span class="string">'name'</span>) <span class="comment"># 'xxx'</span></span><br><span class="line">print(dic) <span class="comment"># &#123;'age': 12, 'hobbies': ['play game', 'basketball'], 'gender': 'male'&#125;</span></span><br></pre></td></tr></table></figure>
<h5 id="popitem-随机删除一组键值对"><a href="#popitem-随机删除一组键值对" class="headerlink" title="popitem(随机删除一组键值对)"></a>popitem(随机删除一组键值对)</h5><ul>
<li><code>popitem</code>：随机删除一组键值对,并将删除的键值放到元组内返回</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dic= &#123;<span class="string">'k1'</span>:<span class="string">'111'</span>,<span class="string">'k2'</span>:<span class="string">'222'</span>,<span class="string">'k3'</span>:<span class="string">'333'</span>&#125;</span><br><span class="line">dic.popitem() <span class="comment"># ('k3', '333')</span></span><br><span class="line">print(dic) <span class="comment"># &#123;'k1': '111', 'k2': '222'&#125;</span></span><br></pre></td></tr></table></figure>
<h5 id="fromkeys"><a href="#fromkeys" class="headerlink" title="fromkeys"></a>fromkeys</h5><p>见类型转换</p>
<h5 id="setdefault-设置默认值"><a href="#setdefault-设置默认值" class="headerlink" title="setdefault(设置默认值)"></a>setdefault(设置默认值)</h5><ul>
<li><code>setdefault</code>：key不存在则新增键值对，并将新增的value返回，key存在则不做任何修改，并返回已存在key对应的value值</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">dic=&#123;<span class="string">'k1'</span>:<span class="number">111</span>,<span class="string">'k2'</span>:<span class="number">222</span>&#125;</span><br><span class="line">dic.setdefault(<span class="string">'k3'</span>,<span class="number">333</span>) <span class="comment"># 333</span></span><br><span class="line">print(dic) <span class="comment"># &#123;'k1': 111, 'k3': 333, 'k2': 222&#125;</span></span><br><span class="line"></span><br><span class="line">dic1=&#123;<span class="string">'k1'</span>:<span class="number">111</span>,<span class="string">'k2'</span>:<span class="number">222</span>&#125;</span><br><span class="line">dic1.setdefault(<span class="string">'k1'</span>,<span class="number">666</span>) <span class="comment"># 111</span></span><br><span class="line">print(dic1) <span class="comment"># &#123;'k1':111,'k2':222&#125;</span></span><br></pre></td></tr></table></figure>
<h5 id="clear-删除所有键值对"><a href="#clear-删除所有键值对" class="headerlink" title="clear(删除所有键值对)"></a>clear(删除所有键值对)</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dic=&#123;<span class="string">'k1'</span>:<span class="string">'111'</span>,<span class="string">'k2'</span>:<span class="string">'222'</span>,<span class="string">'k3'</span>:<span class="string">'333'</span>&#125;</span><br><span class="line">dic.clear()</span><br><span class="line">print(dic) <span class="comment"># &#123;&#125;</span></span><br></pre></td></tr></table></figure>
<h5 id="update-用新字典更新旧字典"><a href="#update-用新字典更新旧字典" class="headerlink" title="update(用新字典更新旧字典)"></a>update(用新字典更新旧字典)</h5><ul>
<li><code>update</code>：用新字典更新旧字典，有则修改，无则添加</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">dic=&#123;<span class="string">'k1'</span>:<span class="string">'111'</span>,<span class="string">'k2'</span>:<span class="string">'222'</span>,<span class="string">'k3'</span>:<span class="string">'333'</span>&#125;</span><br><span class="line">id(dic) <span class="comment"># 1473275203008</span></span><br><span class="line">dic1=&#123;<span class="string">'k1'</span>:<span class="number">1</span>,<span class="string">'k2'</span>:<span class="number">2</span>,<span class="string">'k3'</span>:<span class="number">3</span>&#125;</span><br><span class="line">id(dic1) <span class="comment"># 1473275615360</span></span><br><span class="line">dic.update(dic1)</span><br><span class="line">print(dic,id(dic)) <span class="comment"># &#123;'k1': 1, 'k2': 2, 'k3': 3&#125; 1473275203008</span></span><br></pre></td></tr></table></figure>
<h3 id="集合-set"><a href="#集合-set" class="headerlink" title="集合(set)"></a>集合(set)</h3><p>主要用于：去重、关系运算</p>
<blockquote>
<ul>
<li>每个元素必须是不可变类型</li>
<li>集合内没有重复的元素</li>
<li>集合内元素无序</li>
<li><code>{}</code>默认是空字典，<code>set()</code>才是空集合</li>
</ul>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;1,2,3,4&#125;</span><br></pre></td></tr></table></figure>
<h4 id="类型转换-5"><a href="#类型转换-5" class="headerlink" title="类型转换"></a>类型转换</h4><ul>
<li><code>set</code>：但凡能被for循环的遍历的数据类型<strong>（遍历出的每一个值都必须为不可变类型）</strong>都可以传给set()转换成集合类型</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">set([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]) <span class="comment"># &#123;1, 2, 3, 4&#125;</span></span><br><span class="line">set((<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)) <span class="comment"># &#123;1, 2, 3, 4&#125;</span></span><br><span class="line">set(&#123;<span class="string">'name'</span>:<span class="string">'jason'</span>,&#125;) <span class="comment"># &#123;'name'&#125;</span></span><br><span class="line">set(<span class="string">'egon'</span>) <span class="comment"># &#123;'e', 'o', 'g', 'n'&#125;</span></span><br></pre></td></tr></table></figure>
<h4 id="长度-2"><a href="#长度-2" class="headerlink" title="长度"></a>长度</h4><p><code>len</code>：获取集合长度</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s=&#123;<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>&#125;</span><br><span class="line">len(s) <span class="comment"># 3</span></span><br></pre></td></tr></table></figure>
<h4 id="运算-3"><a href="#运算-3" class="headerlink" title="运算"></a>运算</h4><ul>
<li>成员运算<code>in</code>和<code>not in</code></li>
<li>关系元素(见下章节运用-关系运算)</li>
</ul>
<h4 id="运用"><a href="#运用" class="headerlink" title="运用"></a>运用</h4><h5 id="关系运算"><a href="#关系运算" class="headerlink" title="关系运算"></a>关系运算</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">friends1 = &#123;<span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"A"</span>,<span class="string">"B"</span>&#125;</span><br><span class="line">friends2 = &#123;<span class="string">"A"</span>,<span class="string">"B"</span>,<span class="string">"c"</span>,<span class="string">"C"</span>&#125;</span><br><span class="line">friends1 | friends2 <span class="comment"># &#123;'b', 'C', 'c', 'A', 'B', 'a'&#125;</span></span><br><span class="line">friends1 &amp; friends2 <span class="comment"># &#123;'A', 'B'&#125;</span></span><br><span class="line">friends1 - friends2 <span class="comment"># &#123;'b', 'a'&#125;</span></span><br><span class="line">friends2 - friends1 <span class="comment"># &#123;'c', 'C'&#125;</span></span><br><span class="line">friends1 ^ friends2 <span class="comment"># &#123;'b', 'C', 'c', 'a'&#125;</span></span><br><span class="line"><span class="comment"># 值是否相等</span></span><br><span class="line">friends1 == friends2 <span class="comment"># False</span></span><br><span class="line">&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;==&#123;<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>&#125; <span class="comment"># True </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 父集：一个集合是否包含另外一个集合</span></span><br><span class="line">&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125; &gt; &#123;<span class="number">1</span>,<span class="number">2</span>&#125; <span class="comment"># True</span></span><br><span class="line">&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125; &gt;= &#123;<span class="number">1</span>,<span class="number">2</span>&#125; <span class="comment"># True</span></span><br><span class="line">&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125; &gt; &#123;<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>&#125; <span class="comment"># False</span></span><br><span class="line">&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125; &gt; &#123;<span class="number">1</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125; <span class="comment"># False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 子集</span></span><br><span class="line">&#123;<span class="number">1</span>,<span class="number">2</span>&#125; &lt; &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125; <span class="comment"># True</span></span><br><span class="line">&#123;<span class="number">1</span>,<span class="number">2</span>&#125; &lt;= &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125; <span class="comment"># True</span></span><br></pre></td></tr></table></figure>
<h5 id="去重"><a href="#去重" class="headerlink" title="去重"></a>去重</h5><blockquote>
<p>集合去重复有局限性：</p>
<ul>
<li>只能针对不可变类型</li>
<li>合本身是无序的，去重之后无法保留原来的顺序</li>
</ul>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">l=[<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="number">1</span>,<span class="string">'a'</span>,<span class="string">'a'</span>]</span><br><span class="line">set(l) <span class="comment"># &#123;'b', 1, 'a'&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="检测数据类型"><a href="#检测数据类型" class="headerlink" title="检测数据类型"></a>检测数据类型</h3><h4 id="type-变量"><a href="#type-变量" class="headerlink" title="type(变量)"></a>type(变量)</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt;type(<span class="number">1</span>)</span><br><span class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">int</span>'&gt;</span></span><br><span class="line"><span class="class">&gt;&gt;&gt;<span class="title">type</span><span class="params">(<span class="string">'a'</span>)</span></span></span><br><span class="line"><span class="class">&lt;<span class="title">class</span> '<span class="title">str</span>'&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="isinstance-变量-数据类型"><a href="#isinstance-变量-数据类型" class="headerlink" title="isinstance(变量,数据类型)"></a>isinstance(变量,数据类型)</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt;isinstance(<span class="number">1.0</span>,float)</span><br><span class="line"><span class="keyword">True</span></span><br><span class="line">&gt;&gt;&gt;isinstance(<span class="keyword">False</span>,bool)</span><br><span class="line"><span class="keyword">True</span></span><br></pre></td></tr></table></figure>
<h3 id="可变不可变类型"><a href="#可变不可变类型" class="headerlink" title="可变不可变类型"></a>可变不可变类型</h3><ul>
<li>可变类型：值改变，内存地址不变(id不变)，证明改的是原值，证明原值是可以被改变的<ul>
<li>list</li>
<li>dict: value可以是任意类型，<strong>key必须是不可变类型</strong></li>
</ul>
</li>
<li>不可变类型：值改变，内存地址也改变(id改变)，证明是产生新的值，压根没有改变原值，证明原值是不可以被修改的<ul>
<li>int</li>
<li>float</li>
<li>str</li>
<li>bool</li>
<li>tuple</li>
</ul>
</li>
</ul>
<blockquote>
<p>深copy和浅copy</p>
</blockquote>
<h3 id="数据类型分类"><a href="#数据类型分类" class="headerlink" title="数据类型分类"></a>数据类型分类</h3><p><img src="/2019/05/17/python3.0基础/python3.0基础-20220722-14-29-42.png" alt="数据类型分类"></p>
<h4 id="可迭代对象"><a href="#可迭代对象" class="headerlink" title="可迭代对象"></a>可迭代对象</h4><p>列表、字典、字符串、元组、集合</p>
<h5 id="支持迭代器协议的内置函数"><a href="#支持迭代器协议的内置函数" class="headerlink" title="支持迭代器协议的内置函数"></a>支持迭代器协议的内置函数</h5><ul>
<li><code>max</code>：取最大值</li>
<li><code>min</code>：取最小值</li>
<li><code>sorted</code>：排序</li>
<li><code>map</code></li>
<li><code>reduce</code></li>
<li><code>filter</code></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">salaries=&#123;</span><br><span class="line">    <span class="string">'siry'</span>:<span class="number">3000</span>,</span><br><span class="line">    <span class="string">'tom'</span>:<span class="number">7000</span>,</span><br><span class="line">    <span class="string">'lili'</span>:<span class="number">10000</span>,</span><br><span class="line">    <span class="string">'jack'</span>:<span class="number">2000</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># 比较key</span></span><br><span class="line">max(salaries) <span class="comment"># 'tom'</span></span><br><span class="line">min(salaries) <span class="comment"># 'jack'</span></span><br><span class="line"><span class="comment"># 比较值</span></span><br><span class="line"><span class="comment"># 函数max会迭代字典salaries，每取出一个“人名”就会当做参数传给指定的匿名函数，然后将匿名函数的返回值当做比较依据，最终返回薪资最高的那个人的名字</span></span><br><span class="line">max(salaries,key=<span class="keyword">lambda</span> k:salaries[k]) <span class="comment"># 'lili'</span></span><br><span class="line">min(salaries,key=<span class="keyword">lambda</span> k:salaries[k]) <span class="comment"># 'jack'</span></span><br><span class="line"></span><br><span class="line">sorted(salaries) <span class="comment"># ['jack', 'lili', 'siry', 'tom']</span></span><br><span class="line">sorted(salaries,key=<span class="keyword">lambda</span> key:salaries[key]) <span class="comment"># ['jack', 'siry', 'tom', 'lili']</span></span><br><span class="line"></span><br><span class="line">array=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line">res=map(<span class="keyword">lambda</span> x:x**<span class="number">2</span>,array) <span class="comment"># &lt;map object at 0x1033f45f8&gt;</span></span><br><span class="line">list(res) <span class="comment"># [1, 4, 9, 16, 25]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> reduce</span><br><span class="line">res=reduce(<span class="keyword">lambda</span> x,y:x+y,array) <span class="comment"># 15</span></span><br><span class="line"></span><br><span class="line">res=filter(<span class="keyword">lambda</span> x:x&gt;<span class="number">3</span>,array)</span><br><span class="line">list(res) <span class="comment"># [4, 5]</span></span><br></pre></td></tr></table></figure>
<h2 id="用户交互输入输出"><a href="#用户交互输入输出" class="headerlink" title="用户交互输入输出"></a>用户交互输入输出</h2><p><img src="/2019/05/17/python3.0基础/python3.0基础-20220816-10-09-05.png" alt="概览"></p>
<h3 id="Python3"><a href="#Python3" class="headerlink" title="Python3"></a>Python3</h3><ul>
<li><code>print()</code>会依次打印每个字符串，遇到逗号<code>,</code>会输出一个空格<br><img src="/2019/05/17/python3.0基础/python3.0基础-20190517-16-39-40.png" alt="print"></li>
<li><code>input()</code>，可以让用户输入字符串，并存放到一个变量里</li>
</ul>
<blockquote>
<p>input会将用户输入的所有内容都存成字符串类型</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>name = input(<span class="string">'pleace enter your name: '</span>)</span><br><span class="line">pleace enter your name: Cindy</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'hello,'</span>,name)</span><br><span class="line">hello, Cindy</span><br></pre></td></tr></table></figure>
<h3 id="python2"><a href="#python2" class="headerlink" title="python2"></a>python2</h3><ul>
<li><code>raw_input()</code>，用法与python3的<code>input</code>一模一样</li>
<li><code>input()</code>: 要求用户必须输入一个明确的数据类型，输入的是什么类型，就存成什么类型</li>
</ul>
<blockquote>
<p>python2中input输入的是什么类型，就存成什么类型</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>age = input(<span class="string">'pleace enter your age: '</span>)</span><br><span class="line">pleace enter your name: <span class="number">18</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(type(age))</span><br><span class="line">&lt;type <span class="string">'int'</span>&gt;</span><br></pre></td></tr></table></figure>
<h2 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h2><h3 id="算数运算符"><a href="#算数运算符" class="headerlink" title="算数运算符"></a>算数运算符</h3><p><img src="/2019/05/17/python3.0基础/python3.0基础-20220704-10-52-02.png" alt="算数运算符"></p>
<h3 id="比较运算符"><a href="#比较运算符" class="headerlink" title="比较运算符"></a>比较运算符</h3><p><img src="/2019/05/17/python3.0基础/python3.0基础-20220704-10-57-54.png" alt="比较运算符"></p>
<h3 id="赋值运算符"><a href="#赋值运算符" class="headerlink" title="赋值运算符"></a>赋值运算符</h3><h4 id="变量的赋值"><a href="#变量的赋值" class="headerlink" title="=:变量的赋值"></a><code>=</code>:变量的赋值</h4><h4 id="增量赋值"><a href="#增量赋值" class="headerlink" title="增量赋值"></a>增量赋值</h4><p><img src="/2019/05/17/python3.0基础/python3.0基础-20220704-10-59-28.png" alt="增量赋值"></p>
<h4 id="链式赋值"><a href="#链式赋值" class="headerlink" title="链式赋值"></a>链式赋值</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 链式赋值</span></span><br><span class="line">z = y = x = <span class="number">10</span></span><br><span class="line"><span class="comment"># 等同于</span></span><br><span class="line"><span class="comment"># x=10</span></span><br><span class="line"><span class="comment"># y=x</span></span><br><span class="line"><span class="comment"># z=y</span></span><br></pre></td></tr></table></figure>
<h4 id="交叉赋值"><a href="#交叉赋值" class="headerlink" title="交叉赋值"></a>交叉赋值</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 交叉赋值</span></span><br><span class="line">m=<span class="number">10</span></span><br><span class="line">n=<span class="number">20</span></span><br><span class="line">m,n=n,m</span><br><span class="line"><span class="comment"># 等同于</span></span><br><span class="line"><span class="comment"># temp=m</span></span><br><span class="line"><span class="comment"># m=n</span></span><br><span class="line"><span class="comment"># n=temp</span></span><br></pre></td></tr></table></figure>
<h4 id="解压赋值"><a href="#解压赋值" class="headerlink" title="解压赋值"></a>解压赋值</h4><blockquote>
<p>字符串、字典、元组、集合类型都支持解压赋值<br>解压字典默认解压出来的是字典的key</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">nums=[<span class="number">111</span>,<span class="number">222</span>,<span class="number">333</span>,<span class="number">444</span>,<span class="number">555</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解压赋值</span></span><br><span class="line"><span class="comment"># 等号左边的变量名个数必须与右面包含值的个数相同，否则报错</span></span><br><span class="line">a,b,c,d,e=nums</span><br><span class="line"></span><br><span class="line"><span class="comment"># *，可以帮助我们取需要的值，只能出现一个*</span></span><br><span class="line"><span class="comment"># 取前三个值</span></span><br><span class="line">x,y,z,*_=nums</span><br><span class="line"><span class="comment"># 取后三个值</span></span><br><span class="line">*_,x,y,z=nums</span><br><span class="line"><span class="comment"># 取首尾的值</span></span><br><span class="line">x,*_,y,z=nums</span><br><span class="line"><span class="comment"># 取中间的值</span></span><br><span class="line"> _,*middle,_=salaries</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解压字典</span></span><br><span class="line">x,y,z=dic=&#123;<span class="string">'a'</span>:<span class="number">1</span>,<span class="string">'b'</span>:<span class="number">2</span>,<span class="string">'c'</span>:<span class="number">3</span>&#125; <span class="comment"># a b c</span></span><br></pre></td></tr></table></figure>
<h3 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h3><p><img src="/2019/05/17/python3.0基础/python3.0基础-20220704-13-31-52.png" alt="逻辑运算符"></p>
<ul>
<li><code>and</code>：可以用and连接多个条件，<strong>偷懒原则</strong>，会<strong>按照从左到右的顺序依次判断，一旦某一个条件为False，则无需再往右判断</strong>，可以立即判定最终结果就为False，只有在所有条件的结果都为True的情况下，最终结果才为True。</li>
<li><code>or</code>：可以用or连接多个条件，<strong>偷懒原则</strong>，会<strong>按照从左到右的顺序依次判断，一旦某一个条件为True，则无需再往右判断</strong>，可以立即判定最终结果就为True，只有在所有条件的结果都为False的情况下，最终结果才为False</li>
<li>混用优先级：<code>not</code> &gt; <code>and</code> &gt; <code>or</code><ul>
<li>not的优先级最高，就是把紧跟其后的那个条件结果取反，所以not与紧跟其后的条件不可分割</li>
</ul>
</li>
</ul>
<blockquote>
<ul>
<li>短路运算：逻辑运算的结果一旦可以确定，那么就以当前处计算到的值作为最终结果返回，如<code>0 and 2 or 1 or 4</code>结果为<code>1</code></li>
<li>隐式布尔值，所有的值都可以当成条件去用，其中<code>0</code>、<code>None</code>、<code>空(空字符串、空列表、空字典)</code>代表的布尔值为<code>False</code>，其余都为<code>True</code></li>
</ul>
</blockquote>
<h3 id="成员运算符"><a href="#成员运算符" class="headerlink" title="成员运算符"></a>成员运算符</h3><p><img src="/2019/05/17/python3.0基础/python3.0基础-20220704-13-37-56.png" alt="成员运算符"></p>
<h3 id="身份运算符"><a href="#身份运算符" class="headerlink" title="身份运算符"></a>身份运算符</h3><p><img src="/2019/05/17/python3.0基础/python3.0基础-20220704-13-38-53.png" alt="身份运算符"></p>
<blockquote>
<p>==双等号比较的是value是否相等，而is比较的是id是否相等</p>
</blockquote>
<h2 id="缩进和代码块"><a href="#缩进和代码块" class="headerlink" title="缩进和代码块"></a>缩进和代码块</h2><p>当语句以<code>:</code>结尾时，缩进的语句视为代码块</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">100</span></span><br><span class="line"><span class="keyword">if</span> a &gt;= <span class="number">0</span>:</span><br><span class="line">    print(a)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(-a)</span><br></pre></td></tr></table></figure>
<ul>
<li>好处：强迫你写出格式化的缩进较少的代码，将一段很长的代码拆分成若干函数</li>
<li>缺点：复制粘贴功能需要重新检查缩进正确性，IDE很难格式化python代码</li>
</ul>
<blockquote>
<p>缩进级别必须保持一致</p>
</blockquote>
<h2 id="流程控制"><a href="#流程控制" class="headerlink" title="流程控制"></a>流程控制</h2><p><img src="/2019/05/17/python3.0基础/python3.0基础-20220816-10-10-01.png" alt="流程控制概览"></p>
<p>流程控制即控制流程，具体指控制程序的执行流程，而程序的执行流程分为三种结构：顺序结构（之前我们写的代码都是顺序结构）、分支结构（用到if判断）、循环结构（用到while与for）</p>
<h3 id="if判断（分支结构）"><a href="#if判断（分支结构）" class="headerlink" title="if判断（分支结构）"></a>if判断（分支结构）</h3><p>条件可以是任意表达式，但执行结果必须为布尔类型，所有的数据类型会自动转换成布尔类型</p>
<blockquote>
<p>隐式布尔值，所有的值都可以当成条件去用，其中<code>0</code>、<code>None</code>、<code>空(空字符串、空列表、空字典)</code>代表的布尔值为<code>False</code>，其余都为<code>True</code></p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">语法3:</span></span><br><span class="line"><span class="string">if 条件1:</span></span><br><span class="line"><span class="string">    代码...</span></span><br><span class="line"><span class="string">elif 条件2:</span></span><br><span class="line"><span class="string">    代码...</span></span><br><span class="line"><span class="string">elif 条件2:</span></span><br><span class="line"><span class="string">    代码...</span></span><br><span class="line"><span class="string">...</span></span><br><span class="line"><span class="string">else:</span></span><br><span class="line"><span class="string">    代码...</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">a = <span class="number">100</span></span><br><span class="line"><span class="keyword">if</span> a &lt; <span class="number">60</span>:</span><br><span class="line">    print(<span class="string">'D'</span>)</span><br><span class="line"><span class="keyword">elif</span> a&lt;<span class="number">80</span>:</span><br><span class="line">    print(<span class="string">'C'</span>)</span><br><span class="line"><span class="keyword">elif</span> a&lt;<span class="number">90</span>:</span><br><span class="line">    print(<span class="string">'B'</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">'A'</span>)</span><br></pre></td></tr></table></figure>
<h3 id="while循环（条件循环）（循环结构）"><a href="#while循环（条件循环）（循环结构）" class="headerlink" title="while循环（条件循环）（循环结构）"></a>while循环（条件循环）（循环结构）</h3><p><img src="/2019/05/17/python3.0基础/python3.0基础-20220704-14-00-01.png" alt="while循环"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">while 条件:</span></span><br><span class="line"><span class="string">    代码...</span></span><br><span class="line"><span class="string">else :</span></span><br><span class="line"><span class="string">    代码...</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># while循环嵌套与结束</span></span><br><span class="line"><span class="comment"># 每一层都必须配一个break</span></span><br><span class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">    <span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">        <span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">break</span></span><br></pre></td></tr></table></figure>
<h4 id="结束循环与跳过"><a href="#结束循环与跳过" class="headerlink" title="结束循环与跳过"></a>结束循环与跳过</h4><ul>
<li>将条件改为False，等到下次循环判断条件时才会生效</li>
<li><code>break</code>：只要运行到break就会立刻终止本层循环</li>
<li><code>continue</code>：结束本次循环，跳过后续代码，直接进入下一次</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 改变条件的方式</span></span><br><span class="line">tag=<span class="keyword">True</span></span><br><span class="line"><span class="keyword">while</span> tag:</span><br><span class="line">    inp_name=input(<span class="string">'请输入您的账号：'</span>)</span><br><span class="line">    inp_pwd=input(<span class="string">'请输入您的密码：'</span>)</span><br><span class="line">    <span class="keyword">if</span> inp_name  == username <span class="keyword">and</span> inp_pwd == password:</span><br><span class="line">        print(<span class="string">'登录成功'</span>)</span><br><span class="line">        <span class="keyword">while</span> tag:</span><br><span class="line">            cmd=input(<span class="string">"输入命令&gt;: "</span>)</span><br><span class="line">            <span class="keyword">if</span> cmd == <span class="string">'q'</span>:</span><br><span class="line">                tag=<span class="keyword">False</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                print(<span class="string">'命令&#123;x&#125;正在运行'</span>.format(x=cmd))</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        print(<span class="string">'账号名或密码错误'</span>)</span><br><span class="line">print(<span class="string">'====end===='</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># break的方式</span></span><br><span class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">    inp_name=input(<span class="string">'请输入您的账号：'</span>)</span><br><span class="line">    inp_pwd=input(<span class="string">'请输入您的密码：'</span>)</span><br><span class="line">    <span class="keyword">if</span> inp_name  == username <span class="keyword">and</span> inp_pwd == password:</span><br><span class="line">        print(<span class="string">'登录成功'</span>)</span><br><span class="line">        <span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">            cmd=input(<span class="string">"输入命令&gt;: "</span>)</span><br><span class="line">            <span class="keyword">if</span> cmd == <span class="string">'q'</span>:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            print(<span class="string">'命令&#123;x&#125;正在运行'</span>.format(x=cmd))</span><br><span class="line">        <span class="keyword">break</span> <span class="comment"># 立刻终止本层循环</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        print(<span class="string">'账号名或密码错误'</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">"循环正常执行完啦"</span>)</span><br><span class="line">print(<span class="string">'====end===='</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># continue：结束本次循环，直接进入下一次</span></span><br><span class="line">count=<span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> count &lt; <span class="number">6</span>:</span><br><span class="line">    <span class="keyword">if</span> count == <span class="number">4</span>:</span><br><span class="line">        count+=<span class="number">1</span></span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">        <span class="comment"># count+=1 # 错误</span></span><br><span class="line">    print(count)</span><br><span class="line">    count+=<span class="number">1</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>当while循环正常执行完并且中间没有被break中止的话，就会执行else后面的语句，所以我们可以<strong>用else来验证，循环是否正常结束</strong></p>
</blockquote>
<h3 id="for循环（取值循环）（循环结构）"><a href="#for循环（取值循环）（循环结构）" class="headerlink" title="for循环（取值循环）（循环结构）"></a>for循环（取值循环）（循环结构）</h3><p>理论上for循环能做的事情，while循环都可以做，之所以要有for循环，是因为for循环在循环取值（遍历取值）比while循环更简洁<br><img src="/2019/05/17/python3.0基础/python3.0基础-20220705-10-57-26.png" alt="for循环"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 可迭代对象可以是：列表、字典、字符串、元组、集合</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">for 变量名 in 可迭代对象:</span></span><br><span class="line"><span class="string">    代码...</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]:</span><br><span class="line">    print(x)</span><br><span class="line"></span><br><span class="line"><span class="comment"># for循环控制循环次数：range()</span></span><br><span class="line">range(<span class="number">10</span>) <span class="comment"># [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]</span></span><br><span class="line">range(<span class="number">1</span>,<span class="number">9</span>,<span class="number">1</span>) <span class="comment"># [1, 2, 3, 4, 5, 6, 7, 8]</span></span><br><span class="line">range(<span class="number">1</span>,<span class="number">9</span>,<span class="number">2</span>) <span class="comment"># [1, 3, 5, 7]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># for循环嵌套:外层循环循环一次，内层循环需要完整的循环完毕</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">3</span>):</span><br><span class="line">    print(<span class="string">'外层循环--&gt;'</span>, i)</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">5</span>):</span><br><span class="line">        print(<span class="string">'内层--&gt;'</span>, j)</span><br></pre></td></tr></table></figure>
<h4 id="结束循环与跳过-1"><a href="#结束循环与跳过-1" class="headerlink" title="结束循环与跳过"></a>结束循环与跳过</h4><ul>
<li><code>break</code>：只要运行到break就会立刻终止本层循环，同while</li>
<li><code>continue</code>：结束本次循环，跳过后续代码，直接进入下一次，同while</li>
</ul>
<blockquote>
<p>终止for循环只有break一种方案</p>
</blockquote>
<h4 id="for循环原理"><a href="#for循环原理" class="headerlink" title="for循环原理"></a>for循环原理</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">goods=[<span class="string">'mac'</span>,<span class="string">'lenovo'</span>,<span class="string">'acer'</span>,<span class="string">'dell'</span>,<span class="string">'sony'</span>]</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> goods:   </span><br><span class="line">    print(item)</span><br></pre></td></tr></table></figure>
<p>for 循环在工作时，首先会调用可迭代对象goods内置的iter方法拿到一个迭代器对象，然后再调用该迭代器对象的next方法将取到的值赋给item,执行循环体完成一次循环，周而复始，直到捕捉StopIteration异常，结束迭代。</p>
<h3 id="for循环与while循环的异同"><a href="#for循环与while循环的异同" class="headerlink" title="for循环与while循环的异同"></a>for循环与while循环的异同</h3><ul>
<li>相同之处：都是循环，for循环可以干的事，while循环也可以干</li>
<li>不同之处：while循环称之为条件循环，循环次数取决于条件何时变为假，for循环称之为”取值循环”，循环次数取决in后包含的值的个数</li>
</ul>
<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><p><img src="/2019/05/17/python3.0基础/python3.0基础-20220816-10-14-25.png" alt="函数的基本使用概览"></p>
<h3 id="定义函数发生的事情"><a href="#定义函数发生的事情" class="headerlink" title="定义函数发生的事情"></a>定义函数发生的事情</h3><p>1.申请内存空间保存函数体代码<br>2.将上述内存地址绑定函数名</p>
<blockquote>
<p>定义函数不会执行函数体代码，但是会检测函数体语法</p>
</blockquote>
<h3 id="调用函数发生的事情"><a href="#调用函数发生的事情" class="headerlink" title="调用函数发生的事情"></a>调用函数发生的事情</h3><p>1.通过函数名找到函数的内存地址<br>2.触发函数体代码的执行</p>
<h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">def 函数名(参数1,参数2,...):</span><br><span class="line">    &quot;&quot;&quot;文档描述&quot;&quot;&quot;</span><br><span class="line">    函数体</span><br><span class="line">    return 值</span><br></pre></td></tr></table></figure>
<ul>
<li><code>def</code>: 定义函数的关键字；</li>
<li>函数名：函数名指向函数内存地址，是对函数体代码的引用。函数的命名应该反映出函数的功能；</li>
<li>括号：括号内定义参数，参数是可有可无的，且无需指定参数的类型；</li>
<li>冒号：括号后要加冒号，然后在下一行开始缩进编写函数体的代码；</li>
<li>文档描述: 描述函数功能，参数介绍等信息的文档，非必要，但是建议加上，从而增强函数的可读性；<ul>
<li><code>help(函数名)</code>：可以查看函数的文档描述</li>
</ul>
</li>
<li>函数体：由语句和表达式组成；为<code>pass</code>时代表什么也不做，这种函数称为空函数</li>
<li>return 值：定义函数的返回值，return是可有可无的。默认返回None，返回多个返回值会放到一个元组内，<code>return x,y,z</code>等同于<code>return (x,y,z)</code></li>
</ul>
<blockquote>
<ul>
<li>定义空函数通常是有用的，因为在程序设计的开始，往往是先想好程序都需要完成什么功能，然后把所有功能都列举出来用pass充当函数体“占位符”，这将使得程序的体系结构立见，清晰且可读性强，如编写ftp程序，功能有用户认证，下载，上传，浏览，切换目录等，可以先做出如下定义：</li>
</ul>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">auth_user</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="string">"""user authentication function"""</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">download_file</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="string">"""download file function"""</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">upload_file</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="string">"""upload file function"""</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">ls</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="string">"""list contents function"""</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">cd</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="string">"""change directory"""</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li>函数的使用分为定义阶段与调用阶段，<strong>定义函数时只检测语法，不执行函数体代码（变量未定义等错误不会报错）</strong>，函数名加括号即函数调用，只有调用函数时才会执行函数体代码</li>
</ul>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#定义阶段</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'in the foo'</span>)</span><br><span class="line">    bar()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bar</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'in the bar'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#调用阶段</span></span><br><span class="line">foo()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义阶段函数foo与bar均无语法错误，而在调用阶段调用foo()时，函数foo与bar都早已经存在于内存中了，所以不会有任何问题。</span></span><br></pre></td></tr></table></figure>
<h3 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h3><p><img src="/2019/05/17/python3.0基础/python3.0基础-20220816-10-15-06.png" alt="参数概览"></p>
<ul>
<li>形参：在定义函数时，括号内声明的参数。形参本质就是一个变量名，用来接收外部传来的值。<ul>
<li>位置形参：在定义函数时，按照从左到右的顺序依次定义形参，<strong>凡是按照这种形式定义的形参都必须被传值</strong></li>
<li>默认参数：在定义函数时，就已经为形参赋值。调用时可以不传值，<strong>默认参数必须在位置参数之后，值通常应设为不可变类型</strong></li>
<li>可变长度的参数: 在调用函数时，实参的个数可以不固定，不能设置默认值<ul>
<li><code>*形参名</code>：在形参名前加<code>*</code>号,那么在调用函数时，<strong>溢出的位置实参</strong>，都会被接收，<strong>以元组的形式</strong>保存下来赋值给该形参</li>
<li><code>**形参名</code>：在形参名前加<code>**</code>号,那么在调用函数时，<strong>溢出的关键字参数</strong>，都会被接收，<strong>以字典的形式</strong>保存下来赋值给该形参</li>
</ul>
</li>
<li>命名关键字参数：在能够以位置实参传值的形参(即位置形参和<code>*</code>可变长度参数)之后，在<code>**</code>可变长度参数之前定义的参数。在函数调用时，限定调用者必须以key=value的形式传值，可以设置默认值</li>
</ul>
</li>
<li>实参：在调用函数时，括号内传入的值，值可以是常量、变量、表达式或三者的组合<ul>
<li>位置实参：在调用函数时，按照从左到右的顺序依次定义实参，凡是按照这种形式定义的实参会按照从左到右的顺序与形参一一对应</li>
<li>关键字参数：在调用函数时，实参可以是key=value的形式，凡是按照这种形式定义的实参，可以完全不按照从左到右的顺序定义</li>
<li><code>*可迭代对象类型数据</code>：将各元素转为<strong>位置实参</strong></li>
<li><code>**可迭代对象类型数据</code>：将各键值对转为<strong>关键字参数</strong></li>
</ul>
</li>
</ul>
<blockquote>
<ul>
<li>实参可以是按位置或按关键字的混合使用，但必须保证<strong>关键字参数在位置参数后面，且不可以对一个形参重复赋值</strong></li>
<li><strong>形参定义顺序: 位置参数、默认参数、*可变长度参数、命名关键字参数、**可变长度参数</strong></li>
</ul>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义位置形参：name，age，sex，三者都必须被传值</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">register</span><span class="params">(name,age,sex)</span>:</span></span><br><span class="line">    print(<span class="string">'Name:%s Age:%s Sex:%s'</span> %(name,age,sex))</span><br><span class="line"><span class="comment"># 不传值报错</span></span><br><span class="line">register() <span class="comment"># TypeError：缺少3个位置参数</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 关键字参数</span></span><br><span class="line">register(sex=<span class="string">'male'</span>,name=<span class="string">'lili'</span>,age=<span class="number">18</span>) <span class="comment"># Name:lili Age:18 Sex:male</span></span><br><span class="line"><span class="comment"># 位置实参和关键字参数的混合使用</span></span><br><span class="line">register(<span class="string">'lili'</span>,sex=<span class="string">'male'</span>,age=<span class="number">18</span>) <span class="comment"># Name:lili Age:18 Sex:male</span></span><br><span class="line">register(name=<span class="string">'lili'</span>,<span class="number">18</span>,sex=<span class="string">'male'</span>) <span class="comment"># SyntaxError：关键字参数name=‘lili’在位置参数18之前</span></span><br><span class="line">register(<span class="string">'lili'</span>,sex=<span class="string">'male'</span>,age=<span class="number">18</span>,name=<span class="string">'jack'</span>) <span class="comment"># TypeError：形参name被重复赋值</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 默认参数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">register</span><span class="params">(name,age,sex=<span class="string">'male'</span>)</span>:</span> <span class="comment"># 默认sex的值为male</span></span><br><span class="line">    print(<span class="string">'Name:%s Age:%s Sex:%s'</span> %(name,age,sex))</span><br><span class="line"><span class="comment"># 大多数情况,无需为sex传值,默认为male</span></span><br><span class="line">register(<span class="string">'tom'</span>,<span class="number">17</span>)</span><br><span class="line"><span class="comment"># 少数情况,可以为sex传值female</span></span><br><span class="line">register(<span class="string">'Lili'</span>,<span class="number">18</span>,<span class="string">'female'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 可变长度的参数 *</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(x,y,z=<span class="number">1</span>,*args)</span>:</span> <span class="comment">#在最后一个形参名args前加*号</span></span><br><span class="line">    print(x)</span><br><span class="line">    print(y)</span><br><span class="line">    print(z)</span><br><span class="line">    print(args)</span><br><span class="line"></span><br><span class="line">foo(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>)</span><br><span class="line"><span class="comment"># *L就相当于位置参数3，4，5, foo(1,2,*L)就等同于foo(1,2,3,4,5)</span></span><br><span class="line">L=[<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line">foo(<span class="number">1</span>,<span class="number">2</span>,*L) </span><br><span class="line"><span class="comment"># 1</span></span><br><span class="line"><span class="comment"># 2</span></span><br><span class="line"><span class="comment"># 3</span></span><br><span class="line"><span class="comment"># (4, 5, 6, 7)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 可变长度的参数 **</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(x,**kwargs)</span>:</span> <span class="comment">#在最后一个参数kwargs前加**</span></span><br><span class="line">    print(x)        </span><br><span class="line">    print(kwargs) </span><br><span class="line">foo(y=<span class="number">2</span>,x=<span class="number">1</span>,z=<span class="number">3</span>)</span><br><span class="line"><span class="comment"># 1</span></span><br><span class="line"><span class="comment"># &#123;'z': 3, 'y': 2&#125;</span></span><br><span class="line"><span class="comment"># **dic就相当于关键字参数a=1，b=2，foo(1,2,**dic)等同foo(1,2,a=1,b=2)</span></span><br><span class="line">dic=&#123;<span class="string">'a'</span>:<span class="number">1</span>,<span class="string">'b'</span>:<span class="number">2</span>&#125;</span><br><span class="line">foo(<span class="number">1</span>,c=<span class="number">2</span>,**dic)</span><br><span class="line"><span class="comment"># 1</span></span><br><span class="line"><span class="comment"># &#123;'c': 2, 'a': 1, 'b': 2&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="名称空间"><a href="#名称空间" class="headerlink" title="名称空间"></a>名称空间</h3><p><img src="/2019/05/17/python3.0基础/python3.0基础-20220816-10-16-37.png" alt="名称空间和作用域概览"></p>
<p>名称空间即存放名字与对象映射/绑定关系的地方。对于<code>x=3</code>，Python会申请内存空间存放对象3，然后将名字x与3的绑定关系存放于名称空间中，<code>del x</code>表示清除该绑定关系。</p>
<ul>
<li>内建名称空间：伴随python解释器的启动/关闭而产生/回收，用来存放一些内置的名字，比如内建函数名</li>
<li>全局名称空间：伴随python文件的开始执行/执行完毕而产生/回收，文件执行过程中产生的名字都会存放于该名称空间中</li>
<li>局部名称空间：伴随函数的调用/结束而临时产生/回收，函数的形参、函数内定义的名字都会被存放于该名称空间中</li>
</ul>
<blockquote>
<ul>
<li>名称空间的加载顺序：内置名称空间&gt;全局名称空间&gt;局部名称空间</li>
<li>名称空间的销毁顺序：局部名称空间&gt;全局名空间&gt;内置名称空间</li>
<li>名字的查找优先级：当前所在的位置向上一层一层查找，局部名称空间(嵌套定义中由内而外一层层查找)&gt;全局名称空间&gt;内置名称空间，最终没有找到就会抛出异常</li>
<li><strong>名称空间的”嵌套”关系是以函数定义阶段为准，与调用位置无关</strong></li>
</ul>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">x=<span class="number">1</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">outer</span><span class="params">()</span>:</span></span><br><span class="line">    x=<span class="number">2</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inner</span><span class="params">()</span>:</span> <span class="comment"># 函数名inner属于outer这一层作用域的名字</span></span><br><span class="line">        x=<span class="number">3</span></span><br><span class="line">        print(<span class="string">'inner x:%s'</span> %x)</span><br><span class="line"></span><br><span class="line">    inner()</span><br><span class="line">    print(<span class="string">'outer x:%s'</span> %x)</span><br><span class="line"></span><br><span class="line">outer() </span><br><span class="line"><span class="comment">#结果为</span></span><br><span class="line"><span class="comment"># inner x:3</span></span><br><span class="line"><span class="comment"># outer x:2</span></span><br></pre></td></tr></table></figure>
<h3 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h3><ul>
<li>全局作用域：位于<strong>全局名称空间、内建名称空间</strong>中的名字属于全局范围，该范围内的名字<strong>全局存活</strong>（除非被删除，否则在整个文件执行过程中存活）、<strong>全局有效</strong>（在任意位置都可以使用）<ul>
<li>在全局作用域调用<code>locals()</code>或者<code>globals()</code>，查看全局作用域名字，返回字典类型，两个内建函数结果相同</li>
</ul>
</li>
<li>局部作用域：位于<strong>局部名称空间</strong>中的名字属于局部范围。该范围内的名字<strong>临时存活</strong>（即在函数调用时临时生成，函数调用结束后就释放）、<strong>局部有效</strong>（只能在函数内使用）。<ul>
<li>在局部作用域调用<code>locals()</code>，查看局部作用域名字，返回字典类型</li>
<li>在局部作用域调用<code>globals()</code>，查看全局作用域名字，返回字典类型</li>
</ul>
</li>
</ul>
<h4 id="修改上级作用域的名字的值"><a href="#修改上级作用域的名字的值" class="headerlink" title="修改上级作用域的名字的值"></a>修改上级作用域的名字的值</h4><ul>
<li><code>global</code>：在函数内，无论嵌套多少层，都可以查看到全局作用域的名字<ul>
<li>若要在函数内修改全局名称空间中名字的值，则需要用到global关键字</li>
</ul>
</li>
<li><code>nonlocal</code>：对于嵌套多层的函数，可以查看到外部嵌套函数定义的作用域的名字(<strong>非全局作用域的</strong>)<ul>
<li>使用nonlocal关键字可以将名字声明为来自外部嵌套函数定义的作用域</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># global</span></span><br><span class="line">x=<span class="number">1</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">global</span> x <span class="comment"># 声明x为全局名称空间的名字</span></span><br><span class="line">    x=<span class="number">2</span></span><br><span class="line">foo() </span><br><span class="line">print(x) <span class="comment"># 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># nonlocal</span></span><br><span class="line"><span class="function"><span class="keyword">def</span>  <span class="title">f1</span><span class="params">()</span>:</span></span><br><span class="line">    x=<span class="number">2</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">f2</span><span class="params">()</span>:</span></span><br><span class="line">        <span class="keyword">nonlocal</span> x</span><br><span class="line">        x=<span class="number">3</span></span><br><span class="line">    f2() <span class="comment">#调用f2(),修改f1作用域中名字x的值</span></span><br><span class="line">    print(x) <span class="comment">#在f1作用域查看x</span></span><br><span class="line"></span><br><span class="line">f1() <span class="comment"># 3</span></span><br></pre></td></tr></table></figure>
<h3 id="函数对象"><a href="#函数对象" class="headerlink" title="函数对象"></a>函数对象</h3><p><img src="/2019/05/17/python3.0基础/python3.0基础-20220816-10-17-59.png" alt="函数对象与闭包概览"></p>
<p>函数对象指的是函数可以被当做’数据’来处理，具体可以分为四个方面的使用</p>
<ul>
<li>函数可以被引用</li>
<li>函数可以作为容器类型的元素</li>
<li>函数可以作为参数传入另外一个函数</li>
<li>函数的返回值可以是一个函数</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(x,y)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> x+y</span><br><span class="line"><span class="comment"># 函数可以被引用</span></span><br><span class="line">func=add</span><br><span class="line">func(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 函数可以作为容器类型的元素</span></span><br><span class="line">dic=&#123;<span class="string">'add'</span>:add,<span class="string">'max'</span>:max&#125;</span><br><span class="line">print(dic) <span class="comment"># &#123;'add': &lt;function add at 0x100661e18&gt;, 'max': &lt;built-in function max&gt;&#125;</span></span><br><span class="line">dic[<span class="string">'add'</span>](<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 函数可以作为参数传入另外一个函数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(x,y,func)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> func(x,y)</span><br><span class="line">foo(<span class="number">1</span>,<span class="number">2</span>,add)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 函数的返回值可以是一个函数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bar</span><span class="params">()</span>:</span> </span><br><span class="line">     <span class="keyword">return</span> add </span><br><span class="line">func=bar() </span><br><span class="line">func(<span class="number">1</span>,<span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<h3 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h3><p>基于函数对象的概念，可以将函数返回到任意位置去调用，但作用域的关系是在定义完函数时就已经被确定了的，与函数的调用位置无关。函数被当做数据处理时，始终以自带的作用域为准。若内嵌函数包含对外部函数作用域（而非全局作用域）中变量的引用，那么该’内嵌函数’就是闭包函数，简称闭包(Closures)</p>
<ul>
<li>“闭”函数指的该函数是内嵌函数</li>
<li>“包”函数指的该函数包含对外层函数作用域名字的引用（不是对全局作用域）</li>
</ul>
<blockquote>
<p>可以通过函数的<code>closure</code>属性，查看到闭包函数所包裹的外部变量</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">x=<span class="number">1</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">outer</span><span class="params">()</span>:</span></span><br><span class="line">    x=<span class="number">2</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inner</span><span class="params">()</span>:</span></span><br><span class="line">        print(x)</span><br><span class="line">    <span class="keyword">return</span> inner</span><br><span class="line">func=outer()</span><br><span class="line">func() <span class="comment"># 结果为2</span></span><br><span class="line">func.__closure__</span><br><span class="line"><span class="comment"># (&lt;cell at 0x10212af78: int object at 0x10028cca0&gt;,)</span></span><br><span class="line">func.__closure__[<span class="number">0</span>].cell_contents</span><br><span class="line"><span class="comment"># 2</span></span><br></pre></td></tr></table></figure>
<h2 id="匿名函数"><a href="#匿名函数" class="headerlink" title="匿名函数"></a>匿名函数</h2><p><code>lambda 参数1,参数2,...: expression</code>，匿名函数与有名函数有相同的作用域，但是匿名意味着引用计数为0，使用一次就释放，所以匿名函数用于临时使用一次的场景，匿名函数通常与其他函数配合使用</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">res=(<span class="keyword">lambda</span> x,y,z:x+y+z)(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># “匿名”的本质就是要没有名字，所以此处为匿名函数指定名字是没有意义的</span></span><br><span class="line">func=<span class="keyword">lambda</span> x,y,z:x+y+z </span><br><span class="line">res=func(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br></pre></td></tr></table></figure>
<h2 id="装饰器"><a href="#装饰器" class="headerlink" title="装饰器"></a>装饰器</h2><p><img src="/2019/05/17/python3.0基础/python3.0基础-20220816-10-18-54.png" alt="装饰器概览"></p>
<p>类似同ES6，本质高阶函数。在不修改被装饰对象源代码和调用方式的前提下为被装饰对象添加额外的功能。可调用对象有函数，方法或者类</p>
<h3 id="无参装饰器"><a href="#无参装饰器" class="headerlink" title="无参装饰器"></a>无参装饰器</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@deco3</span></span><br><span class="line"><span class="meta">@deco2</span></span><br><span class="line"><span class="meta">@deco1</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 等同于</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line">index=deco3(deco2(deco1(index)))</span><br></pre></td></tr></table></figure>
<h3 id="有参装饰器"><a href="#有参装饰器" class="headerlink" title="有参装饰器"></a>有参装饰器</h3><p>本质，高阶函数，接收需要的参数，return无参装饰器</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">auth</span><span class="params">(driver)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">deco</span><span class="params">(func)</span>:</span></span><br><span class="line">        ……</span><br><span class="line">    <span class="keyword">return</span> deco</span><br><span class="line"><span class="comment"># 先调用auth(driver='file')，得到@deco，deco是一个闭包函数，包含了对外部作用域名字driver的引用，@deco的语法意义与无参装饰器一样</span></span><br><span class="line"><span class="meta">@auth(driver='file') </span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span><span class="params">()</span>:</span>     </span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="meta">@auth(driver='mysql') </span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">home</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<h3 id="wraps"><a href="#wraps" class="headerlink" title="@wraps"></a>@wraps</h3><p><code>@wraps</code>：在装饰器内部使用，保证被装饰之后的函数，name和doc属性与原函数一直，如通过<code>help(函数名)</code>查看函数文档注释时，不会报错</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> wraps</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">timer</span><span class="params">(func)</span>:</span></span><br><span class="line"><span class="meta">    @wraps(func)</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span><span class="params">(*args,**kwargs)</span>:</span></span><br><span class="line">        start_time=time.time()</span><br><span class="line">        res=func(*args,**kwargs)</span><br><span class="line">        stop_time=time.time()</span><br><span class="line">        print(<span class="string">'run time is %s'</span> %(stop_time-start_time))</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br></pre></td></tr></table></figure>
<h2 id="迭代器"><a href="#迭代器" class="headerlink" title="迭代器"></a>迭代器</h2><p><img src="/2019/05/17/python3.0基础/python3.0基础-20220816-10-20-02.png" alt="迭代器概览"></p>
<p>迭代器即用来迭代取值的工具，而迭代是重复反馈过程的活动，其目的通常是为了逼近所需的目标或结果，每一次对过程的重复称为一次“迭代”，而每一次迭代得到的结果会作为下一次迭代的初始值,单纯的重复并不是迭代</p>
<ul>
<li>优点<ul>
<li>为序列和非序列类型提供了一种统一的迭代取值方式。</li>
<li>惰性计算：迭代器对象表示的是一个数据流，可以只在需要时才去调用next来计算出一个值，就迭代器本身来说，同一时刻在内存中只有一个值，因而可以存放无限大的数据流，而对于其他容器类型，如列表，需要把所有的元素都存放于内存中，受内存大小的限制，可以存放的值的个数是有限的。</li>
</ul>
</li>
<li>缺点<ul>
<li>除非取尽，否则无法获取迭代器的长度</li>
<li>只能取下一个值，不能回到开始，更像是‘一次性的’，迭代器产生后的唯一目标就是重复执行next方法直到值取尽，否则就会停留在某个位置，等待下一次调用next；若是要再次迭代同个对象，你只能重新调用iter方法去创建一个新的迭代器对象，如果有两个或者多个循环使用同一个迭代器，必然只会有一个循环能取到值</li>
</ul>
</li>
</ul>
<h3 id="可迭代对象-1"><a href="#可迭代对象-1" class="headerlink" title="可迭代对象"></a>可迭代对象</h3><p>从语法形式上讲，内置有<code>__iter__</code>方法的对象都是可迭代对象，字符串、列表、元组、字典、集合、打开的文件都是可迭代对象</p>
<h3 id="迭代器对象"><a href="#迭代器对象" class="headerlink" title="迭代器对象"></a>迭代器对象</h3><p>迭代器对象是内置有<code>iter</code>和<code>next</code>方法的对象，打开的文件本身就是一个迭代器对象，执行迭代器对象.iter()方法得到的仍然是迭代器本身，而执行迭代器.next()方法就会计算出迭代器中的下一个值。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 可迭代对象s</span></span><br><span class="line">s=&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;</span><br><span class="line"><span class="comment"># 本质就是在调用s.__iter__(),返回s的迭代器对象i，</span></span><br><span class="line">i=iter(s)  </span><br><span class="line"><span class="comment"># 本质就是在调用i.__next__()</span></span><br><span class="line">next(i) <span class="comment"># 1</span></span><br><span class="line">next(i) <span class="comment"># 2</span></span><br><span class="line">next(i) <span class="comment"># 3</span></span><br><span class="line">next(i) <span class="comment"># 抛出StopIteration的异常，代表无值可取，</span></span><br></pre></td></tr></table></figure>
<h2 id="生成器"><a href="#生成器" class="headerlink" title="生成器"></a>生成器</h2><p><img src="/2019/05/17/python3.0基础/python3.0基础-20220816-10-22-28.png" alt="生成器概览"></p>
<p>若函数体包含<code>yield</code>关键字，再调用函数，并不会执行函数体代码，得到的返回值即生成器对象(生成器内置有<strong>iter</strong>和<strong>next</strong>方法，所以生成器本身就是一个迭代器)，不同于return，函数一旦遇到return就结束了，而yield可以保存函数的运行状态挂起函数，将yield后的值，当做本次调用的结果返回，可以返回多次值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">eater</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'Ready to eat'</span>)</span><br><span class="line">    <span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">        food=<span class="keyword">yield</span></span><br><span class="line">        print(<span class="string">'get the food: %s, and start to eat'</span> %food)</span><br><span class="line">g=eater() <span class="comment"># 得到生成器对象</span></span><br><span class="line">print(g) <span class="comment"># &lt;generator object eater at 0x101b6e2b0&gt;</span></span><br><span class="line"><span class="comment"># 需要事先”初始化”一次，让函数挂起在food=yield，等待调用g.send()方法为其传值</span></span><br><span class="line">next(e) <span class="comment"># Ready to eat</span></span><br><span class="line">g.send(<span class="string">'包子'</span>) <span class="comment"># get the food: 包子, and start to eat</span></span><br><span class="line">g.send(<span class="string">'鸡腿'</span>) <span class="comment"># get the food: 鸡腿, and start to eat</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>next(g)</code>d等同于<code>g.send(None)</code></p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">eater</span><span class="params">()</span>:</span></span><br><span class="line"><span class="meta">... </span>    print(<span class="string">'Ready to eat'</span>)</span><br><span class="line"><span class="meta">... </span>    food_list=[]</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line"><span class="meta">... </span>        food=<span class="keyword">yield</span> food_list</span><br><span class="line"><span class="meta">... </span>        food_list.append(food)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>e=eater()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>next(e)</span><br><span class="line">Ready to eat</span><br><span class="line">[]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>e.send(<span class="string">'蒸羊羔'</span>)</span><br><span class="line">[<span class="string">'蒸羊羔'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>e.send(<span class="string">'蒸熊掌'</span>)</span><br><span class="line">[<span class="string">'蒸羊羔'</span>, <span class="string">'蒸熊掌'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>e.send(<span class="string">'蒸鹿尾儿'</span>)</span><br><span class="line">[<span class="string">'蒸羊羔'</span>, <span class="string">'蒸熊掌'</span>, <span class="string">'蒸鹿尾儿'</span>]</span><br></pre></td></tr></table></figure>
<blockquote>
<p>表达式形式的yield也可以用于返回多次值，即<code>变量名=yield 值</code>的形式</p>
</blockquote>
<h2 id="表达式"><a href="#表达式" class="headerlink" title="表达式"></a>表达式</h2><h3 id="三元表达式"><a href="#三元表达式" class="headerlink" title="三元表达式"></a>三元表达式</h3><p><code>条件成立时返回的值 if 条件 else 条件不成立时返回的值</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">max2</span><span class="params">(x,y)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> x &gt; y:</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> y</span><br><span class="line"></span><br><span class="line">res = max2(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 三元表达式</span></span><br><span class="line">x=<span class="number">1</span></span><br><span class="line">y=<span class="number">2</span></span><br><span class="line">res = x <span class="keyword">if</span> x &gt; y <span class="keyword">else</span> y</span><br></pre></td></tr></table></figure>
<h3 id="生成式"><a href="#生成式" class="headerlink" title="生成式"></a>生成式</h3><h4 id="列表生成式"><a href="#列表生成式" class="headerlink" title="列表生成式"></a>列表生成式</h4><p><code>[expression for item in iterable if condition]</code>，返回的是一个列表</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">egg_list=[]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">    egg_list.append(<span class="string">'鸡蛋%s'</span> %i)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 列表生成式</span></span><br><span class="line">egg_list=[<span class="string">'鸡蛋%s'</span> %i <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>)]</span><br></pre></td></tr></table></figure>
<h4 id="字典生成式"><a href="#字典生成式" class="headerlink" title="字典生成式"></a>字典生成式</h4><p><code>{key_expression:value_expression for key in iterable if condition}</code>，返回的是一个字典</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">items=[(<span class="string">'name'</span>,<span class="string">'egon'</span>),(<span class="string">'age'</span>,<span class="number">18</span>),(<span class="string">'gender'</span>,<span class="string">'male'</span>)]</span><br><span class="line">res=&#123;k+<span class="string">'1'</span>:str(v)+<span class="string">'2'</span> <span class="keyword">for</span> k,v <span class="keyword">in</span> items <span class="keyword">if</span> k != <span class="string">'gender'</span>&#125;</span><br><span class="line">print(res) <span class="comment"># &#123;'name1': 'egon2', 'age1': '182'&#125;</span></span><br></pre></td></tr></table></figure>
<h4 id="集合生成式"><a href="#集合生成式" class="headerlink" title="集合生成式"></a>集合生成式</h4><p><code>{expression for key in iterable if condition}</code>，返回的是一个集合</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">keys=[<span class="string">'name'</span>,<span class="string">'age'</span>,<span class="string">'gender'</span>]</span><br><span class="line">set1=&#123;key <span class="keyword">for</span> key <span class="keyword">in</span> keys&#125;</span><br><span class="line">print(set1,type(set1))</span><br></pre></td></tr></table></figure>
<h3 id="生成器表达式"><a href="#生成器表达式" class="headerlink" title="生成器表达式"></a>生成器表达式</h3><p><code>（expression for item in iterable if condition）</code>，返回的是一个生成器对象</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> open(<span class="string">'db.txt'</span>,<span class="string">'rb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    nums=(len(line) <span class="keyword">for</span> line <span class="keyword">in</span> f)</span><br><span class="line">    total_size=sum(nums) <span class="comment"># 依次执行next(nums)，然后累加到一起得到结果=</span></span><br></pre></td></tr></table></figure>
<h3 id="eval-amp-exec"><a href="#eval-amp-exec" class="headerlink" title="eval&amp;exec"></a><code>eval</code>&amp;<code>exec</code></h3><ul>
<li><code>eval</code>：eval用来执行表达式，并返回表达式执行的结果，<strong>不能执行语句</strong></li>
<li><code>exec(str,g,l)</code>：exec用来执行语句，不会返回任何值，参数如下<ul>
<li><code>str</code>：包含一系列python代码的字符串</li>
<li><code>g</code>：全局作用域（字典形式），如果不指定，默认为globals()</li>
<li><code>l</code>：局部作用域（字典形式），如果不指定，默认为locals()</li>
</ul>
</li>
<li><code>compile(str,filename,kind)</code><ul>
<li>filename：用于追踪str来自于哪个文件，如果不想追踪就可以不定义</li>
<li>kind：<code>&#39;single&#39;</code>代表一条语句，<code>&#39;exec&#39;</code>代表一组语句，<code>&#39;eval&#39;</code>代表一个表达式</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">s=<span class="string">'1+2+3'</span></span><br><span class="line">print(eval(s)) <span class="comment"># 6</span></span><br><span class="line">print(exec(s)) <span class="comment"># None</span></span><br><span class="line"></span><br><span class="line">print(eval(<span class="string">'1+2+x'</span>,&#123;<span class="string">'x'</span>:<span class="number">3</span>&#125;,&#123;<span class="string">'x'</span>:<span class="number">30</span>&#125;)) <span class="comment"># 33</span></span><br><span class="line">print(exec(<span class="string">'1+2+x'</span>,&#123;<span class="string">'x'</span>:<span class="number">3</span>&#125;,&#123;<span class="string">'x'</span>:<span class="number">30</span>&#125;)) <span class="comment"># None</span></span><br><span class="line"></span><br><span class="line">print(eval(<span class="string">'for i in range(10):print(i)'</span>)) <span class="comment"># 报错</span></span><br><span class="line">print(exec(<span class="string">'for i in range(10):print(i)'</span>))</span><br><span class="line"></span><br><span class="line">s=<span class="string">'for i in range(10):print(i)'</span></span><br><span class="line">code=compile(s,<span class="string">''</span>,<span class="string">'exec'</span>)</span><br><span class="line">exec(code)</span><br><span class="line"></span><br><span class="line">s=<span class="string">'1+2+3'</span></span><br><span class="line">code=compile(s,<span class="string">''</span>,<span class="string">'eval'</span>)</span><br><span class="line">eval(code)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">g=&#123;</span><br><span class="line">    <span class="string">'x'</span>:<span class="number">1</span>,</span><br><span class="line">    <span class="string">'y'</span>:<span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line">l=&#123;&#125;</span><br><span class="line">exec(<span class="string">'''</span></span><br><span class="line"><span class="string">global x,z</span></span><br><span class="line"><span class="string">x=100</span></span><br><span class="line"><span class="string">z=200</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">m=300</span></span><br><span class="line"><span class="string">'''</span>,g,l)</span><br><span class="line">print(g) <span class="comment"># &#123;'x': 100, 'y': 2,'z':200,......&#125;</span></span><br><span class="line">print(l) <span class="comment"># &#123;'m': 300&#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="模块"><a href="#模块" class="headerlink" title="模块"></a>模块</h2><p><img src="/2019/05/17/python3.0基础/python3.0基础-20220816-10-31-36.png" alt="模块概览"></p>
<p>一个py文件就是一个模块，文件名为xxx.py模块名则是xxx,导入模块可以引用模块中已经写好的功能。</p>
<p>模块其实分为四个通用类别，分别是：</p>
<ul>
<li>使用纯Python代码编写的py文件</li>
<li>包含一系列模块的包(及文件夹)</li>
<li>使用C编写并链接到Python解释器中的内置模块</li>
<li>使用C或C++编译的扩展模块(共享库或DLL)</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#文件名：foo.py</span></span><br><span class="line">x=<span class="number">1</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">()</span>:</span></span><br><span class="line">    print(x)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">change</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">global</span> x</span><br><span class="line">    x=<span class="number">0</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">(self)</span>:</span></span><br><span class="line">       print(<span class="string">'from the func'</span>)</span><br></pre></td></tr></table></figure>
<p>要想在另外一个py文件中引用foo.py中的功能，需要使用import foo，首次导入模块会做三件事：</p>
<ol>
<li>执行源文件代码</li>
<li>产生一个新的名称空间用于存放源文件执行过程中产生的名字</li>
<li>在当前执行文件所在的名称空间中得到一个名字foo，该名字指向新创建的模块名称空间，若要引用模块名称空间中的名字，需要加上该前缀，如下</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#导入模块foo</span></span><br><span class="line"><span class="keyword">import</span> foo</span><br><span class="line"> <span class="comment">#引用模块foo中变量x的值赋值给当前名称空间中的名字a</span></span><br><span class="line">a=foo.x</span><br><span class="line"><span class="comment">#调用模块foo的get函数</span></span><br><span class="line">foo.get() </span><br><span class="line"><span class="comment">#调用模块foo中的change函数</span></span><br><span class="line">foo.change() </span><br><span class="line"><span class="comment"># 执行foo.get()或foo.change()操作的都是源文件中的全局变量x</span></span><br><span class="line"><span class="comment">#使用模块foo的类Foo来实例化，进一步可以执行obj.func()</span></span><br><span class="line">obj=foo.Foo()</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>第一次导入模块已经将其加载到内存空间了，之后的重复导入会直接引用内存中已存在的模块，不会重复执行文件</strong>，通过<code>import sys</code>，打印<code>sys.modules</code>的值可以看到内存中已经加载的模块名。</p>
</blockquote>
<h3 id="import语法"><a href="#import语法" class="headerlink" title="import语法"></a>import语法</h3><blockquote>
<p><strong>在文件开头导入模块属于全局作用域，在函数内导入的模块则属于局部的作用域。</strong></p>
</blockquote>
<ul>
<li><code>import 模块名</code></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">我们导入的模块中可能包含有python内置的模块、第三方的模块、自定义的模块，为了便于明显地区分它们，我们通常在文件的开头导入模块，并且分类导入，一类模块的导入与另外一类的导入用空行隔开</span></span><br><span class="line"><span class="string">不同类别的导入顺序如</span></span><br><span class="line"><span class="string">1. python内置模块</span></span><br><span class="line"><span class="string">2. 第三方模块</span></span><br><span class="line"><span class="string">3. 程序员自定义模块</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 为导入的模块foo在当前位置起别名f，以后再使用时就用这个别名f</span></span><br><span class="line"><span class="keyword">import</span> foo <span class="keyword">as</span> f</span><br><span class="line">f.x</span><br><span class="line">f.get()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 导入多个模块</span></span><br><span class="line"><span class="comment"># 多行</span></span><br><span class="line"><span class="keyword">import</span> module1</span><br><span class="line"><span class="keyword">import</span> module2</span><br><span class="line"><span class="comment">#    ...</span></span><br><span class="line"><span class="keyword">import</span> moduleN</span><br><span class="line"><span class="comment"># 一行</span></span><br><span class="line"><span class="keyword">import</span> module1,module2,...,moduleN</span><br></pre></td></tr></table></figure>
<ul>
<li><code>from 模块名 import 模块内的具体名字</code><ul>
<li>优点：代码更加简洁</li>
<li>缺点：容易与当前名称空间的名字冲突，后定义的名字会覆盖之前定义的名字。</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#将模块foo中的x和get导入到当前名称空间</span></span><br><span class="line"><span class="keyword">from</span> foo <span class="keyword">import</span> x,get,change </span><br><span class="line"><span class="comment"># 直接使用模块foo中的x赋值给a</span></span><br><span class="line">a=x </span><br><span class="line"><span class="comment"># 直接执行foo中的get函数</span></span><br><span class="line">get() </span><br><span class="line"><span class="comment"># 即便是当前有重名的x，修改的仍然是源文件中的x</span></span><br><span class="line">change() </span><br><span class="line"></span><br><span class="line"><span class="comment">#把foo中所有的名字都导入到当前执行文件的名称空间中，在当前位置直接可以使用这些名字</span></span><br><span class="line"><span class="keyword">from</span> foo <span class="keyword">import</span> *</span><br><span class="line">a=x</span><br><span class="line">get()</span><br><span class="line">change()</span><br><span class="line">obj=Foo()</span><br></pre></td></tr></table></figure>
<p><img src="/2019/05/17/python3.0基础/python3.0基础-20220728-10-11-57.png" alt="两种导入方式"></p>
<blockquote>
<ul>
<li><code>from foo import *</code>只能在模块最顶层使用的方式导入，在函数内则非法</li>
<li>编写者可以在自己的文件中定义<code>__all__</code>变量用来控制<code>*</code>代表的意思，如在foo.py加入<code>__all__=[&#39;x&#39;,&#39;get&#39;]</code>，则<code>change()</code>、<code>Foo()</code>在<code>from foo import *</code>导入时不可用</li>
</ul>
</blockquote>
<h3 id="循环导入问题"><a href="#循环导入问题" class="headerlink" title="循环导入问题"></a>循环导入问题</h3><blockquote>
<p>循环导入问题大多数情况是因为程序设计失误导致，解决方案也只是在烂设计之上的无奈之举，在我们的程序中应该尽量避免出现循环/嵌套导入，如果多个模块确实都需要共享某些数据，可以将共享的数据集中存放到某一个地方，然后进行导入</p>
</blockquote>
<p>指的是在一个模块加载/导入的过程中导入另外一个模块，而在另外一个模块中又返回来导入第一个模块中的名字，由于第一个模块尚未加载完毕，所以引用失败、抛出异常，究其根源就是在python中，同一个模块只会在第一次导入时执行其内部代码，再次导入该模块时，即便是该模块尚未完全加载完毕也不会去重复执行内部代码。比较下列两种情况</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># m1.py</span></span><br><span class="line">print(<span class="string">'正在导入m1'</span>)</span><br><span class="line"><span class="keyword">from</span> m2 <span class="keyword">import</span> y</span><br><span class="line">x=<span class="string">'m1'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># m2.py</span></span><br><span class="line">print(<span class="string">'正在导入m2'</span>)</span><br><span class="line"><span class="keyword">from</span> m1 <span class="keyword">import</span> x</span><br><span class="line">y=<span class="string">'m2</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># run.py</span></span><br><span class="line"><span class="string">import m1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 情况一：执行run.py会抛出异常</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br><span class="line">正在导入m1</span><br><span class="line">正在导入m2</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">".../run.py"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    <span class="keyword">import</span> m1</span><br><span class="line">  File <span class="string">".../m1.py"</span>, line <span class="number">2</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    <span class="keyword">from</span> m2 <span class="keyword">import</span> y</span><br><span class="line">  File <span class="string">".../m2.py"</span>, line <span class="number">2</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    <span class="keyword">from</span> m1 <span class="keyword">import</span> x</span><br><span class="line">ImportError: cannot <span class="keyword">import</span> name <span class="string">'x'</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">分析</span><br><span class="line">---&gt;先执行run.py</span><br><span class="line">---&gt;执行import m1，开始导入m1并运行其内部代码</span><br><span class="line">---&gt;打印内容"正在导入m1"</span><br><span class="line">---&gt;执行from m2 import y 开始导入m2并运行其内部代码</span><br><span class="line">---&gt;打印内容“正在导入m2”</span><br><span class="line">---&gt;执行from m1 import x,由于m1已经被导入过了，所以不会重新导入，所以直接去m1中拿x，然而x此时并没有存在于m1中，所以报错</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 情况二：直接执行m1.py也会抛出异常，但打印结果不一样</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">正在导入m1</span><br><span class="line">正在导入m2</span><br><span class="line">正在导入m1</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">".../m1.py"</span>, line <span class="number">2</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    <span class="keyword">from</span> m2 <span class="keyword">import</span> y</span><br><span class="line">  File <span class="string">".../m2.py"</span>, line <span class="number">2</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    <span class="keyword">from</span> m1 <span class="keyword">import</span> x</span><br><span class="line">  File <span class="string">".../m1.py"</span>, line <span class="number">2</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    <span class="keyword">from</span> m2 <span class="keyword">import</span> y</span><br><span class="line">ImportError: cannot <span class="keyword">import</span> name <span class="string">'y'</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">分析：执行m1.py不等于导入了m1模块</span><br><span class="line">---&gt;执行m1.py</span><br><span class="line">---&gt;打印“正在导入m1”</span><br><span class="line">---&gt;执行from m2 import y </span><br><span class="line">---&gt;导入m2进而执行m2.py内部代码</span><br><span class="line">---&gt;打印"正在导入m2"</span><br><span class="line">---&gt;执行from m1 import x，此时m1是第一次被导入，执行m1.py并不等于导入了m1，于是开始导入m1并执行其内部代码</span><br><span class="line">---&gt;打印"正在导入m1"</span><br><span class="line">---&gt;执行from m2 import y，由于m2已经被导入过了，所以无需继续导入而直接问m2要y，然而y此时并没有存在于m2中所以报错</span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<h4 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 方法一：导入语句放到最后，保证在导入时，所有名字都已经加载过</span></span><br><span class="line"><span class="comment"># 文件：m1.py</span></span><br><span class="line">print(<span class="string">'正在导入m1'</span>)</span><br><span class="line">x=<span class="string">'m1'</span></span><br><span class="line"><span class="keyword">from</span> m2 <span class="keyword">import</span> y</span><br><span class="line"></span><br><span class="line"><span class="comment"># 文件：m2.py</span></span><br><span class="line">print(<span class="string">'正在导入m2'</span>)</span><br><span class="line">y=<span class="string">'m2'</span></span><br><span class="line"><span class="keyword">from</span> m1 <span class="keyword">import</span> x</span><br><span class="line"></span><br><span class="line"><span class="comment"># 文件：run.py内容如下，执行该文件，可以正常使用</span></span><br><span class="line"><span class="keyword">import</span> m1</span><br><span class="line">print(m1.x)</span><br><span class="line">print(m1.y)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法二：导入语句放到函数中，只有在调用函数时才会执行其内部代码</span></span><br><span class="line"><span class="comment"># 文件：m1.py</span></span><br><span class="line">print(<span class="string">'正在导入m1'</span>)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f1</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">from</span> m2 <span class="keyword">import</span> y</span><br><span class="line">    print(x,y)</span><br><span class="line">x = <span class="string">'m1'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 文件：m2.py</span></span><br><span class="line">print(<span class="string">'正在导入m2'</span>)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f2</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">from</span> m1 <span class="keyword">import</span> x</span><br><span class="line">    print(x,y)</span><br><span class="line">y = <span class="string">'m2'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 文件：run.py内容如下，执行该文件，可以正常使用</span></span><br><span class="line"><span class="keyword">import</span> m1</span><br><span class="line">m1.f1()</span><br></pre></td></tr></table></figure>
<h3 id="搜索模块的路径与优先级"><a href="#搜索模块的路径与优先级" class="headerlink" title="搜索模块的路径与优先级"></a>搜索模块的路径与优先级</h3><p>搜索模块优先级：内存中已加载的模块&gt;内置模块&gt;sys.path中定义的路径(列表类型，按索引查找，直到找模块对应的文件为止)，都没找到则抛出异常。(内存&gt;硬盘)</p>
<blockquote>
<ul>
<li><code>sys.modules</code>：查看已经加载到内存中的模块</li>
<li>Python支持从一个压缩文件中导入模块</li>
</ul>
</blockquote>
<p>被导入的模块与执行文件在不同级目录下，为了确保模块对应的源文件仍可以被找到，需要将源文件所在的路径添加到sys.path中</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 假设源文件foo.py所在的路径为/pythoner/projects/</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="comment"># 也可以使用sys.path.insert(……)</span></span><br><span class="line">sys.path.append(<span class="string">r'/pythoner/projects/'</span>) </span><br><span class="line"><span class="comment"># 无论foo.py在何处,我们都可以导入它了</span></span><br><span class="line"><span class="keyword">import</span> foo</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>环境变量是以执行文件为准备的，所有的被导入的模块或者说后续的其他文件引用的<code>sys.path</code>都是参照执行文件的sys.path</strong></p>
</blockquote>
<h3 id="区分py文件的两种用途"><a href="#区分py文件的两种用途" class="headerlink" title="区分py文件的两种用途"></a>区分py文件的两种用途</h3><p>一个python文件有两种用途：</p>
<ul>
<li>被当成程序运行</li>
<li>被当做模块导入</li>
</ul>
<blockquote>
<p>区别：在py文件被当做脚本执行时，<code>__name__</code>变量被赋值为<code>&quot;__main__&quot;</code>。在py文件被当做模块导入时，<code>__name__</code>变量被赋值为模块名</p>
</blockquote>
<h3 id="内置模块"><a href="#内置模块" class="headerlink" title="内置模块"></a>内置模块</h3><h4 id="time-时间模块"><a href="#time-时间模块" class="headerlink" title="time(时间模块)"></a><code>time</code>(时间模块)</h4><h5 id="时间的三种模式"><a href="#时间的三种模式" class="headerlink" title="时间的三种模式"></a>时间的三种模式</h5><ul>
<li>时间戳：从1970年1月1日00:00:00到现在经历过的秒数<ul>
<li><code>time.time()</code>：返回的是float类型</li>
</ul>
</li>
<li><p>按某种格式显示的时间</p>
<ul>
<li><code>time.strftime(&#39;%Y-%m-%d %H:%M:%S %p&#39;)</code></li>
<li><code>time.strftime(&#39;%Y-%m-%d %H:%M:%S %X&#39;)</code></li>
<li>时间格式<br>|格式 | 含义 | 取值范围（格式）|<br>|:–:|:—–|:—–|<br>|%y|去掉世纪的年份|00-99，如”15”|<br>|%Y|完整的年份|如”2015”|<br>|%j|指定日期是一年中的第几天|001-366|<br>|%m|返回月份|01-12|<br>|%b|本地简化月份的名称|简写英文月份|<br>|%B|本地完整月份的名称|完整英文月份|<br>|%d|该月的第几日|如5月1日返回”01”|<br>|%H|该日的第几时（24小时制）|00-23|<br>|%l|该日的第几时（12小时制）|01-12|<br>|%M|分钟|00-59|<br>|%S|秒|00-59|<br>|%U|在该年中的第多少星期（以周日为一周起点）|00-53|<br>|%W|同上，只不过是以周一为起点|00-53|<br>|%w|一星期中的第几天|0-6|<br>|%Z|时区|在中国大陆测试，返回CST，即China Standard Time|<br>|%x|日期|日/月/年|<br>|%X|时间|时:分:秒|<br>|%c|详细日期时间|日/月/年 时:分:秒|<br>|%%|‘%’字符|‘%’字符|<br>|%p|上下午|AM or PM|</li>
</ul>
</li>
<li><p>结构化的时间：struct_time元组共有9个元素:(年，月，日，时，分，秒，一年中第几周，一年中第几天，夏令时)</p>
<ul>
<li><code>time.localtime()</code>：本地时区的struct_time</li>
<li><code>time.gmtime()</code>：UTC时区的struct_time</li>
</ul>
</li>
</ul>
<h5 id="三种时间模式转换"><a href="#三种时间模式转换" class="headerlink" title="三种时间模式转换"></a>三种时间模式转换</h5><p><img src="/2019/05/17/python3.0基础/python3.0基础-20220807-14-24-06.png" alt="三种时间模式转换"><br><img src="/2019/05/17/python3.0基础/python3.0基础-20220807-15-51-07.png" alt="其他转换"></p>
<ul>
<li><code>localtime</code>：将一个时间戳转换为当前时区的struct_time，不传参默认当前时间的时间戳</li>
<li><code>gmtime</code>：类似<code>localtime</code>，将一个时间戳转换为UTC时区（0时区）的struct_time</li>
<li><code>mktime</code>：将一个struct_time转化为时间戳</li>
<li><code>strftime</code>：把一个代表时间的元组或者struct_time转化为格式化的时间字符串<ul>
<li>第一个参数为时间格式字符串</li>
<li>第二个参数不传参默认为<code>time.localtime()</code>，元组中任何一个元素越界，ValueError的错误将会被抛出。</li>
</ul>
</li>
<li><code>strptime</code>：把一个格式化时间字符串转化为struct_time，是<code>strftime</code>的逆操作<ul>
<li>第一个参数为格式化时间字符串</li>
<li>第二个参数为时间格式字符串，默认为<code>&#39;%a %b %d %H:%M:%S %Y&#39;</code></li>
</ul>
</li>
<li><code>asctime</code>：把一个表示时间的元组或者struct_time表示为<code>&#39;%a %b %d %H:%M:%S %Y&#39;</code>形式</li>
<li><code>ctime([secs])</code>：把一个时间戳（按秒计算的浮点数）转化为<code>&#39;%a %b %d %H:%M:%S %Y&#39;</code>形式</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="comment"># localtime([secs])</span></span><br><span class="line">time.localtime() <span class="comment"># time.struct_time(tm_year=2022, tm_mon=8, tm_mday=7, tm_hour=14, tm_min=43, tm_sec=42, tm_wday=6, tm_yday=219, tm_isdst=0)</span></span><br><span class="line">time.localtime(<span class="number">1659854649.524673</span>) <span class="comment"># time.struct_time(tm_year=2022, tm_mon=8, tm_mday=7, tm_hour=14, tm_min=44, tm_sec=9, tm_wday=6, tm_yday=219, tm_isdst=0)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># gmtime([secs])</span></span><br><span class="line">time.gmtime(<span class="number">1659854649.524673</span>) <span class="comment"># time.struct_time(tm_year=2022, tm_mon=8, tm_mday=7, tm_hour=6, tm_min=44, tm_sec=9, tm_wday=6, tm_yday=219, tm_isdst=0)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># mktime(t)</span></span><br><span class="line">time.mktime(time.localtime()) <span class="comment"># 1659854826.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># strftime(format[, t])</span></span><br><span class="line">time.strftime(<span class="string">"%Y-%m-%d %X"</span>, time.localtime()) <span class="comment"># '2022-08-07 15:03:50'</span></span><br><span class="line">time.strftime(<span class="string">'%Y-%m-%d %H-%M-%S'</span>,(<span class="number">2022</span>,<span class="number">8</span>,<span class="number">7</span>,<span class="number">14</span>,<span class="number">44</span>,<span class="number">9</span>,<span class="number">6</span>,<span class="number">219</span>,<span class="number">0</span>)) <span class="comment"># '2022-08-07 14-44-09'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># time.strptime(string[, format])</span></span><br><span class="line">time.strptime(<span class="string">'2022-08-07 14:44:09'</span>,<span class="string">'%Y-%m-%d %X'</span>) <span class="comment"># time.struct_time(tm_year=2022, tm_mon=8, tm_mday=7, tm_hour=14, tm_min=44, tm_sec=9, tm_wday=6, tm_yday=219, tm_isdst=-1)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># asctime([t])</span></span><br><span class="line">time.asctime(time.localtime()) <span class="comment"># 'Sun Aug  7 15:54:13 2022'</span></span><br><span class="line">time.ctime(time.time()) <span class="comment"># 'Sun Aug  7 15:54:49 2022'</span></span><br></pre></td></tr></table></figure>
<h5 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h5><ul>
<li><code>sleep</code>：线程推迟指定的时间运行，参数单位为秒。<code>time.sleep(10)</code></li>
</ul>
<h4 id="datetime-时间加减"><a href="#datetime-时间加减" class="headerlink" title="datetime(时间加减)"></a><code>datetime</code>(时间加减)</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line">today=datetime.datetime.now() <span class="comment"># datetime.datetime(2022, 8, 7, 16, 28, 10, 535644)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 时间加减</span></span><br><span class="line">today + datetime.timedelta(<span class="number">3</span>) <span class="comment"># datetime.datetime(2022, 8, 10, 16, 28, 10, 535644)</span></span><br><span class="line">today + datetime.timedelta(<span class="number">-3</span>) <span class="comment"># datetime.datetime(2022, 8, 4, 16, 28, 10, 535644)</span></span><br><span class="line">today + datetime.timedelta(hours=<span class="number">3</span>) <span class="comment"># datetime.datetime(2022, 8, 7, 19, 28, 10, 535644)</span></span><br><span class="line">today + datetime.timedelta(minutes=<span class="number">30</span>) <span class="comment"># datetime.datetime(2022, 8, 7, 16, 58, 10, 535644)</span></span><br><span class="line"></span><br><span class="line">时间替换</span><br><span class="line">today.replace(minute=<span class="number">3</span>,hour=<span class="number">2</span>) <span class="comment"># datetime.datetime(2022, 8, 7, 2, 3, 10, 535644)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 时间戳直接转成datetime</span></span><br><span class="line">datetime.datetime.fromtimestamp(time.time()) <span class="comment"># datetime.datetime(2022, 8, 7, 16, 34, 13, 155009)</span></span><br><span class="line"><span class="comment"># datetime转成struct_time</span></span><br><span class="line">today.timetuple() <span class="comment"># time.struct_time(tm_year=2022, tm_mon=8, tm_mday=7, tm_hour=16, tm_min=28, tm_sec=10, tm_wday=6, tm_yday=219, tm_isdst=-1)</span></span><br></pre></td></tr></table></figure>
<h4 id="random"><a href="#random" class="headerlink" title="random"></a><code>random</code></h4><ul>
<li><code>random()</code>：大于0且小于1之间的小数，返回类型float</li>
<li><code>uniform(m,n)</code>：大于m小于n的小数</li>
<li><code>randint(m,n)</code>：大于等于m且小于等于n之间的整数，返回类型int</li>
<li><code>randrange(m,n)</code>：大于等于m且小于n之间的整数</li>
<li><code>choice</code>：参数列表，随机返回列表中的某个项</li>
<li><code>sample([],n)</code>：参数列表，随机返回列表元素任意n个的组合,</li>
<li><code>shuffle</code>：参数列表，打乱项的顺序，原列表改变(项顺序改变，id不变)</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line">random.random() <span class="comment"># 0.8494743062780097</span></span><br><span class="line">random.uniform(<span class="number">1</span>,<span class="number">3</span>) <span class="comment"># 1.8118915610884312</span></span><br><span class="line">random.randint(<span class="number">1</span>,<span class="number">3</span>) <span class="comment"># 3</span></span><br><span class="line">randrange(<span class="number">1</span>,<span class="number">3</span>) <span class="comment"># 2</span></span><br><span class="line">random.choice([<span class="number">1</span>,<span class="string">'23'</span>,[<span class="number">4</span>,<span class="number">5</span>]]) <span class="comment"># [4,5]</span></span><br><span class="line">random.sample([<span class="number">1</span>,<span class="string">'23'</span>,[<span class="number">4</span>,<span class="number">5</span>]],<span class="number">2</span>) <span class="comment"># [[4, 5], '23']</span></span><br><span class="line"></span><br><span class="line">ls=[<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">9</span>]</span><br><span class="line">random.shuffle(ls) </span><br><span class="line">print(ls) <span class="comment"># [9, 3, 7, 1, 5]</span></span><br></pre></td></tr></table></figure>
<h4 id="os"><a href="#os" class="headerlink" title="os"></a><code>os</code></h4><p>os模块负责程序与操作系统交互</p>
<ul>
<li><code>getcwd()</code>：获取当前工作目录，即当前python脚本工作的目录路径</li>
<li><code>chdir(&quot;dirname&quot;)</code>：改变当前脚本工作目录；相当于shell下cd</li>
<li><code>curdir</code>：返回当前目录<code>&#39;.&#39;</code></li>
<li><code>pardir</code>：获取当前目录的父目录字符串名<code>&#39;..&#39;</code></li>
<li><code>removedirs(&#39;dirname1&#39;)</code>：若目录为空，则删除，并递归到上一级目录，如若也为空，则删除，依此类推</li>
<li><code>mkdir(&#39;dirname&#39;)</code>：生成单级目录；相当于shell中mkdir dirname</li>
<li><code>rmdir(&#39;dirname&#39;)</code>：删除单级空目录，若目录不为空则无法删除，报错；相当于shell中rmdir dirname</li>
<li><code>listdir(&#39;dirname&#39;)</code>：列出指定目录下的所有文件和子目录，包括隐藏文件，并以列表方式打印</li>
<li><code>remove()</code>：删除一个文件</li>
<li><code>rename(&quot;oldname&quot;,&quot;newname&quot;)</code>：重命名文件/目录</li>
<li><code>stat(&#39;path/filename&#39;)</code>：获取文件/目录信息</li>
<li><code>sep</code>：输出操作系统特定的路径分隔符，win下为<code>&quot;\\&quot;</code>,Linux下为<code>&quot;/&quot;</code></li>
<li><code>linesep</code>：输出当前平台使用的行终止符，win下为<code>&quot;\t\n&quot;</code>,Linux下为<code>&quot;\n&quot;</code></li>
<li><code>pathsep</code>：输出用于分割文件路径的字符串 win下为’;’,Linux下为’:’</li>
<li><code>name</code>：输出字符串指示当前使用平台。win下为<code>&#39;nt&#39;</code>; Linux下为<code>&#39;posix&#39;</code></li>
<li><code>system(&quot;bash command&quot;)</code>：运行shell命令，直接显示</li>
<li><code>environ</code>：获取系统环境变量</li>
<li><code>path</code><ul>
<li><code>path.abspath(path)</code>：返回path规范化的绝对路径</li>
<li><code>path.split(path)</code>：将path分割成目录和文件名二元组返回</li>
<li><code>path.dirname(path</code>：返回path的目录。其实就是<code>os.path.split(path)</code>的第一个元素</li>
<li><code>path.basename(path)</code>：返回path最后的文件名。如何path以／或\结尾，那么就会返回空值。即<code>os.path.split(path)</code>的第二个元素</li>
<li><code>path.exists(path)</code>：如果path存在，返回True；如果path不存在，返回False</li>
<li><code>path.isabs(path)</code>：如果path是绝对路径，返回True</li>
<li><code>path.isfile(path)</code>：如果path是一个存在的文件，返回True。否则返回False</li>
<li><code>path.isdir(path)</code>： 如果path是一个存在的目录，则返回True。否则返回False</li>
<li><code>path.join(path1[, path2[, ...]])</code>：将多个路径组合后返回，第一个绝对路径之前的参数将被忽略</li>
<li><code>path.getatime(path)</code>：返回path所指向的文件或者目录的最后存取时间</li>
<li><code>getmtime(path)</code>：返回path所指向的文件或者目录的最后修改时间</li>
<li><code>path.getsize(path)</code>：返回path的大小</li>
<li><code>path.normcase(path)</code>：在Linux和Mac平台上，该函数会原样返回path，在windows平台上会将路径中所有字符转换为小写，并将所有斜杠转换为饭斜杠。</li>
<li><code>path.normpath(path)</code>：规范化路径，如..和/，<code>os.path.normpath(&#39;c://windows\\System32\\../Temp/&#39;)</code>返回<code>&#39;c:\\windows\\Temp&#39;</code></li>
</ul>
</li>
</ul>
<h5 id="os路径处理"><a href="#os路径处理" class="headerlink" title="os路径处理"></a>os路径处理</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os,sys</span><br><span class="line"><span class="comment">#方式一：推荐使用</span></span><br><span class="line">possible_topdir = os.path.normpath(os.path.join(</span><br><span class="line">    os.path.abspath(__file__),</span><br><span class="line">    os.pardir, <span class="comment">#上一级</span></span><br><span class="line">    os.pardir,</span><br><span class="line">    os.pardir</span><br><span class="line">))</span><br><span class="line">sys.path.insert(<span class="number">0</span>,possible_topdir)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#方式二：不推荐使用</span></span><br><span class="line">os.path.dirname(os.path.dirname(os.path.dirname(os.path.abspath(__file__))))</span><br></pre></td></tr></table></figure>
<h4 id="sys"><a href="#sys" class="headerlink" title="sys"></a><code>sys</code></h4><p>sys模块负责程序与Python解释器进行交互。</p>
<ul>
<li><code>sys.argv</code>：命令行参数List，第一个元素是程序本身路径</li>
<li><code>sys.exit(n)</code>：退出程序，正常退出时<code>exit(0)</code></li>
<li><code>sys.version</code>：获取Python解释程序的版本信息</li>
<li><code>sys.hexversion</code>：获取Python解释程序的版本值，16进制格式如：0x020403F0</li>
<li><code>sys.api_version</code>：解释器的C的API版本</li>
<li><code>sys.maxint</code>：最大的Int值</li>
<li><code>sys.maxunicode</code>：最大的Unicode值</li>
<li><code>sys.path</code>：返回模块的搜索路径，初始化时使用PYTHONPATH环境变量的值</li>
<li><code>sys.platform</code>：返回操作系统平台名称</li>
<li><code>sys.modules</code>：返回系统导入的模块字段，key是模块名，value是模块</li>
<li><code>sys.modules.keys()</code>：返回所有已经导入的模块列表</li>
<li><code>sys.exc_info()</code>：获取当前正在处理的异常类,exc_type、exc_value、exc_traceback当前处理的异常详细信息</li>
<li>`sys.stdout：标准输出</li>
<li><code>sys.stdin</code>：标准输入</li>
<li><code>sys.stderr</code>：错误输出</li>
<li><code>sys.exc_clear()</code>：用来清除当前线程所出现的当前的或最近的错误信息</li>
<li><code>sys.exec_prefix</code>：返回平台独立的python文件安装的位置</li>
<li><code>sys.byteorder</code>：本地字节规则的指示器，big-endian平台的值是’big’,little-endian平台的值是’little’</li>
<li><code>sys.copyright</code>：记录python版权相关的东西</li>
</ul>
<h4 id="shutil-文件、文件夹、压缩包处理模块"><a href="#shutil-文件、文件夹、压缩包处理模块" class="headerlink" title="shutil(文件、文件夹、压缩包处理模块)"></a><code>shutil</code>(文件、文件夹、压缩包处理模块)</h4><p>高级的文件、文件夹、压缩包处理模块</p>
<ul>
<li><code>copyfileobj(fsrc, fdst[, length])</code>：将文件内容拷贝到另一个文件中</li>
<li><code>copyfile(src, dst)</code>：拷贝文件，<strong>目标文件无需存在</strong></li>
<li><code>copymode(src, dst)</code>：仅拷贝权限。内容、组、用户均不变，<strong>目标文件必须存在</strong></li>
<li><code>copystat(src, dst)</code>：仅拷贝状态的信息，包括：mode bits, atime, mtime, flags，<strong>目标文件必须存在</strong></li>
<li><code>copy(src, dst)</code>：拷贝文件和权限</li>
<li><code>copy2(src, dst)</code>：拷贝文件和状态信息</li>
<li><code>ignore_patterns(*patterns)</code>：排除满足条件的文件</li>
<li><code>copytree(src, dst, symlinks=False, ignore=None)</code>：递归的去拷贝文件夹，<strong>目标目录不能存在，注意对dst目录父级目录要有可写权限</strong><ul>
<li>ignore：排除，由shutil.ignore_patterns(*patterns)返回</li>
<li>symlinks：通常值为False或省略,指拷贝都把软连接拷贝成硬链接，即对待软连接来说，创建新的文件(元数据复制到新文件夹中)。为True时，源文件夹中的软链接仍然拷贝成软连接，但是软链接的元数据不会被复制</li>
</ul>
</li>
<li><code>rmtree(path[, ignore_errors[, onerror]])</code>：递归的去删除文件</li>
<li><code>move(src, dst)</code>：递归的去移动文件，它类似mv命令，其实就是重命名。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line"></span><br><span class="line">shutil.copyfileobj(open(<span class="string">'old.xml'</span>,<span class="string">'r'</span>), open(<span class="string">'new.xml'</span>, <span class="string">'w'</span>))</span><br><span class="line">shutil.copyfile(<span class="string">'f1.log'</span>, <span class="string">'f2.log'</span>)</span><br><span class="line">shutil.copymode(<span class="string">'f1.log'</span>, <span class="string">'f2.log'</span>)</span><br><span class="line">shutil.copystat(<span class="string">'f1.log'</span>, <span class="string">'f2.log'</span>)</span><br><span class="line">shutil.copy(<span class="string">'f1.log'</span>, <span class="string">'f2.log'</span>)</span><br><span class="line">shutil.copy2(<span class="string">'f1.log'</span>, <span class="string">'f2.log'</span>)</span><br><span class="line">shutil.copytree(<span class="string">'folder1'</span>, <span class="string">'folder2'</span>, ignore=shutil.ignore_patterns(<span class="string">'*.pyc'</span>, <span class="string">'tmp*'</span>))</span><br><span class="line">shutil.rmtree(<span class="string">'folder1'</span>)</span><br><span class="line">shutil.move(<span class="string">'folder1'</span>, <span class="string">'folder3'</span>)</span><br></pre></td></tr></table></figure>
<h5 id="压缩和解压缩"><a href="#压缩和解压缩" class="headerlink" title="压缩和解压缩"></a>压缩和解压缩</h5><ul>
<li><code>make_archive(base_name, format,...)</code>：创建压缩包并返回文件路径，例如：zip、tar<ul>
<li><code>base_name</code>： 压缩包的文件名，也可以是压缩包的路径。只是文件名时，则保存至当前目录，否则保存至指定路径，如 <code>data_bak</code>=&gt;保存至当前路径；如 <code>/tmp/data_bak</code>=&gt;保存至/tmp/</li>
<li><code>format</code>：压缩包种类，“zip”, “tar”, “bztar”，“gztar”</li>
<li><code>root_dir</code>：要压缩的文件夹路径（默认当前目录）</li>
<li><code>owner</code>：用户，默认当前用户</li>
<li><code>group</code>：组，默认当前组</li>
<li><code>logger</code>：用于记录日志，通常是logging.Logger对象</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将 /data 下的文件打包放置当前程序目录</span></span><br><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line">ret = shutil.make_archive(<span class="string">"data_bak"</span>, <span class="string">'gztar'</span>, root_dir=<span class="string">'/data'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将 /data下的文件打包放置 /tmp/目录</span></span><br><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line">ret = shutil.make_archive(<span class="string">"/tmp/data_bak"</span>, <span class="string">'gztar'</span>, root_dir=<span class="string">'/data'</span>)</span><br></pre></td></tr></table></figure>
<p>shutil 对压缩包的处理是调用 ZipFile 和 TarFile 两个模块来进行的</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> zipfile</span><br><span class="line"></span><br><span class="line"><span class="comment"># 压缩</span></span><br><span class="line">z = zipfile.ZipFile(<span class="string">'laxi.zip'</span>, <span class="string">'w'</span>)</span><br><span class="line">z.write(<span class="string">'a.log'</span>)</span><br><span class="line">z.write(<span class="string">'data.data'</span>)</span><br><span class="line">z.close()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解压</span></span><br><span class="line">z = zipfile.ZipFile(<span class="string">'laxi.zip'</span>, <span class="string">'r'</span>)</span><br><span class="line">z.extractall(path=<span class="string">'.'</span>)</span><br><span class="line">z.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> tarfile</span><br><span class="line"></span><br><span class="line"><span class="comment"># 压缩</span></span><br><span class="line">t=tarfile.open(<span class="string">'/tmp/egon.tar'</span>,<span class="string">'w'</span>)</span><br><span class="line">t.add(<span class="string">'/test1/a.py'</span>,arcname=<span class="string">'a.bak'</span>)</span><br><span class="line">t.add(<span class="string">'/test1/b.py'</span>,arcname=<span class="string">'b.bak'</span>)</span><br><span class="line">t.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 解压</span></span><br><span class="line">t=tarfile.open(<span class="string">'/tmp/egon.tar'</span>,<span class="string">'r'</span>)</span><br><span class="line">t.extractall(<span class="string">'/egon'</span>)</span><br><span class="line">t.close()</span><br></pre></td></tr></table></figure>
<h4 id="JSON-amp-pickle-序列化和反序列化"><a href="#JSON-amp-pickle-序列化和反序列化" class="headerlink" title="JSON&amp;pickle(序列化和反序列化)"></a><code>JSON</code>&amp;<code>pickle</code>(序列化和反序列化)</h4><h5 id="序列化"><a href="#序列化" class="headerlink" title="序列化"></a>序列化</h5><ul>
<li>序列化：把对象(变量)从内存中变成可存储或传输的过程称之为序列化，在Python中叫pickling，在其他语言中也被称之为serialization，marshalling，flattening等</li>
<li>反序列化：反过来，把变量内容从序列化的对象重新读到内存里称之为反序列化</li>
</ul>
<p>序列化的优点：</p>
<ul>
<li>持久保存状态：内存是无法永久保存数据的，当程序运行了一段时间，我们断电或者重启程序，内存中关于这个程序的之前一段时间的数据（有结构）都被清空了。但是在断电或重启程序之前将程序当前内存中所有的数据都保存下来（保存到文件中），以便于下次程序执行能够从文件中载入之前的数据，然后继续执行，这就是序列化。如游戏存档，虚拟机状态的挂起</li>
<li>跨平台数据交互：序列化时不仅可以把序列化后的内容写入磁盘，还可以通过网络传输到别的机器上，如果收发的双方约定好实用一种序列化的格式，那么便打破了平台/语言差异化带来的限制，实现了跨平台数据交互。</li>
</ul>
<h5 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a><code>JSON</code></h5><p>Json序列化并不是python独有的，json序列化在java等语言中也会涉及到，因此使用json序列化能够达到跨平台传输数据的目的。JSON不仅是标准格式，并且比XML更快</p>
<p>JSON表示的对象就是标准的JavaScript语言的对象，JSON和Python内置的数据类型对应如下</p>
<table>
<thead>
<tr>
<th style="text-align:center">Json类型</th>
<th style="text-align:center">Python类型</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">{}</td>
<td style="text-align:center">dict</td>
</tr>
<tr>
<td style="text-align:center">[]</td>
<td style="text-align:center">list</td>
</tr>
<tr>
<td style="text-align:center">“string”</td>
<td style="text-align:center">str</td>
</tr>
<tr>
<td style="text-align:center">520.13</td>
<td style="text-align:center">int或float</td>
</tr>
<tr>
<td style="text-align:center">true/false</td>
<td style="text-align:center">True/False</td>
</tr>
<tr>
<td style="text-align:center">null</td>
<td style="text-align:center">None</td>
</tr>
</tbody>
</table>
<blockquote>
<p>json不认单引号</p>
</blockquote>
<p>json模块序列化和反序列化的一个过程如下图所示</p>
<p><img src="/2019/05/17/python3.0基础/python3.0基础-20220812-16-03-31.png" alt="json模块序列化和反序列化"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line">dic=&#123;<span class="string">'name'</span>:<span class="string">'alvin'</span>,<span class="string">'age'</span>:<span class="number">23</span>,<span class="string">'sex'</span>:<span class="string">'male'</span>&#125;</span><br><span class="line">print(type(dic)) <span class="comment"># &lt;class 'dict'&gt;</span></span><br><span class="line"> </span><br><span class="line">j=json.dumps(dic)</span><br><span class="line">print(type(j)) <span class="comment"># &lt;class 'str'&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 序列化</span></span><br><span class="line">f=open(<span class="string">'序列化对象.json'</span>,<span class="string">'w'</span>)</span><br><span class="line"></span><br><span class="line">json.dump(dic,f)</span><br><span class="line"><span class="comment"># 等价于f.write(json.dumps(dic))</span></span><br><span class="line">f.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 反序列化</span></span><br><span class="line">f=open(<span class="string">'序列化对象.json'</span>)</span><br><span class="line"></span><br><span class="line">data=json.load(f)</span><br><span class="line"><span class="comment"># 等价于 data=json.loads(f.read())</span></span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li>无论数据是怎样创建的，只要满足json格式，就可以json.loads出来,不一定非要dumps的数据才能loads</li>
<li>在python解释器2.7与3.6之后都可以json.loads(bytes类型)，但唯独3.5不可以</li>
</ul>
</blockquote>
<h5 id="pickle"><a href="#pickle" class="headerlink" title="pickle"></a><code>pickle</code></h5><p>Pickle序列化，只能用来保存那些不重要的数据，即不能成功地反序列化也没关系。</p>
<ul>
<li>缺点：只能用于Python，并且可能不同版本的Python彼此都不兼容</li>
<li>优点：可以存储Python中的所有的数据类型，包括对象，而json不可以</li>
</ul>
<p>pickle模块序列化和反序列化的过程如下图所示</p>
<p><img src="/2019/05/17/python3.0基础/python3.0基础-20220812-16-29-29.png" alt="pickle模块序列化和反序列化"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pickle</span><br><span class="line"></span><br><span class="line">dic=&#123;<span class="string">'name'</span>:<span class="string">'alvin'</span>,<span class="string">'age'</span>:<span class="number">23</span>,<span class="string">'sex'</span>:<span class="string">'male'</span>&#125;</span><br><span class="line">print(type(dic)) <span class="comment"># &lt;class 'dict'&gt;</span></span><br><span class="line"> </span><br><span class="line">j=pickle.dumps(dic)</span><br><span class="line">print(type(j)) <span class="comment"># &lt;class 'bytes'&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 序列化</span></span><br><span class="line"><span class="comment"># 注意是w是写入str,wb是写入bytes,j是'bytes'</span></span><br><span class="line">f=open(<span class="string">'序列化对象_pickle'</span>,<span class="string">'wb'</span>) </span><br><span class="line">pickle.dump(dic,f)</span><br><span class="line"><span class="comment"># 等价于 f.write(j)</span></span><br><span class="line">f.close()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 反序列化</span></span><br><span class="line">f=open(<span class="string">'序列化对象_pickle'</span>,<span class="string">'rb'</span>)</span><br><span class="line">data=pickle.load(f)</span><br><span class="line"><span class="comment">#  等价于 data=pickle.loads(f.read())</span></span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>
<p>python2和python3的pickle兼容性处理</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding:utf-8</span></span><br><span class="line"><span class="keyword">import</span> pickle</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'a.pkl'</span>,mode=<span class="string">'wb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="comment"># 一：在python3中执行的序列化操作如何兼容python2</span></span><br><span class="line">    <span class="comment"># python2不支持protocol&gt;2，默认python3中protocol=4</span></span><br><span class="line">    <span class="comment"># 所以在python3中dump操作应该指定protocol=2</span></span><br><span class="line">    pickle.dump(<span class="string">'你好啊'</span>,f,protocol=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'a.pkl'</span>, mode=<span class="string">'rb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="comment"># 二：python2中反序列化才能正常使用</span></span><br><span class="line">    res=pickle.load(f)</span><br><span class="line">    print(res)</span><br></pre></td></tr></table></figure>
<h4 id="shelve"><a href="#shelve" class="headerlink" title="shelve"></a><code>shelve</code></h4><p>对象持久化保存方法，将对象保存到文件里面，默认的数据存储格式是二进制的。只有一个open函数，返回类似字典的对象，可读可写。<strong>key必须为字符串</strong>，而值可以是python所支持的数据类型</p>
<ul>
<li><code>shelve.open(filename, flag=&#39;c&#39;, protocol=None, writeback=False)</code><ul>
<li><code>filename</code>：是关联的文件路径</li>
<li><code>flag</code>：可选参数<ul>
<li><code>c</code>：默认，如果数据文件不存在，就创建，允许读写；可以是</li>
<li><code>r</code>: 只读；</li>
<li>`w: 可读写;</li>
<li><code>n</code>: 每次调用open()都重新创建一个空的文件，可读写。</li>
</ul>
</li>
<li><code>writeback</code>：默认为<code>False</code>。当设置为<code>True</code>以后，shelve对象将为所有访问过的条目保留缓存并在<code>close()</code>或<code>sync()</code>时将它们写回到DB。<ul>
<li>优点：减少了出错的概率，对持久化字典中可变条目的修改更方便。</li>
<li>缺点：如果访问的条目很多，这会消耗大量内存作为缓存，并会使得关闭操作变得非常缓慢，因为所有被访问的条目都需要写回到字典（无法确定被访问的条目中哪个是可变的，也无法确定哪个被实际修改了）。</li>
</ul>
</li>
</ul>
</li>
<li>shelve.close()：同步并关闭shelve对象。注意：每次使用完毕，都必须确保shelve对象被安全关闭。同样可以使用 <code>with shelve.open()</code> 作为上下文管理器</li>
</ul>
<h4 id="xml"><a href="#xml" class="headerlink" title="xml"></a><code>xml</code></h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> xml.etree.ElementTree <span class="keyword">as</span> ET</span><br><span class="line">tree = ET.parse(<span class="string">"xmltest.xml"</span>)</span><br><span class="line">root = tree.getroot()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 遍历xml文档</span></span><br><span class="line"><span class="keyword">for</span> child <span class="keyword">in</span> root:</span><br><span class="line">    print(<span class="string">'========&gt;'</span>,child.tag,child.attrib,child.attrib[<span class="string">'name'</span>])</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> child:</span><br><span class="line">        print(i.tag,i.attrib,i.text)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 只遍历year 节点</span></span><br><span class="line"><span class="keyword">for</span> node <span class="keyword">in</span> root.iter(<span class="string">'year'</span>):</span><br><span class="line">    print(node.tag,node.text)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> xml.etree.ElementTree <span class="keyword">as</span> ET</span><br><span class="line"> </span><br><span class="line">tree = ET.parse(<span class="string">"xmltest.xml"</span>)</span><br><span class="line">root = tree.getroot()</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 修改</span></span><br><span class="line"><span class="keyword">for</span> node <span class="keyword">in</span> root.iter(<span class="string">'year'</span>):</span><br><span class="line">    new_year=int(node.text)+<span class="number">1</span></span><br><span class="line">    node.text=str(new_year)</span><br><span class="line">    node.set(<span class="string">'updated'</span>,<span class="string">'yes'</span>)</span><br><span class="line">    node.set(<span class="string">'version'</span>,<span class="string">'1.0'</span>)</span><br><span class="line">tree.write(<span class="string">'test.xml'</span>)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 删除node</span></span><br><span class="line"><span class="keyword">for</span> country <span class="keyword">in</span> root.findall(<span class="string">'country'</span>):</span><br><span class="line">   rank = int(country.find(<span class="string">'rank'</span>).text)</span><br><span class="line">   <span class="keyword">if</span> rank &gt; <span class="number">50</span>:</span><br><span class="line">     root.remove(country)</span><br><span class="line"> </span><br><span class="line">tree.write(<span class="string">'output.xml'</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在country内添加（append）节点year2</span></span><br><span class="line"><span class="keyword">import</span> xml.etree.ElementTree <span class="keyword">as</span> ET</span><br><span class="line">tree = ET.parse(<span class="string">"a.xml"</span>)</span><br><span class="line">root=tree.getroot()</span><br><span class="line"><span class="keyword">for</span> country <span class="keyword">in</span> root.findall(<span class="string">'country'</span>):</span><br><span class="line">    <span class="keyword">for</span> year <span class="keyword">in</span> country.findall(<span class="string">'year'</span>):</span><br><span class="line">        <span class="keyword">if</span> int(year.text) &gt; <span class="number">2000</span>:</span><br><span class="line">            year2=ET.Element(<span class="string">'year2'</span>)</span><br><span class="line">            year2.text=<span class="string">'新年'</span></span><br><span class="line">            year2.attrib=&#123;<span class="string">'update'</span>:<span class="string">'yes'</span>&#125;</span><br><span class="line">            country.append(year2) <span class="comment">#往country节点下添加子节点</span></span><br><span class="line"></span><br><span class="line">tree.write(<span class="string">'a.xml.swap'</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li><code>root.iter(str)</code>：全文搜索</li>
<li><code>root.find(str)</code>：在root的子节点找，只找一个</li>
<li><code>root.findall(str)</code>：在root的子节点找，找所有</li>
</ul>
<p>自己创建xml文档</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> xml.etree.ElementTree <span class="keyword">as</span> ET</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">new_xml = ET.Element(<span class="string">"namelist"</span>)</span><br><span class="line">name = ET.SubElement(new_xml,<span class="string">"name"</span>,attrib=&#123;<span class="string">"enrolled"</span>:<span class="string">"yes"</span>&#125;)</span><br><span class="line">age = ET.SubElement(name,<span class="string">"age"</span>,attrib=&#123;<span class="string">"checked"</span>:<span class="string">"no"</span>&#125;)</span><br><span class="line">sex = ET.SubElement(name,<span class="string">"sex"</span>)</span><br><span class="line">sex.text = <span class="string">'33'</span></span><br><span class="line">name2 = ET.SubElement(new_xml,<span class="string">"name"</span>,attrib=&#123;<span class="string">"enrolled"</span>:<span class="string">"no"</span>&#125;)</span><br><span class="line">age = ET.SubElement(name2,<span class="string">"age"</span>)</span><br><span class="line">age.text = <span class="string">'19'</span></span><br><span class="line"> </span><br><span class="line">et = ET.ElementTree(new_xml) <span class="comment">#生成文档对象</span></span><br><span class="line">et.write(<span class="string">"test.xml"</span>, encoding=<span class="string">"utf-8"</span>,xml_declaration=<span class="keyword">True</span>)</span><br><span class="line"> </span><br><span class="line">ET.dump(new_xml) <span class="comment">#打印生成的格式</span></span><br></pre></td></tr></table></figure>
<h4 id="configparser"><a href="#configparser" class="headerlink" title="configparser"></a><code>configparser</code></h4><p>ini配置文件如下</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 注释1</span></span><br><span class="line"><span class="comment">; 注释2</span></span><br><span class="line"></span><br><span class="line"><span class="section">[section1]</span></span><br><span class="line"><span class="attr">k1</span> = v1</span><br><span class="line">k2:v2</span><br><span class="line"><span class="attr">user</span>=egon</span><br><span class="line"><span class="attr">age</span>=<span class="number">18</span></span><br><span class="line"><span class="attr">is_admin</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">salary</span>=<span class="number">31</span></span><br><span class="line"></span><br><span class="line"><span class="section">[section2]</span></span><br><span class="line"><span class="attr">k1</span> = v1</span><br></pre></td></tr></table></figure>
<h5 id="读取"><a href="#读取" class="headerlink" title="读取"></a>读取</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> configparser</span><br><span class="line"></span><br><span class="line">config=configparser.ConfigParser()</span><br><span class="line">config.read(<span class="string">'a.cfg'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看所有的标题</span></span><br><span class="line">res=config.sections() <span class="comment">#['section1', 'section2']</span></span><br><span class="line">print(res)</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看标题section1下所有key=value的key</span></span><br><span class="line">options=config.options(<span class="string">'section1'</span>)</span><br><span class="line">print(options) <span class="comment">#['k1', 'k2', 'user', 'age', 'is_admin', 'salary']</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#查看标题section1下所有key=value的(key,value)格式</span></span><br><span class="line">item_list=config.items(<span class="string">'section1'</span>)</span><br><span class="line">print(item_list) <span class="comment">#[('k1', 'v1'), ('k2', 'v2'), ('user', 'egon'), ('age', '18'), ('is_admin', 'true'), ('salary', '31')]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#查看标题section1下user的值=&gt;字符串格式</span></span><br><span class="line">val=config.get(<span class="string">'section1'</span>,<span class="string">'user'</span>)</span><br><span class="line">print(val) <span class="comment">#egon</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#查看标题section1下age的值=&gt;整数格式</span></span><br><span class="line">val1=config.getint(<span class="string">'section1'</span>,<span class="string">'age'</span>)</span><br><span class="line">print(val1) <span class="comment">#18</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#查看标题section1下is_admin的值=&gt;布尔值格式</span></span><br><span class="line">val2=config.getboolean(<span class="string">'section1'</span>,<span class="string">'is_admin'</span>)</span><br><span class="line">print(val2) <span class="comment">#True</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#查看标题section1下salary的值=&gt;浮点型格式</span></span><br><span class="line">val3=config.getfloat(<span class="string">'section1'</span>,<span class="string">'salary'</span>)</span><br><span class="line">print(val3) <span class="comment">#31.0</span></span><br></pre></td></tr></table></figure>
<h5 id="改写"><a href="#改写" class="headerlink" title="改写"></a>改写</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> configparser</span><br><span class="line"></span><br><span class="line">config=configparser.ConfigParser()</span><br><span class="line">config.read(<span class="string">'a.cfg'</span>,encoding=<span class="string">'utf-8'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#删除整个标题section2</span></span><br><span class="line">config.remove_section(<span class="string">'section2'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#删除标题section1下的某个k1和k2</span></span><br><span class="line">config.remove_option(<span class="string">'section1'</span>,<span class="string">'k1'</span>)</span><br><span class="line">config.remove_option(<span class="string">'section1'</span>,<span class="string">'k2'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#判断是否存在某个标题</span></span><br><span class="line">print(config.has_section(<span class="string">'section1'</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">#判断标题section1下是否有user</span></span><br><span class="line">print(config.has_option(<span class="string">'section1'</span>,<span class="string">''</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#添加一个标题</span></span><br><span class="line">config.add_section(<span class="string">'egon'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#在标题egon下添加name=egon,age=18的配置</span></span><br><span class="line">config.set(<span class="string">'egon'</span>,<span class="string">'name'</span>,<span class="string">'egon'</span>)</span><br><span class="line">config.set(<span class="string">'egon'</span>,<span class="string">'age'</span>,<span class="number">18</span>) <span class="comment">#报错,必须是字符串</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#最后将修改的内容写入文件,完成最终的修改</span></span><br><span class="line">config.write(open(<span class="string">'a.cfg'</span>,<span class="string">'w'</span>))</span><br></pre></td></tr></table></figure>
<h5 id="使用案例"><a href="#使用案例" class="headerlink" title="使用案例"></a>使用案例</h5><p>添加一个ini文档</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> configparser</span><br><span class="line">  </span><br><span class="line">config = configparser.ConfigParser()</span><br><span class="line">config[<span class="string">"DEFAULT"</span>] = &#123;<span class="string">'ServerAliveInterval'</span>: <span class="string">'45'</span>,</span><br><span class="line">                      <span class="string">'Compression'</span>: <span class="string">'yes'</span>,</span><br><span class="line">                     <span class="string">'CompressionLevel'</span>: <span class="string">'9'</span>&#125;</span><br><span class="line">  </span><br><span class="line">config[<span class="string">'bitbucket.org'</span>] = &#123;&#125;</span><br><span class="line">config[<span class="string">'bitbucket.org'</span>][<span class="string">'User'</span>] = <span class="string">'hg'</span></span><br><span class="line">config[<span class="string">'topsecret.server.com'</span>] = &#123;&#125;</span><br><span class="line">topsecret = config[<span class="string">'topsecret.server.com'</span>]</span><br><span class="line">topsecret[<span class="string">'Host Port'</span>] = <span class="string">'50022'</span>     <span class="comment"># mutates the parser</span></span><br><span class="line">topsecret[<span class="string">'ForwardX11'</span>] = <span class="string">'no'</span>  <span class="comment"># same here</span></span><br><span class="line">config[<span class="string">'DEFAULT'</span>][<span class="string">'ForwardX11'</span>] = <span class="string">'yes'</span></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'example.ini'</span>, <span class="string">'w'</span>) <span class="keyword">as</span> configfile:</span><br><span class="line">   config.write(configfile)</span><br></pre></td></tr></table></figure>
<h4 id="hashlib-加密"><a href="#hashlib-加密" class="headerlink" title="hashlib(加密)"></a><code>hashlib</code>(加密)</h4><p>hash是一种算法（3.x里代替了md5模块和sha模块，主要提供 SHA1, SHA224, SHA256, SHA384, SHA512 ，MD5 算法），该算法接受传入的内容，经过运算得到一串hash值。</p>
<p>特点：</p>
<ul>
<li>只要传入的内容一样，得到的hash值一样，可用于非明文密码传输时密码校验</li>
<li>不能由hash值返解成内容，即可以保证非明文密码的安全性</li>
<li>只要使用的hash算法不变，无论校验的内容有多大，得到的hash值长度是固定的，可以用于对文本的哈希处理</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"> </span><br><span class="line">m=hashlib.md5()<span class="comment"># m=hashlib.sha256()</span></span><br><span class="line"> </span><br><span class="line">m.update(<span class="string">'hello'</span>.encode(<span class="string">'utf8'</span>))</span><br><span class="line">print(m.hexdigest()) <span class="comment"># 5d41402abc4b2a76b9719d911017c592</span></span><br><span class="line"> </span><br><span class="line">m.update(<span class="string">'alvin'</span>.encode(<span class="string">'utf8'</span>))</span><br><span class="line"> </span><br><span class="line">print(m.hexdigest()) <span class="comment"># 92a7e713c30abbb0319fa07da2a5c4af</span></span><br><span class="line"> </span><br><span class="line">m2=hashlib.md5()</span><br><span class="line">m2.update(<span class="string">'helloalvin'</span>.encode(<span class="string">'utf8'</span>))</span><br><span class="line">print(m2.hexdigest()) <span class="comment"># 92a7e713c30abbb0319fa07da2a5c4af</span></span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li>把一段很长的数据update多次，与一次update这段长数据，得到的结果一样，但是update多次为校验大文件提供了可能。</li>
<li>hash加密算法虽然看起来很厉害，但是他是存在一定缺陷的，即可以通过撞库可以反解。有必要对加密算法中添加自定义key再来做加密（即密码加盐，可以提升撞库的成本）。</li>
</ul>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"> </span><br><span class="line"><span class="comment"># ######## 256 ########</span></span><br><span class="line"> </span><br><span class="line">hash = hashlib.sha256(<span class="string">'898oaFs09f'</span>.encode(<span class="string">'utf8'</span>))</span><br><span class="line">hash.update(<span class="string">'alvin'</span>.encode(<span class="string">'utf8'</span>))</span><br><span class="line"><span class="keyword">print</span> (hash.hexdigest()) <span class="comment"># e79e68f070cdedcfe63eaf1a2e92c83b4cfb1b5c6bc452d214c1b7e77cdfd1c7</span></span><br></pre></td></tr></table></figure>
<p>模拟撞库</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"></span><br><span class="line"><span class="comment"># 假定我们知道hash的微信会设置如下几个密码</span></span><br><span class="line">passwds=[</span><br><span class="line">    <span class="string">'alex3714'</span>,</span><br><span class="line">    <span class="string">'alex1313'</span>,</span><br><span class="line">    <span class="string">'alex94139413'</span>,</span><br><span class="line">    <span class="string">'alex123456'</span>,</span><br><span class="line">    <span class="string">'123456alex'</span>,</span><br><span class="line">    <span class="string">'a123lex'</span>,</span><br><span class="line">    ]</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">make_passwd_dic</span><span class="params">(passwds)</span>:</span></span><br><span class="line">    dic=&#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> passwd <span class="keyword">in</span> passwds:</span><br><span class="line">        m=hashlib.md5()</span><br><span class="line">        m.update(passwd.encode(<span class="string">'utf-8'</span>))</span><br><span class="line">        dic[passwd]=m.hexdigest()</span><br><span class="line">    <span class="keyword">return</span> dic</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">break_code</span><span class="params">(cryptograph,passwd_dic)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> k,v <span class="keyword">in</span> passwd_dic.items():</span><br><span class="line">        <span class="keyword">if</span> v == cryptograph:</span><br><span class="line">            print(<span class="string">'密码是===&gt;\033[46m%s\033[0m'</span> %k)</span><br><span class="line"></span><br><span class="line">cryptograph=<span class="string">'aee949757a2e698417463d47acac93df'</span></span><br><span class="line">break_code(cryptograph,make_passwd_dic(passwds))</span><br></pre></td></tr></table></figure>
<h4 id="hmac-加密"><a href="#hmac-加密" class="headerlink" title="hmac(加密)"></a><code>hmac</code>(加密)</h4><p>为了防止密码被撞库，我们可以使用python中的另一个hmac 模块，它内部对我们创建key和内容做过某种处理后再加密。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> hmac</span><br><span class="line">h1=hmac.new(<span class="string">'hello'</span>.encode(<span class="string">'utf-8'</span>),digestmod=<span class="string">'md5'</span>)</span><br><span class="line">h1.update(<span class="string">'world'</span>.encode(<span class="string">'utf-8'</span>))</span><br><span class="line"></span><br><span class="line">print(h1.hexdigest())</span><br></pre></td></tr></table></figure>
<p>要想保证hmac最终结果一致，必须保证：</p>
<ul>
<li>hmac.new括号内指定的初始key一样</li>
<li>无论update多少次，校验的内容累加到一起是一样的内容</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 操作一</span></span><br><span class="line"><span class="keyword">import</span> hmac</span><br><span class="line">h1=hmac.new(<span class="string">'hello'</span>.encode(<span class="string">'utf-8'</span>),digestmod=<span class="string">'md5'</span>)</span><br><span class="line">h1.update(<span class="string">'world'</span>.encode(<span class="string">'utf-8'</span>))</span><br><span class="line"></span><br><span class="line">print(h1.hexdigest()) <span class="comment"># 0e2564b7e100f034341ea477c23f283b</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 操作二</span></span><br><span class="line"><span class="keyword">import</span> hmac</span><br><span class="line">h2=hmac.new(<span class="string">'hello'</span>.encode(<span class="string">'utf-8'</span>),digestmod=<span class="string">'md5'</span>)</span><br><span class="line">h2.update(<span class="string">'w'</span>.encode(<span class="string">'utf-8'</span>))</span><br><span class="line">h2.update(<span class="string">'orld'</span>.encode(<span class="string">'utf-8'</span>))</span><br><span class="line"></span><br><span class="line">print(h1.hexdigest()) <span class="comment"># 0e2564b7e100f034341ea477c23f283b</span></span><br></pre></td></tr></table></figure>
<h4 id="suprocess"><a href="#suprocess" class="headerlink" title="suprocess"></a><code>suprocess</code></h4><p>subprocess 模块允许我们启动一个新进程，并连接到它们的输入/输出/错误管道，从而获取返回值。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span>  subprocess</span><br><span class="line"></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">sh-3.2# ls /Users/egon/Desktop |grep txt$</span></span><br><span class="line"><span class="string">mysql.txt</span></span><br><span class="line"><span class="string">tt.txt</span></span><br><span class="line"><span class="string">事物.txt</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"></span><br><span class="line">res1=subprocess.Popen(<span class="string">'ls /Users/jieli/Desktop'</span>,shell=<span class="keyword">True</span>,stdout=subprocess.PIPE)</span><br><span class="line">res=subprocess.Popen(<span class="string">'grep txt$'</span>,shell=<span class="keyword">True</span>,stdin=res1.stdout,</span><br><span class="line">                 stdout=subprocess.PIPE)</span><br><span class="line"></span><br><span class="line">print(res.stdout.read().decode(<span class="string">'utf-8'</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#等同于上面,但是上面的优势在于,一个数据流可以和另外一个数据流交互,可以通过爬虫得到结果然后交给grep</span></span><br><span class="line">res1=subprocess.Popen(<span class="string">'ls /Users/jieli/Desktop |grep txt$'</span>,shell=<span class="keyword">True</span>,stdout=subprocess.PIPE)</span><br><span class="line">print(res1.stdout.read().decode(<span class="string">'utf-8'</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#windows下:</span></span><br><span class="line"><span class="comment"># dir | findstr 'test*'</span></span><br><span class="line"><span class="comment"># dir | findstr 'txt$'</span></span><br><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line">res1=subprocess.Popen(<span class="string">r'dir C:\Users\Administrator\PycharmProjects\test\函数备课'</span>,shell=<span class="keyword">True</span>,stdout=subprocess.PIPE)</span><br><span class="line">res=subprocess.Popen(<span class="string">'findstr test*'</span>,shell=<span class="keyword">True</span>,stdin=res1.stdout,</span><br><span class="line">                 stdout=subprocess.PIPE)</span><br><span class="line"></span><br><span class="line">print(res.stdout.read().decode(<span class="string">'gbk'</span>)) <span class="comment">#subprocess使用当前系统默认编码，得到结果为bytes类型，在windows下需要用gbk解码</span></span><br></pre></td></tr></table></figure>
<h4 id="logging"><a href="#logging" class="headerlink" title="logging"></a><code>logging</code></h4><h5 id="日志级别"><a href="#日志级别" class="headerlink" title="日志级别"></a>日志级别</h5><ul>
<li><code>CRITICAL</code>：<code>50</code>，特别严重的问题，导致程序不能再继续运行时使用，一般很少使用，如:磁盘空间为空。<code>FATAL = CRITICAL</code></li>
<li><code>ERROR</code>：<code>40</code>，程序出错误时使用，如:IO操作失败</li>
<li><code>WARNING</code>：<code>30</code>，默认，程序未按预期运行时使用，但并不是错误，如:用户登录密码错误，<code>FATAL = CRITICAL</code></li>
<li><code>INFO</code>：<code>20</code>，程序正常运行时使用</li>
<li><code>DEBUG</code>：<code>10</code>，程序调试bug时使用</li>
<li><code>NOTSET</code>：<code>0</code>，不设置</li>
</ul>
<blockquote>
<p>日志等级从低到高的顺序是: DEBUG &lt; INFO &lt; WARNING &lt; ERROR &lt; CRITICAL</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">import logging</span><br><span class="line"></span><br><span class="line">logging.debug(&apos;调试debug&apos;)</span><br><span class="line">logging.info(&apos;消息info&apos;)</span><br><span class="line">logging.warning(&apos;警告warn&apos;)</span><br><span class="line">logging.error(&apos;错误error&apos;)</span><br><span class="line">logging.critical(&apos;严重critical&apos;)</span><br></pre></td></tr></table></figure>
<h5 id="全局配置"><a href="#全局配置" class="headerlink" title="全局配置"></a>全局配置</h5><p><code>logging.basicConfig()</code>：通过具体参数来更改logging模块默认行为，指定全局配置，针对所有logger有效，控制打印到文件中，参数如下</p>
<ul>
<li><code>filename</code>：用指定的文件名创建FiledHandler，这样日志会被存储在指定的文件中。</li>
<li><code>filemode</code>：文件打开方式，在指定了filename时使用这个参数，默认值为“a”还可指定为“w”。</li>
<li><code>format</code>：指定handler使用的日志显示格式。可能用到的格式化串如下<ul>
<li><code>%(name)s</code>：Logger的名字</li>
<li><code>%(levelno)s</code>：数字形式的日志级别</li>
<li><code>%(levelname)s</code>：文本形式的日志级别</li>
<li><code>%(pathname)s</code>：调用日志输出函数的模块的完整路径名，可能没有</li>
<li><code>%(filename)s</code>：调用日志输出函数的模块的文件名</li>
<li><code>%(module)s</code>：调用日志输出函数的模块名</li>
<li><code>%(funcName)s</code>：调用日志输出函数的函数名</li>
<li><code>%(lineno)d</code>：调用日志输出函数的语句所在的代码行</li>
<li><code>%(created)f</code>：当前时间，用UNIX标准的表示时间的浮 点数表示</li>
<li><code>%(relativeCreated)d</code>：输出日志信息时的，自Logger创建以 来的毫秒数</li>
<li><code>%(asctime)s</code>：字符串形式的当前时间。默认格式是 “2003-07-08 16:49:45,896”。逗号后面的是毫秒</li>
<li><code>%(thread)d</code>：线程ID。可能没有</li>
<li><code>%(threadName)s</code>：线程名。可能没有</li>
<li><code>%(process)d</code>：进程ID。可能没有</li>
<li><code>%(message)s</code>：用户输出的消息</li>
</ul>
</li>
<li><code>datefmt</code>：指定日期时间格式。</li>
<li><code>level</code>：设置rootlogger的日志级别。</li>
<li><code>stream</code>：用指定的stream创建StreamHandler。可以指定输出到sys.stderr,sys.stdout或者文件，默认为sys.stderr。若同时列出了filename和stream两个参数，则stream参数会被忽略。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> logging</span><br><span class="line">logging.basicConfig(filename=<span class="string">'access.log'</span>,</span><br><span class="line">                    format=<span class="string">'%(asctime)s - %(name)s - %(levelname)s -%(module)s:  %(message)s'</span>,</span><br><span class="line">                    datefmt=<span class="string">'%Y-%m-%d %H:%M:%S %p'</span>,</span><br><span class="line">                    level=<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">logging.debug(<span class="string">'调试debug'</span>)</span><br><span class="line">logging.info(<span class="string">'消息info'</span>)</span><br><span class="line">logging.warning(<span class="string">'警告warn'</span>)</span><br><span class="line">logging.error(<span class="string">'错误error'</span>)</span><br><span class="line">logging.critical(<span class="string">'严重critical'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">access.log内容:</span></span><br><span class="line"><span class="string">2017-07-28 20:32:17 PM - root - DEBUG -test:  调试debug</span></span><br><span class="line"><span class="string">2017-07-28 20:32:17 PM - root - INFO -test:  消息info</span></span><br><span class="line"><span class="string">2017-07-28 20:32:17 PM - root - WARNING -test:  警告warn</span></span><br><span class="line"><span class="string">2017-07-28 20:32:17 PM - root - ERROR -test:  错误error</span></span><br><span class="line"><span class="string">2017-07-28 20:32:17 PM - root - CRITICAL -test:  严重critical</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">part2: 可以为logging模块指定模块级的配置,即所有logger的配置</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<h5 id="Formatter，Handler，Logger，Filter对象"><a href="#Formatter，Handler，Logger，Filter对象" class="headerlink" title="Formatter，Handler，Logger，Filter对象"></a>Formatter，Handler，Logger，Filter对象</h5><ul>
<li><code>logger</code>：产生日志的对象。然后交给Filter过滤，然后交给不同的Handler输出</li>
<li><code>Filter</code>：过滤日志的对象，不常用</li>
<li><code>Handler</code>：接收日志然后控制打印到不同的地方，FileHandler用来打印到文件中，StreamHandler用来打印到终端。</li>
<li><code>Formatter</code>：可以定制不同的日志格式对象，然后绑定给不同的Handler对象使用，以此来控制不同的Handler的日志格式</li>
</ul>
<p><img src="/2019/05/17/python3.0基础/python3.0基础-20220815-15-36-36.png" alt="logger流示意图"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># logger对象</span></span><br><span class="line">logger=logging.getLogger(__file__)</span><br><span class="line"><span class="comment"># Handler对象</span></span><br><span class="line">h1=logging.FileHandler(<span class="string">'t1.log'</span>) <span class="comment"># 打印到文件</span></span><br><span class="line">h3=logging.StreamHandler() <span class="comment"># 打印到终端</span></span><br><span class="line"><span class="comment"># Formatter对象</span></span><br><span class="line">formmater1=logging.Formatter(<span class="string">'%(asctime)s - %(name)s - %(levelname)s -%(module)s:  %(message)s'</span>,</span><br><span class="line">                    datefmt=<span class="string">'%Y-%m-%d %H:%M:%S %p'</span>,)</span><br><span class="line">formmater3=logging.Formatter(<span class="string">'%(name)s %(message)s'</span>,)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 为Handler对象绑定格式</span></span><br><span class="line">h1.setFormatter(formmater1)</span><br><span class="line">h3.setFormatter(formmater3)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将Handler添加给logger并设置日志级别</span></span><br><span class="line">logger.addHandler(h1)</span><br><span class="line">logger.addHandler(h3)</span><br><span class="line">logger.setLevel(<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试</span></span><br><span class="line">logger.debug(<span class="string">'debug'</span>)</span><br><span class="line">logger.info(<span class="string">'info'</span>)</span><br><span class="line">logger.warning(<span class="string">'warning'</span>)</span><br><span class="line">logger.error(<span class="string">'error'</span>)</span><br><span class="line">logger.critical(<span class="string">'critical'</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>logger是第一级过滤，然后是filter和handler，我们可以给logger和handler同时设置level</p>
</blockquote>
<h5 id="Logger的继承"><a href="#Logger的继承" class="headerlink" title="Logger的继承"></a>Logger的继承</h5><p><code>Logger=logging.getLogger([name])</code>：<code>name</code>是这个Logger实例的名称，默认<code>root</code>。</p>
<ul>
<li><code>Logger.name</code>查看Logger实例的名称。</li>
<li><code>name</code>：使用<code>.</code>分隔的多级结构。比如：名称为foo的logger，那么诸如foo.bar、foo.bar.baz和foo.bam这样的logger都是它的子logger。</li>
<li>子logger会自动继承父logger的定义和配置。</li>
<li>使用相同的名称多次调用<code>logging.getLogger([name])</code>方法，会返回同一个logger对象的引用。<strong>在同一个Python解释器进程的多个module内都有效</strong></li>
</ul>
<blockquote>
<p>应用程序可以在一个module中定义一个父logger，然后在其他module中继承这个logger，而不必把所有的logger都配置一遍。</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"></span><br><span class="line">formatter=logging.Formatter(<span class="string">'%(asctime)s - %(name)s - %(levelname)s -%(module)s:  %(message)s'</span>,</span><br><span class="line">                    datefmt=<span class="string">'%Y-%m-%d %H:%M:%S %p'</span>,)</span><br><span class="line"></span><br><span class="line">ch=logging.StreamHandler()</span><br><span class="line">ch.setFormatter(formatter)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">logger1=logging.getLogger(<span class="string">'root'</span>)</span><br><span class="line">logger2=logging.getLogger(<span class="string">'root.child1'</span>)</span><br><span class="line">logger3=logging.getLogger(<span class="string">'root.child1.child2'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">logger1.addHandler(ch)</span><br><span class="line">logger2.addHandler(ch)</span><br><span class="line">logger3.addHandler(ch)</span><br><span class="line">logger1.setLevel(<span class="number">10</span>)</span><br><span class="line">logger2.setLevel(<span class="number">10</span>)</span><br><span class="line">logger3.setLevel(<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">logger1.debug(<span class="string">'log1 debug'</span>)</span><br><span class="line">logger2.debug(<span class="string">'log2 debug'</span>)</span><br><span class="line">logger3.debug(<span class="string">'log3 debug'</span>)</span><br><span class="line"></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">2022-08-15 16:27:29 PM - root - DEBUG -1:  log1 debug</span></span><br><span class="line"><span class="string">2022-08-15 16:27:29 PM - root.child1 - DEBUG -1:  log2 debug</span></span><br><span class="line"><span class="string">2022-08-15 16:27:29 PM - root.child1 - DEBUG -1:  log2 debug</span></span><br><span class="line"><span class="string">2022-08-15 16:27:29 PM - root.child1.child2 - DEBUG -1:  log3 debug</span></span><br><span class="line"><span class="string">2022-08-15 16:27:29 PM - root.child1.child2 - DEBUG -1:  log3 debug</span></span><br><span class="line"><span class="string">2022-08-15 16:27:29 PM - root.child1.child2 - DEBUG -1:  log3 debug</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<h5 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h5><ul>
<li>logging配置文件</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">logging配置</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> logging.config</span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义三种日志输出格式 开始</span></span><br><span class="line"></span><br><span class="line">standard_format = <span class="string">'[%(asctime)s][%(threadName)s:%(thread)d][task_id:%(name)s][%(filename)s:%(lineno)d]'</span> \</span><br><span class="line">                  <span class="string">'[%(levelname)s][%(message)s]'</span> <span class="comment">#其中name为getlogger指定的名字</span></span><br><span class="line"></span><br><span class="line">simple_format = <span class="string">'[%(levelname)s][%(asctime)s][%(filename)s:%(lineno)d]%(message)s'</span></span><br><span class="line"></span><br><span class="line">id_simple_format = <span class="string">'[%(levelname)s][%(asctime)s] %(message)s'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义日志输出格式 结束</span></span><br><span class="line"></span><br><span class="line">logfile_dir = os.path.dirname(os.path.abspath(__file__))  <span class="comment"># log文件的目录</span></span><br><span class="line"></span><br><span class="line">logfile_name = <span class="string">'all2.log'</span>  <span class="comment"># log文件名</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果不存在定义的日志目录就创建一个</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> os.path.isdir(logfile_dir):</span><br><span class="line">    os.mkdir(logfile_dir)</span><br><span class="line"></span><br><span class="line"><span class="comment"># log文件的全路径</span></span><br><span class="line">logfile_path = os.path.join(logfile_dir, logfile_name)</span><br><span class="line"></span><br><span class="line"><span class="comment"># log配置字典</span></span><br><span class="line">LOGGING_DIC = &#123;</span><br><span class="line">    <span class="string">'version'</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">'disable_existing_loggers'</span>: <span class="keyword">False</span>,</span><br><span class="line">    <span class="string">'formatters'</span>: &#123;</span><br><span class="line">        <span class="string">'standard'</span>: &#123;</span><br><span class="line">            <span class="string">'format'</span>: standard_format</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">'simple'</span>: &#123;</span><br><span class="line">            <span class="string">'format'</span>: simple_format</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">'filters'</span>: &#123;&#125;,</span><br><span class="line">    <span class="string">'handlers'</span>: &#123;</span><br><span class="line">        <span class="comment">#打印到终端的日志</span></span><br><span class="line">        <span class="string">'console'</span>: &#123;</span><br><span class="line">            <span class="string">'level'</span>: <span class="string">'DEBUG'</span>,</span><br><span class="line">            <span class="string">'class'</span>: <span class="string">'logging.StreamHandler'</span>,  <span class="comment"># 打印到屏幕</span></span><br><span class="line">            <span class="string">'formatter'</span>: <span class="string">'simple'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">#打印到文件的日志,收集info及以上的日志</span></span><br><span class="line">        <span class="string">'default'</span>: &#123;</span><br><span class="line">            <span class="string">'level'</span>: <span class="string">'DEBUG'</span>,</span><br><span class="line">            <span class="string">'class'</span>: <span class="string">'logging.handlers.RotatingFileHandler'</span>,  <span class="comment"># 保存到文件</span></span><br><span class="line">            <span class="string">'formatter'</span>: <span class="string">'standard'</span>,</span><br><span class="line">            <span class="string">'filename'</span>: logfile_path,  <span class="comment"># 日志文件</span></span><br><span class="line">            <span class="string">'maxBytes'</span>: <span class="number">1024</span>*<span class="number">1024</span>*<span class="number">5</span>,  <span class="comment"># 日志大小 5M</span></span><br><span class="line">            <span class="string">'backupCount'</span>: <span class="number">5</span>,</span><br><span class="line">            <span class="string">'encoding'</span>: <span class="string">'utf-8'</span>,  <span class="comment"># 日志文件的编码，再也不用担心中文log乱码了</span></span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">'loggers'</span>: &#123;</span><br><span class="line">        <span class="comment"># getLogger([name])未找到，默认使用key=''的配置，因此不同logger名的logger对象都能共用这段配置</span></span><br><span class="line">        <span class="comment"># 应用场景，logging.getLogger(__name__)，不同的文件__name__不同，使用统一配置，又保证了打印日志时标识信息不同</span></span><br><span class="line">        <span class="string">''</span>: &#123;</span><br><span class="line">            <span class="string">'handlers'</span>: [<span class="string">'default'</span>, <span class="string">'console'</span>],  <span class="comment"># 这里把上面定义的两个handler都加上，即log数据既写入文件又打印到屏幕</span></span><br><span class="line">            <span class="string">'level'</span>: <span class="string">'DEBUG'</span>,</span><br><span class="line">            <span class="string">'propagate'</span>: <span class="keyword">True</span>,  <span class="comment"># 向上（更高level的logger）传递</span></span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">load_my_logging_cfg</span><span class="params">()</span>:</span></span><br><span class="line">    logging.config.dictConfig(LOGGING_DIC)  <span class="comment"># 导入上面定义的logging配置</span></span><br><span class="line">    logger = logging.getLogger(__name__)  <span class="comment"># 生成一个log实例</span></span><br><span class="line">    logger.info(<span class="string">'It works!'</span>)  <span class="comment"># 记录该文件的运行状态</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    load_my_logging_cfg()</span><br></pre></td></tr></table></figure>
<ul>
<li>使用</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">复制代码</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">MyLogging Test</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"><span class="keyword">import</span> my_logging  <span class="comment"># 导入自定义的logging配置</span></span><br><span class="line"></span><br><span class="line">logger = logging.getLogger(__name__)  <span class="comment"># 生成logger实例</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">demo</span><span class="params">()</span>:</span></span><br><span class="line">    logger.debug(<span class="string">"start range... time:&#123;&#125;"</span>.format(time.time()))</span><br><span class="line">    logger.info(<span class="string">"中文测试开始。。。"</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">        logger.debug(<span class="string">"i:&#123;&#125;"</span>.format(i))</span><br><span class="line">        time.sleep(<span class="number">0.2</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        logger.debug(<span class="string">"over range... time:&#123;&#125;"</span>.format(time.time()))</span><br><span class="line">    logger.info(<span class="string">"中文测试结束。。。"</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    my_logging.load_my_logging_cfg()  <span class="comment"># 在你程序文件的入口加载自定义logging配置</span></span><br><span class="line">    demo()</span><br></pre></td></tr></table></figure>
<h4 id="re-正则"><a href="#re-正则" class="headerlink" title="re(正则)"></a><code>re</code>(正则)</h4><p>模块提供的方法</p>
<ul>
<li><code>findall(regStr,str)</code>：返回所有满足匹配条件的结果,放在列表里</li>
<li><code>search(regStr,str).group()</code>：只到找到第一个匹配然后返回一个包含匹配信息的对象,该对象可以通过调用group()方法得到匹配的字符串,如果字符串没有匹配，则返回None。</li>
<li><code>match(regStr,str)</code>：在字符串开始处进行匹配，同<code>search</code>+<code>^</code></li>
<li><code>split(regStr,str)</code>：按匹配的内容分割</li>
<li><code>sub(regStr,replaceStr,str,n)</code>：替换内容，不传n，则默认替换所有</li>
<li><code>subn(regStr,replaceStr,str,n)</code>：同<code>sub</code>，不同在于返回元祖，第一项为替换后结果，第二项为总共替换的个数</li>
<li><code>compile(regStr)</code>：重用正则对象</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">re.findall(<span class="string">'e'</span>,<span class="string">'ccec aaae bbbe'</span>) <span class="comment"># ['e', 'e', 'e']</span></span><br><span class="line">re.search(<span class="string">'e'</span>,<span class="string">'ccec aaae bbbe'</span>).group() <span class="comment"># 'e'</span></span><br><span class="line">re.match(<span class="string">'e'</span>,<span class="string">'ccec aaae bbbe'</span>) <span class="comment"># None</span></span><br><span class="line">re.split(<span class="string">'[ab]'</span>,<span class="string">'abcd'</span>) <span class="comment"># ['', '', 'cd']</span></span><br><span class="line">re.sub(<span class="string">'a'</span>,<span class="string">'A'</span>,<span class="string">'ccec aaae bbbe'</span>) <span class="comment"># 'ccec AAAe bbbe'</span></span><br><span class="line">re.sub(<span class="string">'a'</span>,<span class="string">'A'</span>,<span class="string">'ccec aaae bbbe'</span>,<span class="number">1</span>) <span class="comment"># 'ccec Aaae bbbe'</span></span><br><span class="line">re.sub(<span class="string">'a'</span>,<span class="string">'A'</span>,<span class="string">'ccec aaae bbbe'</span>,<span class="number">2</span>) <span class="comment"># 'ccec AAae bbbe'</span></span><br><span class="line">re.subn(<span class="string">'a'</span>,<span class="string">'A'</span>,<span class="string">'ccec aaae bbbe'</span>) <span class="comment"># ('ccec AAAe bbbe', 3)</span></span><br><span class="line"></span><br><span class="line">obj=re.compile(<span class="string">'\d&#123;2&#125;'</span>)</span><br><span class="line">obj.search(<span class="string">'abc123eeee'</span>).group() <span class="comment"># 12</span></span><br><span class="line">obj.findall(<span class="string">'abc123eeee'</span>) <span class="comment"># ['12']</span></span><br></pre></td></tr></table></figure>
<h2 id="包"><a href="#包" class="headerlink" title="包"></a>包</h2><p><img src="/2019/05/17/python3.0基础/python3.0基础-20220816-10-32-13.png" alt="包概览"></p>
<p>一种把模块组织到一起的方法，即创建一个包。包就是一个含有<code>__init__.py</code>文件的文件夹，文件夹内可以组织子模块或子包</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">pool/                #顶级包</span><br><span class="line">├── __init__.py     </span><br><span class="line">├── futures          #子包</span><br><span class="line">│   ├── __init__.py</span><br><span class="line">│   ├── process.py</span><br><span class="line">│   └── thread.py</span><br><span class="line">└── versions.py      #子模块</span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li>在python3中，即使包下没有<code>__init__.py</code>文件，import 包仍然不会报错，而在python2中，包下一定要有该文件，否则import 包报错</li>
<li>创建包的目的不是为了运行，而是被导入使用，包的本质是模块的模块的一种形式</li>
</ul>
</blockquote>
<h3 id="导入包"><a href="#导入包" class="headerlink" title="导入包"></a>导入包</h3><ul>
<li>包就是一个包含有<strong>init</strong>.py文件的文件夹</li>
<li><strong>导入包本质就是在导入<strong>init</strong>.py文件</strong>。</li>
<li>包属于模块的一种，因而包以及包内的模块均是用来被导入使用的，而绝非被直接执行。首次导入包（如import pool）同样会做三件事：<ol>
<li>产生一个名称空间</li>
<li>运行包下的<strong>init</strong>.py文件，将运行过程中产生的名字都丢到1的名称空间中</li>
<li>在当前执行文件所在的名称空间中得到一个名字pool，该名字指向<strong>init</strong>.py的名称空间，例如pool.xxx和pool.yyy中的xxx和yyy都是来自于pool下的<strong>init</strong>.py，也就是说<strong>导入包时并不会导入包下所有的子模块与子包</strong></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li>关于包相关的导入语句也分为import和from … import …两种，但是无论哪种，无论在什么位置，在导入时都必须遵循一个原则：凡是在导入时带点的，点的左边都必须是一个包，否则非法。可以带有一连串的点，如import 顶级包.子包.子模块,但都必须遵循这个原则。但对于导入后，在使用时就没有这种限制了，点的左边可以是包,模块，函数，类(它们都可以用点的方式调用自己的属性)。</li>
<li>包A和包B下有同名模块也不会冲突，如A.a与B.a来自俩个命名空间</li>
<li>import包，产生的名称空间的名字同样来源于文件，即包下的<strong>init</strong>.py，<strong>导入包本质就是在导入<strong>init</strong>.py文件</strong></li>
</ul>
</blockquote>
<h3 id="绝对导入与相对导入"><a href="#绝对导入与相对导入" class="headerlink" title="绝对导入与相对导入"></a>绝对导入与相对导入</h3><p>包内的模块之间互相导入的方式有两种</p>
<ul>
<li>绝对导入：以顶级包为起始</li>
<li>相对导入：<code>.</code>代表当前文件所在的目录，<code>..</code>代表当前目录的上一级目录，依此类推</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 绝对导入</span></span><br><span class="line"><span class="keyword">from</span> pool <span class="keyword">import</span> versions <span class="comment"># pool下的__init__.py</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 相对导入</span></span><br><span class="line"><span class="comment"># 操作pool下的__init__.py，保证pool.futures</span></span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> futures <span class="comment">#或from pool import futures</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#操作futrues下的__init__.py，保证pool.futures.process</span></span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> process <span class="comment">#或from pool.futures import process</span></span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li>相对导入只能在包内部使用，用相对导入不同包下的模块是非法的，而且取上X级不能出包</li>
<li>无论是import还是from-import，但凡是在导入时带点的，点的左边必须是包,否则语法错误</li>
<li>使用语句中的点代表的是访问属性，<code>m.n.x ----&gt; 向m要n，向n要x</code>；导入语句中的点代表的是路径分隔符，<code>import a.b.c --&gt; a/b/c</code>，文件夹下a下有子文件夹b，文件夹b下有子文件或文件夹c，所以导入语句中点的左边必须是一个包</li>
</ul>
</blockquote>
<h3 id="from-包-import"><a href="#from-包-import" class="headerlink" title="from 包 import *"></a><code>from 包 import *</code></h3><ul>
<li>在使用包时同样支持<code>from pool.futures import *</code> ，毫无疑问*代表的是futures下<strong>init</strong>.py中所有的名字，</li>
<li>通用是用变量<code>__all__</code>来控制*代表的意思</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># futures下的__init__.py</span></span><br><span class="line">__all__=[<span class="string">'process'</span>,<span class="string">'thread'</span>]</span><br></pre></td></tr></table></figure>
<h2 id="类-class"><a href="#类-class" class="headerlink" title="类(class)"></a>类(class)</h2><p><img src="/2019/05/17/python3.0基础/python3.0基础-20220816-10-42-00.png" alt="面向对象概览"></p>
<h3 id="类的定义与实例化"><a href="#类的定义与实例化" class="headerlink" title="类的定义与实例化"></a>类的定义与实例化</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>:</span> <span class="comment"># 类的命名应该使用“驼峰体”</span></span><br><span class="line"></span><br><span class="line">    school=<span class="string">'清华大学'</span> <span class="comment"># 数据</span></span><br><span class="line">    <span class="comment">#该方法会在对象产生之后自动执行，专门为对象进行初始化操作，可以有任意代码，但一定不能返回非None的值</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name,sex,age)</span>:</span></span><br><span class="line">        self.name=name</span><br><span class="line">        self.sex=sex</span><br><span class="line">        self.age=age</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">choose</span><span class="params">(self)</span>:</span> <span class="comment"># 功能</span></span><br><span class="line">        print(<span class="string">'%s is choosing a course'</span> %self.name)</span><br><span class="line"> <span class="comment"># 每实例化一次Student类就得到一个学生对象，会产生对象的名称空间，同样可以用__dict__查看</span></span><br><span class="line">stu1=Student(<span class="string">'李建刚'</span>,<span class="string">'男'</span>,<span class="number">28</span>)</span><br><span class="line">stu2=Student(<span class="string">'王大力'</span>,<span class="string">'女'</span>,<span class="number">18</span>)</span><br><span class="line">stu3=Student(<span class="string">'牛嗷嗷'</span>,<span class="string">'男'</span>,<span class="number">38</span>)</span><br><span class="line">print(stu1.__dict__) <span class="comment"># &#123;'name': '李建刚', 'sex': '男', 'age': 28&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="属性访问"><a href="#属性访问" class="headerlink" title="属性访问"></a>属性访问</h3><h4 id="类属性与对象属性"><a href="#类属性与对象属性" class="headerlink" title="类属性与对象属性"></a>类属性与对象属性</h4><ul>
<li>对象的名称空间里只存放着对象独有的属性，而对象们相似的属性是存放于类中的。</li>
<li>类中定义的变量是类的数据属性，是共享给所有对象用的，指向相同的内存地址</li>
<li>属性查找顺序：对象在访问属性时，会优先从对象本身的<strong>dict</strong>中查找，未找到，则去类的<strong>dict</strong>中查找</li>
<li>类中定义的函数是类的函数属性，类可以使用，但必须遵循函数的参数规则，有几个参数需要传几个参数</li>
</ul>
<p><img src="/2019/05/17/python3.0基础/python3.0基础-20220726-09-37-31.png" alt="属性查找顺序"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 访问数据属性，等同于Student.__dict__['school']</span></span><br><span class="line">Student.school </span><br><span class="line"><span class="comment"># 查看，等同于obj1.__dict__['name']</span></span><br><span class="line">stu1.name</span><br><span class="line"><span class="comment"># 访问数据属性，等同于Student.__dict__['school']</span></span><br><span class="line">Student.choose</span><br><span class="line"></span><br><span class="line"><span class="comment"># 类中定义的变量是类的数据属性，是共享给所有对象用的，指向相同的内存地址</span></span><br><span class="line">print(id(Student.school)) <span class="comment"># 4301108704</span></span><br><span class="line"></span><br><span class="line">print(id(stu1.school)) <span class="comment"># 4301108704</span></span><br><span class="line">print(id(stu2.school)) <span class="comment"># 4301108704</span></span><br><span class="line">print(id(stu3.school)) <span class="comment"># 4301108704</span></span><br></pre></td></tr></table></figure>
<h4 id="绑定方法"><a href="#绑定方法" class="headerlink" title="绑定方法"></a>绑定方法</h4><ul>
<li>类中定义的函数绑定给对象，内存地址不同</li>
<li>绑定到对象的方法特殊之处在于，绑定给谁就由谁来调用，谁来调用，就会将’谁’本身当做第一个参数自动传入（方法<strong>init</strong>也是一样的道理）</li>
</ul>
<blockquote>
<p><strong>绑定到对象方法的这种自动传值的特征，决定了在类中定义的函数都要默认写一个参数self，self可以是任意名字，但命名为<code>self</code>是约定俗成的。</strong></p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 类中定义的函数绑定给对象，内存地址不同</span></span><br><span class="line">print(id(Student.choose)) <span class="comment"># 4335426280</span></span><br><span class="line"></span><br><span class="line">print(id(stu1.choose)) <span class="comment"># 4300433608</span></span><br><span class="line">print(id(stu2.choose)) <span class="comment"># 4300433608</span></span><br><span class="line">print(id(stu3.choose)) <span class="comment"># 4300433608</span></span><br><span class="line"></span><br><span class="line">stu1.choose()  <span class="comment"># 等同于Student.choose(stu1)</span></span><br><span class="line">stu2.choose()  <span class="comment"># 等同于Student.choose(stu2)</span></span><br><span class="line">stu3.choose()  <span class="comment"># 等同于Student.choose(stu3)</span></span><br></pre></td></tr></table></figure>
<h3 id="封装"><a href="#封装" class="headerlink" title="封装"></a>封装</h3><p><img src="/2019/05/17/python3.0基础/python3.0基础-20220816-10-44-13.png" alt="封装概览"></p>
<h4 id="隐藏属性"><a href="#隐藏属性" class="headerlink" title="隐藏属性"></a>隐藏属性</h4><ul>
<li>隐藏数据属性是为了限制类外部对数据的直接操作</li>
<li>隐藏函数属性是为了隔离复杂度</li>
</ul>
<p>Python的Class机制采用双下划线开头的方式将属性隐藏起来（设置成私有的），<code>__属性名__</code>，但其实这仅仅只是一种变形操作，类中所有双下滑线开头的属性都会在类定义阶段、检测语法时自动变成<code>_类名__属性名</code>的形式</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span>:</span></span><br><span class="line">    __N=<span class="number">0</span> <span class="comment"># 变形为_Foo__N</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span> <span class="comment"># 定义函数时，会检测函数语法，所以__开头的属性也会变形</span></span><br><span class="line">        self.__x=<span class="number">10</span> <span class="comment"># 变形为self._Foo__x</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__f1</span><span class="params">(self)</span>:</span> <span class="comment"># 变形为_Foo__f1</span></span><br><span class="line">        print(<span class="string">'__f1 run'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">f2</span><span class="params">(self)</span>:</span>  <span class="comment"># 定义函数时，会检测函数语法，所以__开头的属性也会变形</span></span><br><span class="line">        self.__f1() <span class="comment">#变形为self._Foo__f1()</span></span><br><span class="line"></span><br><span class="line">print(Foo.__N) <span class="comment"># 报错AttributeError:类Foo没有属性__N</span></span><br><span class="line"></span><br><span class="line">obj = Foo()</span><br><span class="line">print(obbj.__x) <span class="comment"># 报错AttributeError:对象obj没有属性__x</span></span><br><span class="line">print(obbj._Foo__x) <span class="comment"># 10</span></span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li>在类外部无法直接访问双下滑线开头的属性，但知道了类名和属性名就可以拼出名字<code>_类名__属性</code></li>
<li>在类内部是可以直接访问双下滑线开头的属性的，比如self.__f1()，因为在类定义阶段类内部双下滑线开头的属性统一发生了变形。</li>
<li>变形操作只在类定义阶段发生一次,在类定义之后的赋值操作，不会变形。</li>
</ul>
</blockquote>
<h4 id="开放接口"><a href="#开放接口" class="headerlink" title="开放接口"></a>开放接口</h4><p>类内应该提供相应的接口来允许类外部间接地操作数据，接口之上可以附加额外的逻辑来对数据的操作进行严格地控制</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Teacher</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name,age)</span>:</span> <span class="comment">#将名字和年纪都隐藏起来</span></span><br><span class="line">        self.__name=name</span><br><span class="line">        self.__age=age</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">tell_info</span><span class="params">(self)</span>:</span> <span class="comment">#对外提供访问老师信息的接口</span></span><br><span class="line">        print(<span class="string">'姓名:%s,年龄:%s'</span> %(self.__name,self.__age))</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">set_info</span><span class="params">(self,name,age)</span>:</span> <span class="comment">#对外提供设置老师信息的接口，并附加类型检查的逻辑</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> isinstance(name,str):</span><br><span class="line">            <span class="keyword">raise</span> TypeError(<span class="string">'姓名必须是字符串类型'</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> isinstance(age,int):</span><br><span class="line">            <span class="keyword">raise</span> TypeError(<span class="string">'年龄必须是整型'</span>)</span><br><span class="line">        self.__name=name</span><br><span class="line">        self.__age=age</span><br></pre></td></tr></table></figure>
<h3 id="类内的装饰器"><a href="#类内的装饰器" class="headerlink" title="类内的装饰器"></a>类内的装饰器</h3><h4 id="property"><a href="#property" class="headerlink" title="@property"></a>@property</h4><p>装饰器property，可以将类中的函数“伪装成”对象的数据属性，对象在访问该特殊属性时会触发功能的执行，然后将返回值作为本次访问的结果</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">People</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name,weight,height)</span>:</span></span><br><span class="line">        self.name=name</span><br><span class="line">        self.weight=weight</span><br><span class="line">        self.height=height</span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">bmi</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.weight / (self.height**<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">obj=People(<span class="string">'lili'</span>,<span class="number">75</span>,<span class="number">1.85</span>)</span><br><span class="line"><span class="comment"># 触发方法bmi的执行，将obj自动传给self，执行后返回值作为本次引用的结果</span></span><br><span class="line">obj.bmi <span class="comment"># 21.913805697589478</span></span><br></pre></td></tr></table></figure>
<h4 id="setter"><a href="#setter" class="headerlink" title="@setter"></a>@setter</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,val)</span>:</span></span><br><span class="line">        self.__NAME=val <span class="comment">#将属性隐藏起来</span></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">name</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.__NAME</span><br><span class="line"><span class="meta">    @name.setter</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">name</span><span class="params">(self,value)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> isinstance(value,str):  <span class="comment">#在设定值之前进行类型检查</span></span><br><span class="line">            <span class="keyword">raise</span> TypeError(<span class="string">'%s must be str'</span> %value)</span><br><span class="line">        self.__NAME=value <span class="comment">#通过类型检查后,将值value存放到真实的位置self.__NAME</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 触发name.setter装饰器对应的函数name(f,’Egon')</span></span><br><span class="line">f.name=<span class="string">'LiLi'</span> </span><br><span class="line"><span class="comment"># 触发name.setter对应的的函数name(f,123),抛出异常TypeError</span></span><br><span class="line">f.name=<span class="number">123</span></span><br></pre></td></tr></table></figure>
<h4 id="deleter"><a href="#deleter" class="headerlink" title="@deleter"></a>@deleter</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,val)</span>:</span></span><br><span class="line">        self.__NAME=val <span class="comment">#将属性隐藏起来</span></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">name</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.__NAME</span><br><span class="line"><span class="meta">    @name.deleter</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">name</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">raise</span> PermissionError(<span class="string">'Can not delete'</span>)</span><br><span class="line"><span class="comment"># 触发name.deleter对应的函数name(f),抛出异常PermissionError</span></span><br><span class="line"><span class="keyword">del</span> f.name</span><br></pre></td></tr></table></figure>
<h4 id="classmethod"><a href="#classmethod" class="headerlink" title="@classmethod"></a>@classmethod</h4><p>见 <a href="#绑定方法与非绑定方法">绑定到类的类方法</a></p>
<h4 id="staticmethod"><a href="#staticmethod" class="headerlink" title="@staticmethod"></a>@staticmethod</h4><p>见 <a href="#绑定方法与非绑定方法">非绑定方法</a></p>
<h3 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h3><p><img src="/2019/05/17/python3.0基础/python3.0基础-20220816-10-44-51.png" alt="继承和派生概览"></p>
<p>继承是一种创建新类的方式，用来解决类与类之间代码冗余问题，在Python中，新建的类可以继承一个或多个父类，新建的类可称为子类或派生类，父类又可称为基类或超类</p>
<ul>
<li>类的内置属性<code>__bases__</code>可以查看类继承的所有父类</li>
</ul>
<blockquote>
<p>不建议使用多继承，有可能会引发可恶的菱形问题，扩展性变差，如果不可避免，应该使用Mixins，见下文</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ParentClass1</span>:</span> <span class="comment">#定义父类</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ParentClass2</span>:</span> <span class="comment">#定义父类</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubClass1</span><span class="params">(ParentClass1)</span>:</span> <span class="comment">#单继承</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubClass2</span><span class="params">(ParentClass1,ParentClass2)</span>:</span> <span class="comment">#多继承</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">print(SubClass2.__bases__) <span class="comment"># (&lt;class '__main__.ParentClass1'&gt;, &lt;class '__main__.ParentClass2'&gt;)</span></span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li>在Python2中有经典类与新式类之分，没有显式地继承object类的类，以及该类的子类，都是经典类，显式地继承object的类，以及该类的子类，都是新式类</li>
<li>在Python3中所有的类都是新式类，即使没有显式地继承object，也会默认继承该类</li>
</ul>
</blockquote>
<h4 id="属性查找"><a href="#属性查找" class="headerlink" title="属性查找"></a>属性查找</h4><p>对象自己的<strong>dict</strong>&gt;&gt;子类&gt;&gt;父类，复杂情况见下文</p>
<blockquote>
<p>父类如果不想让子类找到自己的属性，可以采用双下划线开头的方式将属性设置为私有的</p>
</blockquote>
<h4 id="菱形问题"><a href="#菱形问题" class="headerlink" title="菱形问题"></a>菱形问题</h4><p>多继承，即一个子类是可以同时继承多个父类的，可能引发著名的 Diamond problem菱形问题(或称钻石问题，有时候也被称为“死亡钻石”)</p>
<p><img src="/2019/05/17/python3.0基础/python3.0基础-20220726-15-05-36.png" alt="菱形问题"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># A中有一个方法，B和/或C都重写了该方法，而D没有重写它，那么D继承的是哪个版本的方法：B的还是C的</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'from A'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span><span class="params">(A)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'from B'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span><span class="params">(A)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'from C'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">D</span><span class="params">(B,C)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">obj = D()</span><br><span class="line">obj.test() <span class="comment"># 结果为：from B</span></span><br></pre></td></tr></table></figure>
<h4 id="继承原理"><a href="#继承原理" class="headerlink" title="继承原理"></a>继承原理</h4><p>对于定义的每一个类，Python都会计算出一个方法解析顺序(MRO)列表，该MRO列表就是一个简单的所有基类的线性顺序列表，如</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 新式类内置了mro方法可以查看线性列表的内容，经典类没有该内置该方法</span></span><br><span class="line">D.mro() <span class="comment"># [&lt;class '__main__.D'&gt;, &lt;class '__main__.B'&gt;, &lt;class '__main__.C'&gt;, &lt;class '__main__.A'&gt;, &lt;class 'object'&gt;]</span></span><br></pre></td></tr></table></figure>
<p>MRO列表的构造是通过一个C3线性化算法来实现的。我们不去深究这个算法的数学原理,它实际上就是合并所有父类的MRO列表并遵循如下三条准则</p>
<ul>
<li>子类会先于父类被检查</li>
<li>多个父类会根据它们在列表中的顺序被检查</li>
<li>如果对下一个类存在两个合法的选择,选择第一个父类</li>
</ul>
<blockquote>
<ul>
<li>由对象发起的属性查找，会从对象自身的属性里检索，没有则会按照对象的类.mro()规定的顺序依次找下去</li>
<li>由类发起的属性查找，会按照当前类.mro()规定的顺序依次找下去</li>
</ul>
</blockquote>
<h4 id="经典类与新式类区别"><a href="#经典类与新式类区别" class="headerlink" title="经典类与新式类区别"></a>经典类与新式类区别</h4><ul>
<li>多继承结构为非菱形结构，查找属性按深度优先<br><img src="/2019/05/17/python3.0基础/python3.0基础-20220726-15-16-41.png" alt="非菱形结构，深度优先"></li>
<li>多继承结构为菱形结构<ul>
<li>经典类，深度优先，<code>obj-&gt;A-&gt;B-&gt;E-&gt;G-&gt;C-&gt;F-&gt;D-&gt;object</code><br><img src="/2019/05/17/python3.0基础/python3.0基础-20220726-15-19-47.png" alt="经典类，深度优先"></li>
<li>新式类，广度优先，<code>obj-&gt;A-&gt;B-&gt;E-&gt;C-&gt;F-&gt;D-&gt;G-&gt;object</code><br><img src="/2019/05/17/python3.0基础/python3.0基础-20220726-15-20-46.png" alt="新式类，广度优先"></li>
</ul>
</li>
</ul>
<h4 id="Mixins机制-多继承的正确打开方式"><a href="#Mixins机制-多继承的正确打开方式" class="headerlink" title="Mixins机制(多继承的正确打开方式)"></a>Mixins机制(多继承的正确打开方式)</h4><p>mixins机制核心：就是在多继承背景下尽可能地提升多继承的可读性。<br>使用Mixin类实现多重继承要非常小心。<strong>Mixins机制本质仍是多继承，但同样遵守”is-a”关系</strong></p>
<ul>
<li>首先它必须表示某一种功能，而不是某个物品，python 对于mixin类的命名方式一般以 Mixin, able, ible 为后缀</li>
<li>其次它必须责任单一，如果有多个功能，那就写多个Mixin类，一个类可以继承多个Mixin，为了保证遵循继承的“is-a”原则，只能继承一个标识其归属含义的父类</li>
<li>然后，它不依赖于子类的实现</li>
<li>最后，子类即便没有继承这个Mixin类，也照样可以工作，就是缺少了某个功能。（比如飞机照样可以载客，就是不能飞了）</li>
</ul>
<blockquote>
<ul>
<li>通常Mixin结果的类放在其他父类的左边</li>
<li>采用某种规范（如命名规范）来解决具体的问题是python惯用的套路</li>
</ul>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Vehicle</span>:</span>  <span class="comment"># 交通工具</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FlyableMixin</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fly</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">'''</span></span><br><span class="line"><span class="string">        飞行功能相应的代码        </span></span><br><span class="line"><span class="string">        '''</span></span><br><span class="line">        print(<span class="string">"I am flying"</span>)</span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CivilAircraft</span><span class="params">(FlyableMixin, Vehicle)</span>:</span>  <span class="comment"># 民航飞机</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Helicopter</span><span class="params">(FlyableMixin, Vehicle)</span>:</span>  <span class="comment"># 直升飞机</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Car</span><span class="params">(Vehicle)</span>:</span>  <span class="comment"># 汽车</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># ps: 采用某种规范（如命名规范）来解决具体的问题是python惯用的套路</span></span><br></pre></td></tr></table></figure>
<h4 id="派生与方法重用"><a href="#派生与方法重用" class="headerlink" title="派生与方法重用"></a>派生与方法重用</h4><p>子类可以派生出自己新的属性，在进行属性查找时，子类中的属性名会优先于父类被查找，在子类派生的新方法中重用父类的功能。</p>
<ul>
<li>调用具体某个类的函数。这种方式和继承没有关系</li>
<li><code>super()</code>：调用super()会得到一个特殊的对象，该对象专门用来引用父类的属性，且严格按照MRO规定的顺序向后查找。这种方式依赖于继承，并且即使没有直接继承关系，super()仍然会按照MRO继续往后查找</li>
</ul>
<blockquote>
<p>在Python2中super的使用需要完整地写成<code>super(自己的类名,self)</code></p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Teacher</span><span class="params">(People)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name,sex,age,title)</span>:</span></span><br><span class="line">        People.__init__(self,name,age,sex) <span class="comment">#调用的是函数,因而需要传入self</span></span><br><span class="line">        self.title=title</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">teach</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'%s is teaching'</span> %self.name)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Teacher</span><span class="params">(People)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name,sex,age,title)</span>:</span></span><br><span class="line">        super().__init__(name,age,sex) <span class="comment">#调用的是绑定方法，自动传入self</span></span><br><span class="line">        self.title=title</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">teach</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'%s is teaching'</span> %self.name)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>两种方式的区别：方式一是跟继承没有关系的，而方式二的super()是依赖于继承的，并且即使没有直接继承关系，super()仍然会按照MRO继续往后查找</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'from A'</span>)</span><br><span class="line">        super().test()</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'from B'</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span><span class="params">(A,B)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 在代码层面A并不是B的子类，但从MRO列表来看，属性查找时，就是按照顺序C-&gt;A-&gt;B-&gt;object，B就相当于A的“父类”</span></span><br><span class="line">print(C.mro()) <span class="comment"># [&lt;class '__main__.C'&gt;, &lt;class '__main__.A'&gt;, &lt;class '__main__.B'&gt;, &lt;class 'object'&gt;]</span></span><br><span class="line">obj=C()</span><br><span class="line">obj.test()</span><br><span class="line"><span class="comment"># from A</span></span><br><span class="line"><span class="comment"># from B</span></span><br></pre></td></tr></table></figure>
<h3 id="组合"><a href="#组合" class="headerlink" title="组合"></a>组合</h3><p>在一个类中以另外一个类的对象作为数据属性，称为类的组合。组合与继承都是用来解决代码的重用性问题。不同的是：继承是一种“是”的关系，比如老师是人、学生是人，当类之间有很多相同的之处，应该使用继承；而组合则是一种“有”的关系，比如老师有生日，老师有多门课程，当类之间有显著不同，并且较小的类是较大的类所需要的组件时，应该使用组合</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Course</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name,period,price)</span>:</span></span><br><span class="line">        self.name=name</span><br><span class="line">        self.period=period</span><br><span class="line">        self.price=price</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">tell_info</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'&lt;%s %s %s&gt;'</span> %(self.name,self.period,self.price))</span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Date</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,year,mon,day)</span>:</span></span><br><span class="line">        self.year=year</span><br><span class="line">        self.mon=mon</span><br><span class="line">        self.day=day</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">tell_birth</span><span class="params">(self)</span>:</span></span><br><span class="line">       print(<span class="string">'&lt;%s-%s-%s&gt;'</span> %(self.year,self.mon,self.day))</span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">People</span>:</span></span><br><span class="line">    school=<span class="string">'清华大学'</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name,sex,age)</span>:</span></span><br><span class="line">        self.name=name</span><br><span class="line">        self.sex=sex</span><br><span class="line">        self.age=age</span><br><span class="line"> </span><br><span class="line"><span class="comment">#Teacher类基于继承来重用People的代码，基于组合来重用Date类和Course类的代码</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Teacher</span><span class="params">(People)</span>:</span> <span class="comment">#老师是人</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name,sex,age,title,year,mon,day)</span>:</span></span><br><span class="line">        super().__init__(name,age,sex)</span><br><span class="line">        self.birth=Date(year,mon,day) <span class="comment">#老师有生日</span></span><br><span class="line">        self.courses=[] <span class="comment">#老师有课程，可以在实例化后，往该列表中添加Course类的对象</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">teach</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'%s is teaching'</span> %self.name)</span><br><span class="line"> </span><br><span class="line">python=Course(<span class="string">'python'</span>,<span class="string">'3mons'</span>,<span class="number">3000.0</span>)</span><br><span class="line">linux=Course(<span class="string">'linux'</span>,<span class="string">'5mons'</span>,<span class="number">5000.0</span>)</span><br><span class="line">teacher1=Teacher(<span class="string">'lili'</span>,<span class="string">'female'</span>,<span class="number">28</span>,<span class="string">'博士生导师'</span>,<span class="number">1990</span>,<span class="number">3</span>,<span class="number">23</span>)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># teacher1有两门课程</span></span><br><span class="line">teacher1.courses.append(python)</span><br><span class="line">teacher1.courses.append(linux)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 重用Date类的功能</span></span><br><span class="line">teacher1.birth.tell_birth()</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 重用Course类的功能</span></span><br><span class="line"><span class="keyword">for</span> obj <span class="keyword">in</span> teacher1.courses: </span><br><span class="line">    obj.tell_info()</span><br></pre></td></tr></table></figure>
<h3 id="多态性"><a href="#多态性" class="headerlink" title="多态性"></a>多态性</h3><p><img src="/2019/05/17/python3.0基础/python3.0基础-20220816-10-45-41.png" alt="多态性概览"></p>
<ul>
<li>多态性指的是可以在不用考虑对象具体类型的情况下而直接使用对象，</li>
<li>本质在于不同的类中定义有相同的方法名，这样我们就可以不考虑类而统一用一种方式去使用对象</li>
<li>Python中一切皆对象，本身就支持多态性</li>
<li>好处在于增强了程序的灵活性和可扩展性</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 我们可以在不考虑三者类型的情况下直接使用统计三个对象的长度</span></span><br><span class="line">s.__len__()</span><br><span class="line">l.__len__()</span><br><span class="line">t.__len__()</span><br><span class="line"></span><br><span class="line"><span class="comment"># Python内置了一个统一的接口</span></span><br><span class="line">len(s)</span><br><span class="line">len(l)</span><br><span class="line">len(t)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>鸭子类型：我们完全可以不依赖于继承，只需要制造出外观和行为相同对象，同样可以实现不考虑对象类型而使用对象，这正是Python崇尚的“鸭子类型”（duck typing）：“如果看起来像、叫声像而且走起路来像鸭子，那么它就是鸭子”。比起继承的方式，鸭子类型在某种程度上实现了程序的松耦合度</p>
</blockquote>
<h4 id="抽象类"><a href="#抽象类" class="headerlink" title="抽象类"></a>抽象类</h4><p>硬性限制子类必须有某些方法名</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> abc</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定metaclass属性将类设置为抽象类，抽象类本身只是用来约束子类的，不能被实例化</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span><span class="params">(metaclass=abc.ABCMeta)</span>:</span></span><br><span class="line"><span class="meta">    @abc.abstractmethod # 该装饰器限制子类必须定义有一个名为talk的方法</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">talk</span><span class="params">(self)</span>:</span> <span class="comment"># 抽象方法中无需实现具体的功能</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span><span class="params">(Animal)</span>:</span> <span class="comment"># 但凡继承Animal的子类都必须遵循Animal规定的标准</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">talk</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">cat=Cat() <span class="comment"># 若子类中没有一个名为talk的方法则会抛出异常TypeError，无法实例化</span></span><br></pre></td></tr></table></figure>
<h3 id="绑定方法与非绑定方法"><a href="#绑定方法与非绑定方法" class="headerlink" title="绑定方法与非绑定方法"></a>绑定方法与非绑定方法</h3><p><img src="/2019/05/17/python3.0基础/python3.0基础-20220816-10-46-19.png" alt="绑定方法与非绑定方法概览"></p>
<p>​类中定义的函数分为两大类</p>
<ul>
<li><p>绑定方法</p>
<ul>
<li>绑定到对象的对象方法(默认)</li>
<li>绑定到类的类方法(加上装饰器<code>@classmethod</code>)：专门给类用的，自动传入的第一个参数是类本身</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 配置文件settings.py的内容</span></span><br><span class="line">HOST=<span class="string">'127.0.0.1'</span></span><br><span class="line">PORT=<span class="number">3306</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 类方法的应用</span></span><br><span class="line"><span class="keyword">import</span> settings</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MySQL</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,host,port)</span>:</span></span><br><span class="line">        self.host=host</span><br><span class="line">        self.port=port</span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">from_conf</span><span class="params">(cls)</span>:</span> <span class="comment"># 从配置文件中读取配置进行初始化</span></span><br><span class="line">        <span class="keyword">return</span> cls(settings.HOST,settings.PORT)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绑定到类的方法</span></span><br><span class="line">print(MySQL.from_conf) <span class="comment"># &lt;bound method MySQL.from_conf of &lt;class   ‘__main__.MySQL'&gt;&gt;</span></span><br><span class="line">conn=MySQL.from_conf() <span class="comment"># 调用类方法，自动将类MySQL当作第一个参数传给cls</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>非绑定方法(加上装饰器<code>@staticmethod</code>)：也称静态方法。该方法不与类或对象绑定，类与对象都可以来调用它，但它就是一个普通函数而已，因而<strong>没有自动传值</strong></p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> uuid</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MySQL</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,host,port)</span>:</span></span><br><span class="line">        self.id=self.create_id()</span><br><span class="line">        self.host=host</span><br><span class="line">        self.port=port</span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">create_id</span><span class="params">()</span>:</span></span><br><span class="line">        <span class="keyword">return</span> uuid.uuid1()</span><br><span class="line"></span><br><span class="line">conn=MySQL(<span class="string">'127.0.0.1'</span>,<span class="number">3306</span>)</span><br><span class="line">print(conn.id) <span class="comment"># 100365f6-8ae0-11e7-a51e-0088653ea1ec</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 类或对象来调用create_id发现都是普通函数，而非绑定到谁的方法</span></span><br><span class="line">print(MySQL.create_id) <span class="comment"># &lt;function MySQL.create_id at 0x1025c16a8&gt;</span></span><br><span class="line">print(conn.create_id) <span class="comment"># &lt;function MySQL.create_id at 0x1025c16a8&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>总结绑定方法与非绑定方法的使用：若类中需要一个功能，该功能的实现代码中需要引用对象则将其定义成对象方法、需要引用类则将其定义成类方法、无需引用类或对象则将其定义成静态方法。</p>
</blockquote>
<h3 id="反射机制"><a href="#反射机制" class="headerlink" title="反射机制"></a>反射机制</h3><p><img src="/2019/05/17/python3.0基础/python3.0基础-20220816-10-47-02.png" alt="反射和内置方法概览"></p>
<p>反射机制指的是在程序的运行状态中，对于任意一个类，都可以知道这个类的所有属性和方法；对于任意一个对象，都能够调用他的任意方法和属性。这种动态获取程序信息以及动态调用对象的功能称为反射机制。</p>
<ul>
<li><code>dir</code>：获取任意一个类或者对象的属性列表，列表中全为字符串格式</li>
<li><code>hasattr</code>、<code>getattr</code>、<code>setattr</code>、<code>delattr</code>：Python中一切皆对象，类和对象都可以被这四个函数操作，用法一样</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Teacher</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,full_name)</span>:</span></span><br><span class="line">        self.full_name =full_name</span><br><span class="line"></span><br><span class="line">t=Teacher(<span class="string">'Egon Lin'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 列表中查看到的属性全为字符串</span></span><br><span class="line">print(dir(t)) <span class="comment">#['__class__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__format__', '__ge__', '__getattribute__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__module__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__', 'full_name']</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># hasattr(object,'name')</span></span><br><span class="line"><span class="comment"># 按字符串'full_name'判断有无属性t.full_name</span></span><br><span class="line">hasattr(t,<span class="string">'full_name'</span>) <span class="comment"># True</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># getattr(object, 'name', default=None)</span></span><br><span class="line"><span class="comment"># 等同于t.full_name,不存在该属性则返回默认值None</span></span><br><span class="line">getattr(t,<span class="string">'full_name'</span>,<span class="keyword">None</span>) <span class="comment"># 'Egon Lin'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># setattr(x, 'y', v)</span></span><br><span class="line"><span class="comment"># 等同于t.age=18</span></span><br><span class="line">setattr(t,<span class="string">'age'</span>,<span class="number">18</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># delattr(x, 'y')</span></span><br><span class="line"><span class="comment"># 等同于del t.age</span></span><br><span class="line">delattr(t,<span class="string">'age'</span>) </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 反射的应用</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FtpServer</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">serve_forever</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">            inp=input(<span class="string">'input your cmd&gt;&gt;: '</span>).strip()</span><br><span class="line">            cmd,file=inp.split()</span><br><span class="line">            <span class="keyword">if</span> hasattr(self,cmd): <span class="comment"># 根据用户输入的cmd，判断对象self有无对应的方法属性</span></span><br><span class="line">                func=getattr(self,cmd) <span class="comment"># 根据字符串cmd，获取对象self对应的方法属性</span></span><br><span class="line">                func(file)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self,file)</span>:</span></span><br><span class="line">        print(<span class="string">'Downloading %s...'</span> %file)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">put</span><span class="params">(self,file)</span>:</span></span><br><span class="line">        print(<span class="string">'Uploading %s...'</span> %file)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>server=FtpServer()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>server.serve_forever()</span><br><span class="line">input your cmd&gt;&gt;: get a.txt</span><br><span class="line">Downloading a.txt...</span><br><span class="line">input your cmd&gt;&gt;: put a.txt</span><br><span class="line">Uploading a.txt...</span><br></pre></td></tr></table></figure>
<h3 id="内置方法-3"><a href="#内置方法-3" class="headerlink" title="内置方法"></a>内置方法</h3><p>Class机制内置了很多特殊的方法来帮助使用者高度定制自己的类，这些内置方法都是以双下划线开头和结尾的，会在满足某种条件时自动触发。</p>
<ul>
<li><code>__str__</code>：会在<strong>对象</strong>被打印时自动触发，print功能打印的就是它的返回值，我们通常基于方法来定制对象的打印信息，该方法<strong>必须返回字符串类型</strong></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">People</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name,age)</span>:</span></span><br><span class="line">        self.name=name</span><br><span class="line">        self.age=age</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'&lt;Name:%s Age:%s&gt;'</span> %(self.name,self.age) <span class="comment">#返回类型必须是字符串</span></span><br><span class="line"></span><br><span class="line">p=People(<span class="string">'lili'</span>,<span class="number">18</span>)</span><br><span class="line"><span class="comment">#触发p.__str__()，拿到返回值后进行打印</span></span><br><span class="line">print(p) <span class="comment"># &lt;Name:lili Age:18&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li><code>__del__</code>：会在对象被删除时自动触发。由于Python自带的垃圾回收机制会自动清理Python程序的资源，所以当一个对象只占用应用程序级资源时，完全没必要为对象定制<strong>del</strong>方法，但<strong>在产生一个对象的同时涉及到申请系统资源（比如系统打开的文件、网络连接等）的情况下</strong>，关于系统资源的回收，Python的垃圾回收机制便派不上用场了，需要我们为对象定制该方法，<strong>用来在对象被删除时自动触发回收系统资源的操作</strong></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MySQL</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,ip,port)</span>:</span></span><br><span class="line">        self.conn=connect(ip,port) <span class="comment"># 伪代码，发起网络连接，需要占用系统资源</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__del__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.conn.close() <span class="comment"># 关闭网络连接，回收系统资源</span></span><br><span class="line">        </span><br><span class="line"><span class="comment"># 在对象obj被删除时，自动触发obj.__del__()</span></span><br><span class="line">obj=MySQL(<span class="string">'127.0.0.1'</span>,<span class="number">3306</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li><code>__call__</code>：如果想让一个对象可以加括号调用，需要在该对象的类中添加这个方法。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__call__</span><span class="params">(self, *args, **kwargs)</span>:</span></span><br><span class="line">        print(self)</span><br><span class="line">        print(args)</span><br><span class="line">        print(kwargs)</span><br><span class="line"> </span><br><span class="line">obj=Foo()</span><br><span class="line"><span class="comment">#1、要想让obj这个对象变成一个可调用的对象，需要在该对象的类中定义一个方法__call__方法，该方法会在调用对象时自动触发</span></span><br><span class="line"><span class="comment">#2、调用obj的返回值就是__call__方法的返回值</span></span><br><span class="line">res=obj(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,x=<span class="number">1</span>,y=<span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li>对象()-&gt;类内的<strong>call</strong></li>
<li>类()-&gt;自定义元类内的<strong>call</strong></li>
<li>自定义元类()-&gt;内置元类<strong>call</strong></li>
</ul>
</blockquote>
<h3 id="元类"><a href="#元类" class="headerlink" title="元类"></a>元类</h3><p><img src="/2019/05/17/python3.0基础/python3.0基础-20220816-11-55-52.png" alt="元类概览"></p>
<p>用class关键字定义的类本身也是一个对象，负责产生该对象的类称之为元类（元类可以简称为类的类），内置的元类为<code>type</code>，调用元类<code>type(class_name,class_bases,class_dic)</code>，<code>type</code>参数(类的关键组成部分)如下</p>
<ul>
<li><code>class_name</code>：类名:,<code>class_name=&#39;StanfordTeacher&#39;</code></li>
<li><code>class_bases</code>：基类们，<code>class_bases=(object,)</code></li>
<li><code>class_dic</code>：类的名称空间，类的名称空间是执行类体代码而得到的</li>
</ul>
<p>class关键字创建类的过程<br><img src="/2019/05/17/python3.0基础/python3.0基础-20220831-21-38-28.png" alt="class关键字创建类的过程"></p>
<h4 id="自定义元类来控制类的产生"><a href="#自定义元类来控制类的产生" class="headerlink" title="自定义元类来控制类的产生"></a>自定义元类来控制类的产生</h4><p>自定义元类可以控制类的产生过程，类的产生过程其实就是元类的调用过程</p>
<ul>
<li>一个类没有声明自己的元类，默认他的元类就是type</li>
<li>除了使用内置元类type，我们也可以通过继承<code>type</code>来自定义元类，然后使用<code>metaclass</code>关键字参数为一个类指定元类</li>
<li><strong>只有继承了type类的类才是元类</strong></li>
</ul>
<blockquote>
<p>StanfordTeacher类的产生过程<br><code>StanfordTeacher=Mymeta(‘StanfordTeacher’,(object),{…})</code>，调用Mymeta就是调用<code>type.__call__</code>，<code>type.__call__</code>函数干了3件事</p>
<ul>
<li>先造一个空对象=&gt;StanfordTeacher,调用Mymeta类内的<code>__new__</code>方法</li>
<li>再调用Mymeta这个类内的<code>__init__</code>方法，完成初始化对象的操作</li>
<li>返回初始化好的对象</li>
</ul>
<p><strong>只要是调用类，那么会一次调用类内的<code>__new__</code>和类内的<code>__init__</code></strong></p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mymeta</span><span class="params">(type)</span>:</span> <span class="comment">#只有继承了type类才能称之为一个元类，否则就是一个普通的自定义类</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,class_name,class_bases,class_dic)</span>:</span></span><br><span class="line">        print(self) <span class="comment">#&lt;class '__main__.StanfordTeacher'&gt;</span></span><br><span class="line">        print(class_name) <span class="comment"># StanfordTeacher</span></span><br><span class="line">        print(class_bases) <span class="comment">#(&lt;class 'object'&gt;,)</span></span><br><span class="line">        print(class_dic) <span class="comment">#&#123;'__module__': '__main__', '__qualname__': 'StanfordTeacher', '__init__': &lt;function StanfordTeacher.__init__ at 0x102af5e40&gt;, 'say': &lt;function StanfordTeacher.say at 0x102af5ee0&gt;&#125;</span></span><br><span class="line">        super(Mymeta, self).__init__(class_name, class_bases, class_dic)  <span class="comment"># 重用父类的功能</span></span><br><span class="line"> </span><br><span class="line">        <span class="keyword">if</span> class_name.islower():</span><br><span class="line">            <span class="keyword">raise</span> TypeError(<span class="string">'类名%s请修改为驼峰体'</span> %class_name)</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">if</span> <span class="string">'__doc__'</span> <span class="keyword">not</span> <span class="keyword">in</span> class_dic <span class="keyword">or</span> len(class_dic[<span class="string">'__doc__'</span>].strip(<span class="string">' \n'</span>)) == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">raise</span> TypeError(<span class="string">'类中必须有文档注释，并且文档注释不能为空'</span>)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__new__</span><span class="params">(cls, *args, **kwargs)</span>:</span></span><br><span class="line">        <span class="comment"># 造Mymeta的对象</span></span><br><span class="line">        print(cls,args,kwargs) <span class="comment"># class '__main__.Mymeta'&gt; ('StanfordTeacher', (&lt;class 'object'&gt;,), &#123;'__module__': '__main__', '__qualname__': 'StanfordTeacher', '__init__': &lt;function StanfordTeacher.__init__ at 0x102af5e40&gt;, 'say': &lt;function StanfordTeacher.say at 0x102af5ee0&gt;&#125;) &#123;&#125;</span></span><br><span class="line">        <span class="keyword">return</span> super().__new__(cls,*args, **kwargs)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__call__</span><span class="params">(self, *args, **kwargs)</span>:</span></span><br><span class="line">        <span class="comment"># Mymeta.__call__=》干了3件事</span></span><br><span class="line">        <span class="comment"># 1、Mymeta.__call__函数内会先调用StanfordTeacher内的__new__</span></span><br><span class="line">        people_obj=self.__new__(self)</span><br><span class="line">        <span class="comment"># 2、Mymeta.__call__函数内会调用StanfordTeacher内的__init__</span></span><br><span class="line">        self.__init__(people_obj,*args, **kwargs)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># print('people对象的属性：',people_obj.__dict__)</span></span><br><span class="line">        people_obj.__dict__[<span class="string">'xxxxx'</span>]=<span class="number">11111</span></span><br><span class="line">        <span class="comment"># 3、Mymeta.__call__函数内会返回一个初始化好的对象</span></span><br><span class="line">        <span class="keyword">return</span> people_obj</span><br><span class="line"> </span><br><span class="line"><span class="comment"># StanfordTeacher=Mymeta('StanfordTeacher',(object),&#123;...&#125;)</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StanfordTeacher</span><span class="params">(object,metaclass=Mymeta)</span>:</span> </span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    类StanfordTeacher的文档注释</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    school=<span class="string">'Stanford'</span></span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name,age)</span>:</span></span><br><span class="line">        self.name=name</span><br><span class="line">        self.age=age</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">say</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'%s says welcome to the Stanford to learn Python'</span> %self.name)</span><br><span class="line"></span><br><span class="line">teacher=StanfordTeacher(<span class="string">'xxx'</span>,<span class="number">18</span>)</span><br></pre></td></tr></table></figure>
<h2 id="编码"><a href="#编码" class="headerlink" title="编码"></a>编码</h2><p><img src="/2019/05/17/python3.0基础/python3.0基础-20220816-10-12-47.png" alt="字符编码概览"></p>
<p>ASCII –&gt; GB2312 –&gt; GBK1.0 –&gt; GB18030<br>ASCII –&gt; UNICODE –&gt; UTF-8</p>
<ul>
<li>unicode：一个字符占2字节</li>
<li>UTF-8：对unicode的压缩和优化，可变长的字符编码集</li>
</ul>
<blockquote>
<p>python2中默认为ASCII，因为Python2的盛行是早于unicode，需要声明编码类型，文件首行写入<code># coding:utf-8</code>，<br>python3中默认为utf-8</p>
</blockquote>
<h2 id="文件处理"><a href="#文件处理" class="headerlink" title="文件处理"></a>文件处理</h2><p><img src="/2019/05/17/python3.0基础/python3.0基础-20220816-10-13-26.png" alt="文件处理概览"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. 打开文件，由应用程序向操作系统发起系统调用open(...)，操作系统打开该文件，对应一块硬盘空间，并返回一个文件对象赋值给一个变量f</span></span><br><span class="line">f=open(<span class="string">'a.txt'</span>,<span class="string">'r'</span>,encoding=<span class="string">'utf-8'</span>) <span class="comment">#默认打开模式就为r</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 调用文件对象下的读/写方法，会被操作系统转换为读/写硬盘的操作</span></span><br><span class="line">data=f.read()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 向操作系统发起关闭文件的请求，回收系统资源</span></span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>
<h3 id="close-资源回收"><a href="#close-资源回收" class="headerlink" title="close(资源回收)"></a>close(资源回收)</h3><p>打开一个文件包含两部分资源：</p>
<ul>
<li>操作系统打开的文件</li>
<li>应用程序的变量f</li>
</ul>
<p>操作完毕一个文件时，必须把与该文件的这两部分资源回收</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># del f一定要发生在f.close()之后，否则就会导致操作系统打开的文件无法关闭，白白占用资源</span></span><br><span class="line">f.close() <span class="comment"># 回收操作系统打开的文件资源</span></span><br><span class="line"><span class="comment"># print(f)</span></span><br><span class="line"><span class="comment"># f.read() # 变量f存在，但是不能再读了</span></span><br><span class="line"><span class="keyword">del</span> f <span class="comment"># 回收应用程序级的变量</span></span><br></pre></td></tr></table></figure>
<h3 id="with-上下文管理"><a href="#with-上下文管理" class="headerlink" title="with(上下文管理)"></a>with(上下文管理)</h3><p>在执行完子代码块后，with 会自动执行<code>f.close()</code>，回收操作系统打开的文件资源</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> open(<span class="string">'a.txt'</span>,<span class="string">'w'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 可同时打开多个文件，用逗号分隔开即可</span></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'a.txt'</span>,<span class="string">'r'</span>) <span class="keyword">as</span> read_f,open(<span class="string">'b.txt'</span>,<span class="string">'w'</span>) <span class="keyword">as</span> write_f:  </span><br><span class="line">    data = read_f.read()</span><br><span class="line">    write_f.write(data)</span><br></pre></td></tr></table></figure>
<h3 id="open-操作系统打开文件"><a href="#open-操作系统打开文件" class="headerlink" title="open(操作系统打开文件)"></a>open(操作系统打开文件)</h3><p><code>open(url,mode,encoding)</code>：操作系统打开文件(即对应一块硬盘空间)，并返回一个文件对象(又称文件句柄)</p>
<ul>
<li>url：文件路径</li>
<li>mode: 文件的操作模式，值如下<ul>
<li><code>r</code>：只读，默认模式。在文件不存在时则报错,文件存在时文件内指针直接跳到文件开头</li>
<li><code>w</code>：只写。在文件不存在时会创建空文档，文件存在会清空文件，文件指针跑到文件开头</li>
<li><code>a</code>：只追加写。在文件不存在时会创建空文档,文件存在会将文件指针直接移动到文件末尾</li>
<li><code>x</code>：只写。不常用，不可读；在文件不存在时会创建空文档，文件存在则报错</li>
<li><code>+</code>:与r/w/a之一结合使用，如<code>&#39;r+&#39;、&#39;rb+&#39;、&#39;r+b&#39;</code>，可读可写。在平时工作中，<strong>一般不用可读可写的模式</strong></li>
<li><code>t</code>：默认模式，<code>&#39;r&#39;</code>代表<code>&#39;rt&#39;</code>，必须与r/w/a之一结合使用，如<code>&#39;rt&#39;、&#39;wt&#39;、&#39;at&#39;</code>，文本模式，读写文件都是<strong>以字符串（unicode）为单位的，只能针对文本文件，必须指定encoding参数</strong></li>
<li><code>b</code>：必须与r/w/a之一结合使用，如<code>&#39;rb&#39;、&#39;wb&#39;、&#39;ab&#39;</code>，二进制模式，读写文件都是<strong>以bytes/二进制为单位的，可以针对所有文件，一定不能指定encoding参数</strong></li>
</ul>
</li>
<li>encoding：指定操作文本文件的字符编码。如果没有指定编码，那么打开文本文件的默认编码是操作系统规定的，操作系统会用自己的默认编码去打开文件，在windows下是gbk，在linux下是utf-8。文件以什么编码存的，就要以什么编码打开。</li>
</ul>
<blockquote>
<p>windows路径分隔符<code>\</code>有转义问题，解决：<code>open(r&#39;C:\a.txt\nb\c\d.txt&#39;)</code></p>
<p>w 模式与 a 模式的异同：</p>
<ul>
<li>相同点：在文件不关闭的情况下，连续的写入，后写的内容一定跟在前写内容的后面</li>
<li>不同点：以 a 模式重新打开文件，不会清空原文件内容，会将文件指针直接移动到文件末尾，新写的内容永远写在最后。以w模式重新打开文件，则会清空文件内容</li>
</ul>
<p>t 模式只能用于操作文本文件,无论读写，都应该以字符串为单位，而存取硬盘本质都是二进制的形式，当指定 t 模式时，内部帮我们做了编码与解码<br>b模式对比t模式:</p>
<ul>
<li>在操作纯文本文件方面t模式帮我们省去了编码与解码的环节，b模式则需要手动编码与解码，所以此时t模式更为方便</li>
<li>针对非文本文件（如图片、视频、音频等）只能使用b模式</li>
</ul>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># r</span></span><br><span class="line">inp_name=input(<span class="string">'请输入你的名字: '</span>).strip()</span><br><span class="line">inp_pwd=input(<span class="string">'请输入你的密码: '</span>).strip()</span><br><span class="line"><span class="keyword">with</span> open(<span class="string">r'db.txt'</span>,mode=<span class="string">'r'</span>,encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> f:</span><br><span class="line">        <span class="comment"># 把用户输入的名字与密码与读出内容做比对</span></span><br><span class="line">        u,p=line.strip(<span class="string">'\n'</span>).split(<span class="string">':'</span>)</span><br><span class="line">        <span class="keyword">if</span> inp_name == u <span class="keyword">and</span> inp_pwd == p:</span><br><span class="line">            print(<span class="string">'登录成功'</span>)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        print(<span class="string">'账号名或者密码错误'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># w</span></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'b.txt'</span>,mode=<span class="string">'w'</span>,encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(<span class="string">'你好\n'</span>)</span><br><span class="line">    f.write(<span class="string">'我好\n'</span>) </span><br><span class="line">    f.write(<span class="string">'大家好\n'</span>)</span><br><span class="line">    f.write(<span class="string">'111\n222\n333\n'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># a</span></span><br><span class="line">name=input(<span class="string">'username&gt;&gt;&gt;: '</span>).strip()</span><br><span class="line">pwd=input(<span class="string">'password&gt;&gt;&gt;: '</span>).strip()</span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'db1.txt'</span>,mode=<span class="string">'a'</span>,encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    info=<span class="string">'%s:%s\n'</span> %(name,pwd)</span><br><span class="line">    f.write(info)</span><br><span class="line"></span><br><span class="line"><span class="comment"># t</span></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'a.txt'</span>,mode=<span class="string">'rt'</span>,encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">     res=f.read() </span><br><span class="line">     print(type(res)) <span class="comment"># 输出结果为：&lt;class 'str'&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'a.txt'</span>,mode=<span class="string">'wt'</span>,encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    s=<span class="string">'abc'</span></span><br><span class="line">    f.write(s) <span class="comment"># 写入的也必须是字符串类型</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># b</span></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'1.mp4'</span>,mode=<span class="string">'rb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">     data=f.read()</span><br><span class="line">     print(type(data)) <span class="comment"># 输出结果为：&lt;class 'bytes'&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'a.txt'</span>,mode=<span class="string">'wb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    msg=<span class="string">"你好"</span></span><br><span class="line">    res=msg.encode(<span class="string">'utf-8'</span>) <span class="comment"># res为bytes类型</span></span><br><span class="line">    f.write(res) <span class="comment"># 在b模式下写入文件的只能是bytes类型</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 拷贝文件</span></span><br><span class="line">src_file=input(<span class="string">'源文件路径: '</span>).strip()</span><br><span class="line">dst_file=input(<span class="string">'目标文件路径: '</span>).strip()</span><br><span class="line"><span class="keyword">with</span> open(<span class="string">r'%s'</span> %src_file,mode=<span class="string">'rb'</span>) <span class="keyword">as</span> read_f,open(<span class="string">r'%s'</span> %dst_file,mode=<span class="string">'wb'</span>) <span class="keyword">as</span> write_f:</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> read_f:</span><br><span class="line">        <span class="comment"># print(line)</span></span><br><span class="line">        write_f.write(line)</span><br></pre></td></tr></table></figure>
<h3 id="操作文件的方法"><a href="#操作文件的方法" class="headerlink" title="操作文件的方法"></a>操作文件的方法</h3><p>读/写文件，应用程序对文件的读写请求都是在向操作系统发送，由操作系统控制硬盘把输入读入内存、或者写入硬盘</p>
<h4 id="读"><a href="#读" class="headerlink" title="读"></a>读</h4><ul>
<li><code>read</code>：读取所有内容，执行完该操作后，文件指针会移动到文件末尾<ul>
<li>参数:类型int，同一时刻读入多少到内存中，t模式下代表多少字符，b模式下代表多少Bytes</li>
</ul>
</li>
<li><code>readline</code>：读取一行内容，光标移动到第二行首部</li>
<li><code>readlines</code>：读取每一行内容，存放于列表中</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> open(<span class="string">r'g.txt'</span>,mode=<span class="string">'rt'</span>,encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    res1=f.readline()</span><br><span class="line">    res2=f.readline()</span><br><span class="line">    print(res2)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">r'g.txt'</span>,mode=<span class="string">'rt'</span>,encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    res=f.readlines()</span><br><span class="line">    print(res)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>read与freadlines都是将内容一次性读入内容，如果内容过大会导致内存溢出，若还想将内容全读入内存，则必须分多次读入，有两种实现方式</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 方式一：同一时刻只读入一行内容到内存中</span></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'a.txt'</span>,mode=<span class="string">'rt'</span>,encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> f:</span><br><span class="line">        print(line)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 方式二：同一时刻只读入固定Bytes到内存中</span></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'1.mp4'</span>,mode=<span class="string">'rb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">        <span class="comment"># 同一时刻只读入1024个Bytes到内存中</span></span><br><span class="line">        data=f.read(<span class="number">1024</span>) </span><br><span class="line">        <span class="keyword">if</span> len(data) == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        print(data)</span><br></pre></td></tr></table></figure>
<h4 id="写"><a href="#写" class="headerlink" title="写"></a>写</h4><ul>
<li><code>write</code>：写入内容，参数是字符串，需要自己写换行符</li>
<li><code>writelines</code>：写入内容，参数是列表</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 针对文本模式的写,需要自己写换行符</span></span><br><span class="line">f.write(<span class="string">'1111\n222\n'</span>)</span><br><span class="line">  <span class="comment"># 针对b模式的写,需要自己写换行符</span></span><br><span class="line">f.write(<span class="string">'1111\n222\n'</span>.encode(<span class="string">'utf-8'</span>))</span><br><span class="line"><span class="comment"># 文件模式</span></span><br><span class="line">f.writelines([<span class="string">'333\n'</span>,<span class="string">'444\n'</span>]) </span><br><span class="line"><span class="comment"># b模式 </span></span><br><span class="line">f.writelines([</span><br><span class="line">  bytes(<span class="string">'333\n'</span>,encoding=<span class="string">'utf-8'</span>),</span><br><span class="line">  <span class="string">'444\n'</span>.encode(<span class="string">'utf-8'</span>)</span><br><span class="line">])</span><br></pre></td></tr></table></figure>
<h4 id="其他文件对象上的方法"><a href="#其他文件对象上的方法" class="headerlink" title="其他文件对象上的方法"></a>其他文件对象上的方法</h4><ul>
<li><code>readable</code>：文件是否可读</li>
<li><code>writable</code>：文件是否可写</li>
<li><code>flush</code>：立刻将文件内容从内存刷到硬盘</li>
<li><code>tell</code>：查看当前文件指针距离文件开头的位置</li>
<li><code>seek</code>：主动控制文件内指针的移动，详见下文章节<a href="#控制文件内指针移动">控制文件内指针移动</a></li>
</ul>
<h4 id="文件对象上的属性"><a href="#文件对象上的属性" class="headerlink" title="文件对象上的属性"></a>文件对象上的属性</h4><ul>
<li><code>closed</code>：文件是否关闭</li>
<li><code>encoding</code>：文件字符编码，<strong>如果文件打开模式为b，则没有该属性</strong></li>
<li><code>name</code>：文件名</li>
</ul>
<h3 id="控制文件内指针移动"><a href="#控制文件内指针移动" class="headerlink" title="控制文件内指针移动"></a>控制文件内指针移动</h3><ul>
<li><code>seek</code>：主动控制文件内指针的移动<ul>
<li>第一个参数：指针移动的字节数，单位Bytes</li>
<li>第二个参数：模式控制，值如下<ul>
<li>0：代表指针移动的字节数是以文件开头为参照的，默认模式</li>
<li>1：指针移动的字节数是以当前所在的位置为参照的</li>
<li>2：针移动的字节数是以文件末尾的位置为参照的</li>
</ul>
</li>
</ul>
</li>
<li><code>tell</code>：查看当前文件指针距离文件开头的位置，单位Bytes</li>
</ul>
<blockquote>
<ul>
<li><strong>0模式可以在t或者b模式使用,而1跟2模式只能在b模式下用</strong></li>
<li>文件内指针的移动都是Bytes为单位的,唯一例外的是t模式下的read(n),n以字符为单位</li>
</ul>
</blockquote>
<h4 id="0模式"><a href="#0模式" class="headerlink" title="0模式"></a>0模式</h4><blockquote>
<p>由于在t模式下，会将读取的内容自动解码，所以必须保证移动指针后读取的内容是一个完整字符，否则解码失败</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># a.txt用utf-8编码，内容如下（abc各占1个字节，中文“你好”各占3个字节）</span></span><br><span class="line"><span class="comment"># abc你好</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'a.txt'</span>,mode=<span class="string">'rt'</span>,encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">   <span class="comment"># 参照文件开头移动了3个字节</span></span><br><span class="line">    f.seek(<span class="number">3</span>,<span class="number">0</span>)  </span><br><span class="line">    <span class="comment"># 查看当前文件指针距离文件开头的位置</span></span><br><span class="line">    print(f.tell()) <span class="comment"># 3</span></span><br><span class="line">    <span class="comment"># 从第3个字节的位置读到文件末尾</span></span><br><span class="line">    print(f.read()) <span class="comment"># '你好'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'a.txt'</span>,mode=<span class="string">'rb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.seek(<span class="number">6</span>,<span class="number">0</span>)</span><br><span class="line">    print(f.read().decode(<span class="string">'utf-8'</span>)) <span class="comment"># '好'</span></span><br></pre></td></tr></table></figure>
<h4 id="1模式"><a href="#1模式" class="headerlink" title="1模式"></a>1模式</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> open(<span class="string">'a.txt'</span>,mode=<span class="string">'rb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="comment"># 从当前位置往后移动3个字节，而此时的当前位置就是文件开头</span></span><br><span class="line">    f.seek(<span class="number">3</span>,<span class="number">1</span>)</span><br><span class="line">    print(f.tell()) <span class="comment"># 3</span></span><br><span class="line">     <span class="comment"># 从当前位置往后移动4个字节，而此时的当前位置为3</span></span><br><span class="line">    f.seek(<span class="number">4</span>,<span class="number">1</span>) </span><br><span class="line">    print(f.tell()) <span class="comment"># 7</span></span><br></pre></td></tr></table></figure>
<h4 id="2模式"><a href="#2模式" class="headerlink" title="2模式"></a>2模式</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># a.txt用utf-8编码，内容如下（abc各占1个字节，中文“你好”各占3个字节）</span></span><br><span class="line"><span class="comment"># abc你好</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'a.txt'</span>,mode=<span class="string">'rb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="comment"># 参照文件末尾移动0个字节， 即直接跳到文件末尾</span></span><br><span class="line">    f.seek(<span class="number">0</span>,<span class="number">2</span>)</span><br><span class="line">    print(f.tell()) <span class="comment"># 9</span></span><br><span class="line">    <span class="comment"># 参照文件末尾往前移动了3个字节</span></span><br><span class="line">    f.seek(<span class="number">-3</span>,<span class="number">2</span>)</span><br><span class="line">    print(f.read().decode(<span class="string">'utf-8'</span>)) <span class="comment"># '好'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'access.log'</span>,mode=<span class="string">'rb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.seek(<span class="number">0</span>,<span class="number">2</span>)</span><br><span class="line">    <span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">        line=f.readline()</span><br><span class="line">        <span class="keyword">if</span> len(line) == <span class="number">0</span>:</span><br><span class="line">            <span class="comment"># 没有内容，等0.5s后重新读取日志</span></span><br><span class="line">            time.sleep(<span class="number">0.5</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            print(line.decode(<span class="string">'utf-8'</span>),end=<span class="string">''</span>)</span><br></pre></td></tr></table></figure>
<h3 id="文件修改"><a href="#文件修改" class="headerlink" title="文件修改"></a>文件修改</h3><blockquote>
<ul>
<li>硬盘空间是无法修改的,硬盘中数据的更新都是用新内容覆盖旧内容</li>
<li>内存中的数据是可以修改的</li>
</ul>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 文件a.txt内容如下</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">张一蛋     山东    179    49    12344234523</span></span><br><span class="line"><span class="string">李二蛋     河北    163    57    13913453521</span></span><br><span class="line"><span class="string">王全蛋     山西    153    62    18651433422</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'a.txt'</span>,mode=<span class="string">'r+t'</span>,encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.seek(<span class="number">9</span>)</span><br><span class="line">    f.write(<span class="string">'&lt;妇女主任&gt;'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 文件修改后的内容如下</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">张一蛋&lt;妇女主任&gt; 179    49    12344234523</span></span><br><span class="line"><span class="string">李二蛋     河北    163    57    13913453521</span></span><br><span class="line"><span class="string">王全蛋     山西    153    62    18651433422</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<h4 id="文件修改方式一"><a href="#文件修改方式一" class="headerlink" title="文件修改方式一"></a>文件修改方式一</h4><p>将文件内容发一次性全部读入内存,然后在内存中修改完毕后再覆盖写回原文件</p>
<ul>
<li>优点: 在文件修改过程中同一份数据只有一份</li>
<li>缺点: 会过多地占用内存</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> open(<span class="string">'db.txt'</span>,mode=<span class="string">'rt'</span>,encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    data=f.read()</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'db.txt'</span>,mode=<span class="string">'wt'</span>,encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(data.replace(<span class="string">'aaa'</span>,<span class="string">'bbb'</span>))</span><br></pre></td></tr></table></figure>
<h4 id="文件修改方式二"><a href="#文件修改方式二" class="headerlink" title="文件修改方式二"></a>文件修改方式二</h4><p>以读的方式打开原文件,以写的方式打开一个临时文件,一行行读取原文件内容,修改完后写入临时文件…,删掉原文件,将临时文件重命名原文件名</p>
<ul>
<li>优点: 不会占用过多的内存</li>
<li>缺点: 在文件修改过程中同一份数据存了两份</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'db.txt'</span>,mode=<span class="string">'rt'</span>,encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> read_f,\</span><br><span class="line">        open(<span class="string">'.db.txt.swap'</span>,mode=<span class="string">'wt'</span>,encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> wrife_f:</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> read_f:</span><br><span class="line">        wrife_f.write(line.replace(<span class="string">'aaa'</span>,<span class="string">'bbb'</span>))</span><br><span class="line"></span><br><span class="line">os.remove(<span class="string">'db.txt'</span>)</span><br><span class="line">os.rename(<span class="string">'.db.txt.swap'</span>,<span class="string">'db.txt'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="异常"><a href="#异常" class="headerlink" title="异常"></a>异常</h2><p>异常是程序发生错误的信号。程序一旦出现错误，便会产生一个异常，若程序中没有处理它，就会抛出该异常，程序的运行也随之终止。</p>
<h3 id="异常特征"><a href="#异常特征" class="headerlink" title="异常特征"></a>异常特征</h3><ul>
<li>异常的追踪信息</li>
<li><p>异常的类型</p>
<ul>
<li>语法上的错误<code>SyntaxError</code>，<code>SyntaxError: invalid syntax</code></li>
<li><p>逻辑错误，常见如下</p>
<ul>
<li><code>TypeError</code>：数字类型无法与字符串类型相加，如<code>1+&#39;2&#39;</code></li>
<li><code>ValueError</code>：当字符串包含有非数字的值时，无法转成int类型，如<code>int(&#39;hello&#39;)</code></li>
<li><code>NameError</code>：引用了一个不存在的名字</li>
<li><code>IndexError</code>：索引超出列表的限制，如<code>[&#39;egon&#39;,&#39;aa&#39;][3]</code></li>
<li><code>KeyError</code>：引用了一个不存在的key，如<code>{&#39;name&#39;:&#39;egon&#39;}[&#39;age&#39;]</code></li>
<li><p><code>AttributeError</code>：引用的属性不存在，如</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line">Foo.x</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>ZeroDivisionError</code>：除数不能为0，如<code>1/0</code></p>
</li>
</ul>
</li>
</ul>
</li>
<li>异常的内容</li>
</ul>
<p><img src="/2019/05/17/python3.0基础/python3.0基础-20230915-13-22-21.png" alt="异常"></p>
<h3 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h3><p>为了保证程序的容错性与可靠性，即在遇到错误时有相应的处理机制不会任由程序崩溃掉，我们需要对异常进行处理，处理的基本形式为</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    被检测的代码块</span><br><span class="line"><span class="keyword">except</span> 异常类型<span class="number">1</span> <span class="keyword">as</span> e：</span><br><span class="line">    检测到异常，就执行这个位置的逻辑</span><br><span class="line"><span class="keyword">except</span> 异常类型<span class="number">2</span> <span class="keyword">as</span> e:</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line">......</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    其他类型的异常统一用此处的逻辑处理</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    如果被检测的子代码块没有异常发生，则会执行<span class="keyword">else</span>的子代码</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    无论被检测的子代码块有无异常发生，都会执行<span class="keyword">finally</span>的子代码</span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li><strong>else必须跟在except之后，不能单独存在</strong>，只有在被检测的代码块没有触发任何异常的情况下才会执行else的子代码块</li>
<li>可以使用<code>try-except-finally</code>、<code>try-finally</code>的形式。无论被检测的代码块是否触发异常，都会执行finally的子代码块，因此通常在finally的子代码块做一些回收资源的操作，比如关闭打开的文件、关闭数据库连接等</li>
</ul>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    print(<span class="string">'start...'</span>)</span><br><span class="line">    print(x) <span class="comment"># 引用了一个不存在的名字，触发异常NameError</span></span><br><span class="line">    print(<span class="string">'end...'</span>)</span><br><span class="line"><span class="keyword">except</span> NameError <span class="keyword">as</span> e: <span class="comment"># as语法将异常类型的值赋值给变量e，这样我们通过打印e便可以知道错误的原因</span></span><br><span class="line">    print(<span class="string">'异常值为：%s'</span> %e)</span><br><span class="line">print(<span class="string">'run other code...'</span>)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 执行结果为</span></span><br><span class="line"><span class="comment"># start...</span></span><br><span class="line"><span class="comment"># 异常值为：name 'x' is not defined</span></span><br><span class="line"><span class="comment"># run other code...</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">convert_int</span><span class="params">(obj)</span>:</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        res=int(obj)</span><br><span class="line">    <span class="keyword">except</span> (ValueError,TypeError):</span><br><span class="line">        print(<span class="string">'argument must be number or numeric string'</span>)</span><br><span class="line">        res=<span class="keyword">None</span></span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"> </span><br><span class="line">convert_int(<span class="string">'xxx'</span>) <span class="comment"># argument must be number or numeric string</span></span><br><span class="line">convert_int(&#123;<span class="string">'n'</span>:<span class="number">1</span>&#125;) <span class="comment"># argument must be number or numeric string</span></span><br></pre></td></tr></table></figure>
<h3 id="主动触发异常"><a href="#主动触发异常" class="headerlink" title="主动触发异常"></a>主动触发异常</h3><p>raise后必须是一个异常的类或者是异常的实例</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name,age)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> isinstance(name,str):</span><br><span class="line">            <span class="keyword">raise</span> TypeError(<span class="string">'name must be str'</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> isinstance(age,int):</span><br><span class="line">            <span class="keyword">raise</span> TypeError(<span class="string">'age must be int'</span>)</span><br><span class="line"> </span><br><span class="line">        self.name=name</span><br><span class="line">        self.age=age</span><br><span class="line"> </span><br><span class="line">stu1=Student(<span class="number">4573</span>,<span class="number">18</span>) <span class="comment"># TypeError: name must be str</span></span><br><span class="line">stu2=Student(<span class="string">'xxx'</span>,<span class="string">'18'</span>) <span class="comment"># TypeError: age must be int</span></span><br></pre></td></tr></table></figure>
<h3 id="自定义异常"><a href="#自定义异常" class="headerlink" title="自定义异常"></a>自定义异常</h3><p>在内置异常不够用的情况下，我们可以通过继承内置的异常类来自定义异常类</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PoolEmptyError</span><span class="params">(Exception)</span>:</span> <span class="comment"># 可以通过继承Exception来定义一个全新的异常</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,value=<span class="string">'The proxy source is exhausted'</span>)</span>:</span> <span class="comment"># 可以定制初始化方法</span></span><br><span class="line">        super(PoolEmptyError,self).__init__()</span><br><span class="line">        self.value=value</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span> <span class="comment"># 可以定义该方法用来定制触发异常时打印异常值的格式</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'&lt; %s &gt;'</span> %self.value</span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NetworkIOError</span><span class="params">(IOError)</span>:</span> <span class="comment"># 也可以在特定异常的基础上扩展一个相关的异常</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">raise</span> PoolEmptyError <span class="comment"># __main__.PoolEmptyError: &lt; The proxy source is exhausted &gt;</span></span><br><span class="line"><span class="keyword">raise</span> NetworkIOError(<span class="string">'连接被拒绝'</span>) <span class="comment"># __main__.NetworkIOError: 连接被拒绝</span></span><br></pre></td></tr></table></figure>
<h3 id="断言"><a href="#断言" class="headerlink" title="断言"></a>断言</h3><p>断言语句<code>assert expression</code>，断定表达式expression成立，否则触发异常AssertionError，与<code>raise-if-not</code>的语义相同，如下</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">age=<span class="string">'18'</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 若表达式isinstance(age,int)返回值为False则触发异常AssertionError</span></span><br><span class="line"><span class="keyword">assert</span> isinstance(age,int)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 等同于</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> isinstance(age,int):</span><br><span class="line">    <span class="keyword">raise</span> AssertionError</span><br></pre></td></tr></table></figure>
<h2 id="队列和堆栈"><a href="#队列和堆栈" class="headerlink" title="队列和堆栈"></a>队列和堆栈</h2><p>两种数据结构</p>
<p>队列：FIFO,先进先出</p>
<p>堆栈：LIFO,后进先出</p>
<h2 id="猴子补丁"><a href="#猴子补丁" class="headerlink" title="猴子补丁"></a>猴子补丁</h2><p>属性在运行时的动态替换，叫做猴子补丁（Monkey Patch）。核心就是用自己的代码替换所用模块的源代码。</p>
<ul>
<li>功能：拥有在模块运行时替换的功能, 例如: 一个函数对象赋值给另外一个函数对象(把函数原本的执行的功能给替换了)</li>
<li>优缺点：采用猴子补丁之后，如果发现不符合预期，那也可以快速撤掉补丁。带了便利的同时也有搞乱源代码的风险</li>
<li><p>应用场景：如果我们的程序中已经基于json模块编写了大量代码了，发现有一个模块ujson比它性能更高，但用法一样，我们肯定不会想所有的代码都换成ujson.dumps或者ujson.loads,那我们可能会想到这么做<code>import ujson as json</code>，但是这么做的需要每个文件都重新导入一下，维护成本依然很高。此时我们就可以用到猴子补丁了。只需要在入口处加上，之所以在入口处加，是因为模块在导入一次后，后续的导入便直接引用第一次的成果</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> ujson</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">monkey_patch_json</span><span class="params">()</span>:</span></span><br><span class="line">    json.__name__ = <span class="string">'ujson'</span></span><br><span class="line">    json.dumps = ujson.dumps</span><br><span class="line">    json.loads = ujson.loads</span><br><span class="line">monkey_patch_json()</span><br></pre></td></tr></table></figure>
</li>
</ul>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Python/" rel="tag"># Python</a>
          
            <a href="/tags/python/" rel="tag"># python</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/04/09/baidu地图-web/" rel="next" title="baidu地图-web">
                <i class="fa fa-chevron-left"></i> baidu地图-web
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/06/24/编程语言/" rel="prev" title="编程语言">
                编程语言 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">刘心怡</p>
              <p class="site-description motion-element" itemprop="description">Tomorrow will be better than today</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">65</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">39</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">40</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#介绍概览"><span class="nav-number">1.</span> <span class="nav-text">介绍概览</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#优缺点"><span class="nav-number">2.</span> <span class="nav-text">优缺点</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#优点"><span class="nav-number">2.1.</span> <span class="nav-text">优点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#缺点"><span class="nav-number">2.2.</span> <span class="nav-text">缺点</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#python版本"><span class="nav-number">3.</span> <span class="nav-text">python版本</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#python解释器"><span class="nav-number">4.</span> <span class="nav-text">python解释器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#命令行"><span class="nav-number">5.</span> <span class="nav-text">命令行</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#注释"><span class="nav-number">6.</span> <span class="nav-text">注释</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#变量"><span class="nav-number">7.</span> <span class="nav-text">变量</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#变量名的命名的规则"><span class="nav-number">7.1.</span> <span class="nav-text">变量名的命名的规则</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#变量值的三个重要特征"><span class="nav-number">7.2.</span> <span class="nav-text">变量值的三个重要特征</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#is与"><span class="nav-number">7.3.</span> <span class="nav-text">is与==</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#变量存储-amp-垃圾回收机制"><span class="nav-number">8.</span> <span class="nav-text">变量存储&amp;垃圾回收机制</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#变量的存储"><span class="nav-number">8.1.</span> <span class="nav-text">变量的存储</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#垃圾回收机制"><span class="nav-number">8.2.</span> <span class="nav-text">垃圾回收机制</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#引用计数（reference-counting）"><span class="nav-number">8.2.1.</span> <span class="nav-text">引用计数（reference counting）</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#引用计数的致命的弱点-循环引用（交叉引用）"><span class="nav-number">8.2.1.1.</span> <span class="nav-text">引用计数的致命的弱点:循环引用（交叉引用）</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#标记-amp-清除（mark-and-sweep）"><span class="nav-number">8.2.2.</span> <span class="nav-text">标记&amp;清除（mark and sweep）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#分代回收（generation-collection）"><span class="nav-number">8.2.3.</span> <span class="nav-text">分代回收（generation collection）</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#小整数池"><span class="nav-number">8.3.</span> <span class="nav-text">小整数池</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数据类型"><span class="nav-number">9.</span> <span class="nav-text">数据类型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#整数int-integer"><span class="nav-number">9.1.</span> <span class="nav-text">整数int(integer)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#类型转换及进制转换"><span class="nav-number">9.1.1.</span> <span class="nav-text">类型转换及进制转换</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#浮点数-小数-float"><span class="nav-number">9.2.</span> <span class="nav-text">浮点数(小数)(float)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#类型转换"><span class="nav-number">9.2.1.</span> <span class="nav-text">类型转换</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#复数-complex"><span class="nav-number">9.3.</span> <span class="nav-text">复数(complex)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#分数-fractions-Fraction"><span class="nav-number">9.4.</span> <span class="nav-text">分数(fractions.Fraction)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#字符串-str"><span class="nav-number">9.5.</span> <span class="nav-text">字符串(str)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#类型转换-1"><span class="nav-number">9.5.1.</span> <span class="nav-text">类型转换</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#索引-获取单个字符"><span class="nav-number">9.5.2.</span> <span class="nav-text">索引(获取单个字符)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#切片-获取子字符串"><span class="nav-number">9.5.3.</span> <span class="nav-text">切片(获取子字符串)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#长度"><span class="nav-number">9.5.4.</span> <span class="nav-text">长度</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#运算"><span class="nav-number">9.5.5.</span> <span class="nav-text">运算</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#内置方法"><span class="nav-number">9.5.6.</span> <span class="nav-text">内置方法</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#strip-lstrip-rstrip-移除首尾两侧特定字符"><span class="nav-number">9.5.6.1.</span> <span class="nav-text">strip,lstrip,rstrip(移除首尾两侧特定字符)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#split-rsplit-按分隔符切分列表"><span class="nav-number">9.5.6.2.</span> <span class="nav-text">split,rsplit(按分隔符切分列表)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#lower-upper-大小写转换"><span class="nav-number">9.5.6.3.</span> <span class="nav-text">lower,upper(大小写转换)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#startswith-endswith-判断首尾字符"><span class="nav-number">9.5.6.4.</span> <span class="nav-text">startswith,endswith(判断首尾字符)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#join-按分隔符拼接列表或字符串"><span class="nav-number">9.5.6.5.</span> <span class="nav-text">join(按分隔符拼接列表或字符串)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#replace-替换字符"><span class="nav-number">9.5.6.6.</span> <span class="nav-text">replace(替换字符)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#find-rfind-查找子字符索引"><span class="nav-number">9.5.6.7.</span> <span class="nav-text">find,rfind(查找子字符索引)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#index-rindex-查找子字符索引"><span class="nav-number">9.5.6.8.</span> <span class="nav-text">index,rindex(查找子字符索引)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#count-查找子字符出现次数"><span class="nav-number">9.5.6.9.</span> <span class="nav-text">count(查找子字符出现次数)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#center-ljust-rjust-zfill-填充字符"><span class="nav-number">9.5.6.10.</span> <span class="nav-text">center,ljust,rjust,zfill(填充字符)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#expandtabs-t制表符转换为几个空格"><span class="nav-number">9.5.6.11.</span> <span class="nav-text">expandtabs(\t制表符转换为几个空格)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#capitalize-swapcase-title-大小写转换"><span class="nav-number">9.5.6.12.</span> <span class="nav-text">capitalize,swapcase,title(大小写转换)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#is检查字符串内容"><span class="nav-number">9.5.6.13.</span> <span class="nav-text">is检查字符串内容</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#is检查数字"><span class="nav-number">9.5.6.13.1.</span> <span class="nav-text">is检查数字</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#is其他"><span class="nav-number">9.5.6.13.2.</span> <span class="nav-text">is其他</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#format"><span class="nav-number">9.5.6.14.</span> <span class="nav-text">format</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#格式化输出"><span class="nav-number">9.5.7.</span> <span class="nav-text">格式化输出</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#null"><span class="nav-number">9.5.7.1.</span> <span class="nav-text">%</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#format-1"><span class="nav-number">9.5.7.2.</span> <span class="nav-text">format</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#填充与格式化"><span class="nav-number">9.5.7.2.1.</span> <span class="nav-text">填充与格式化</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#精度与进制"><span class="nav-number">9.5.7.2.2.</span> <span class="nav-text">精度与进制</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#f"><span class="nav-number">9.5.7.3.</span> <span class="nav-text">f</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#字节字符串-bytes"><span class="nav-number">9.6.</span> <span class="nav-text">字节字符串(bytes)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#布尔值-bool"><span class="nav-number">9.7.</span> <span class="nav-text">布尔值(bool)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#空值-None"><span class="nav-number">9.8.</span> <span class="nav-text">空值(None)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#列表-list"><span class="nav-number">9.9.</span> <span class="nav-text">列表(list)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#类型转换-2"><span class="nav-number">9.9.1.</span> <span class="nav-text">类型转换</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#索引-存取值"><span class="nav-number">9.9.2.</span> <span class="nav-text">索引(存取值)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#切片-类似字符串"><span class="nav-number">9.9.3.</span> <span class="nav-text">切片(类似字符串)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#长度-类似字符串"><span class="nav-number">9.9.4.</span> <span class="nav-text">长度(类似字符串)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#运算-1"><span class="nav-number">9.9.5.</span> <span class="nav-text">运算</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#内置方法-1"><span class="nav-number">9.9.6.</span> <span class="nav-text">内置方法</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#append-尾部添加"><span class="nav-number">9.9.6.1.</span> <span class="nav-text">append(尾部添加)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#extend-合并列表，在尾部添加多个元素"><span class="nav-number">9.9.6.2.</span> <span class="nav-text">extend(合并列表，在尾部添加多个元素)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#insert-添加到指定位置"><span class="nav-number">9.9.6.3.</span> <span class="nav-text">insert(添加到指定位置)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#pop-按索引删除元素"><span class="nav-number">9.9.6.4.</span> <span class="nav-text">pop(按索引删除元素)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#remove-按值删除元素"><span class="nav-number">9.9.6.5.</span> <span class="nav-text">remove(按值删除元素)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#reverse-颠倒列表"><span class="nav-number">9.9.6.6.</span> <span class="nav-text">reverse(颠倒列表)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#sort-列表排序"><span class="nav-number">9.9.6.7.</span> <span class="nav-text">sort(列表排序)</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#元组-tuple"><span class="nav-number">9.10.</span> <span class="nav-text">元组(tuple)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#类型转换-3"><span class="nav-number">9.10.1.</span> <span class="nav-text">类型转换</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#字典-dict"><span class="nav-number">9.11.</span> <span class="nav-text">字典(dict)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#类型转换-4"><span class="nav-number">9.11.1.</span> <span class="nav-text">类型转换</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#key-存取值"><span class="nav-number">9.11.2.</span> <span class="nav-text">key(存取值)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#长度-1"><span class="nav-number">9.11.3.</span> <span class="nav-text">长度</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#运算-2"><span class="nav-number">9.11.4.</span> <span class="nav-text">运算</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#内置方法-2"><span class="nav-number">9.11.5.</span> <span class="nav-text">内置方法</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#keys-获取所有的key-、values-获取所有的value-，items-获取所有的键值对"><span class="nav-number">9.11.5.1.</span> <span class="nav-text">keys(获取所有的key)、values(获取所有的value)，items(获取所有的键值对)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#get-获取key对应value"><span class="nav-number">9.11.5.2.</span> <span class="nav-text">get(获取key对应value)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#pop-按key删除键值对"><span class="nav-number">9.11.5.3.</span> <span class="nav-text">pop(按key删除键值对)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#popitem-随机删除一组键值对"><span class="nav-number">9.11.5.4.</span> <span class="nav-text">popitem(随机删除一组键值对)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#fromkeys"><span class="nav-number">9.11.5.5.</span> <span class="nav-text">fromkeys</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#setdefault-设置默认值"><span class="nav-number">9.11.5.6.</span> <span class="nav-text">setdefault(设置默认值)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#clear-删除所有键值对"><span class="nav-number">9.11.5.7.</span> <span class="nav-text">clear(删除所有键值对)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#update-用新字典更新旧字典"><span class="nav-number">9.11.5.8.</span> <span class="nav-text">update(用新字典更新旧字典)</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#集合-set"><span class="nav-number">9.12.</span> <span class="nav-text">集合(set)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#类型转换-5"><span class="nav-number">9.12.1.</span> <span class="nav-text">类型转换</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#长度-2"><span class="nav-number">9.12.2.</span> <span class="nav-text">长度</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#运算-3"><span class="nav-number">9.12.3.</span> <span class="nav-text">运算</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#运用"><span class="nav-number">9.12.4.</span> <span class="nav-text">运用</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#关系运算"><span class="nav-number">9.12.4.1.</span> <span class="nav-text">关系运算</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#去重"><span class="nav-number">9.12.4.2.</span> <span class="nav-text">去重</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#检测数据类型"><span class="nav-number">9.13.</span> <span class="nav-text">检测数据类型</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#type-变量"><span class="nav-number">9.13.1.</span> <span class="nav-text">type(变量)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#isinstance-变量-数据类型"><span class="nav-number">9.13.2.</span> <span class="nav-text">isinstance(变量,数据类型)</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#可变不可变类型"><span class="nav-number">9.14.</span> <span class="nav-text">可变不可变类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数据类型分类"><span class="nav-number">9.15.</span> <span class="nav-text">数据类型分类</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#可迭代对象"><span class="nav-number">9.15.1.</span> <span class="nav-text">可迭代对象</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#支持迭代器协议的内置函数"><span class="nav-number">9.15.1.1.</span> <span class="nav-text">支持迭代器协议的内置函数</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#用户交互输入输出"><span class="nav-number">10.</span> <span class="nav-text">用户交互输入输出</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Python3"><span class="nav-number">10.1.</span> <span class="nav-text">Python3</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#python2"><span class="nav-number">10.2.</span> <span class="nav-text">python2</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#运算符"><span class="nav-number">11.</span> <span class="nav-text">运算符</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#算数运算符"><span class="nav-number">11.1.</span> <span class="nav-text">算数运算符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#比较运算符"><span class="nav-number">11.2.</span> <span class="nav-text">比较运算符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#赋值运算符"><span class="nav-number">11.3.</span> <span class="nav-text">赋值运算符</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#变量的赋值"><span class="nav-number">11.3.1.</span> <span class="nav-text">=:变量的赋值</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#增量赋值"><span class="nav-number">11.3.2.</span> <span class="nav-text">增量赋值</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#链式赋值"><span class="nav-number">11.3.3.</span> <span class="nav-text">链式赋值</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#交叉赋值"><span class="nav-number">11.3.4.</span> <span class="nav-text">交叉赋值</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#解压赋值"><span class="nav-number">11.3.5.</span> <span class="nav-text">解压赋值</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#逻辑运算符"><span class="nav-number">11.4.</span> <span class="nav-text">逻辑运算符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#成员运算符"><span class="nav-number">11.5.</span> <span class="nav-text">成员运算符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#身份运算符"><span class="nav-number">11.6.</span> <span class="nav-text">身份运算符</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#缩进和代码块"><span class="nav-number">12.</span> <span class="nav-text">缩进和代码块</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#流程控制"><span class="nav-number">13.</span> <span class="nav-text">流程控制</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#if判断（分支结构）"><span class="nav-number">13.1.</span> <span class="nav-text">if判断（分支结构）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#while循环（条件循环）（循环结构）"><span class="nav-number">13.2.</span> <span class="nav-text">while循环（条件循环）（循环结构）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#结束循环与跳过"><span class="nav-number">13.2.1.</span> <span class="nav-text">结束循环与跳过</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#for循环（取值循环）（循环结构）"><span class="nav-number">13.3.</span> <span class="nav-text">for循环（取值循环）（循环结构）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#结束循环与跳过-1"><span class="nav-number">13.3.1.</span> <span class="nav-text">结束循环与跳过</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#for循环原理"><span class="nav-number">13.3.2.</span> <span class="nav-text">for循环原理</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#for循环与while循环的异同"><span class="nav-number">13.4.</span> <span class="nav-text">for循环与while循环的异同</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#函数"><span class="nav-number">14.</span> <span class="nav-text">函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#定义函数发生的事情"><span class="nav-number">14.1.</span> <span class="nav-text">定义函数发生的事情</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#调用函数发生的事情"><span class="nav-number">14.2.</span> <span class="nav-text">调用函数发生的事情</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#定义"><span class="nav-number">14.3.</span> <span class="nav-text">定义</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#参数"><span class="nav-number">14.4.</span> <span class="nav-text">参数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#名称空间"><span class="nav-number">14.5.</span> <span class="nav-text">名称空间</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#作用域"><span class="nav-number">14.6.</span> <span class="nav-text">作用域</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#修改上级作用域的名字的值"><span class="nav-number">14.6.1.</span> <span class="nav-text">修改上级作用域的名字的值</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#函数对象"><span class="nav-number">14.7.</span> <span class="nav-text">函数对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#闭包"><span class="nav-number">14.8.</span> <span class="nav-text">闭包</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#匿名函数"><span class="nav-number">15.</span> <span class="nav-text">匿名函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#装饰器"><span class="nav-number">16.</span> <span class="nav-text">装饰器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#无参装饰器"><span class="nav-number">16.1.</span> <span class="nav-text">无参装饰器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#有参装饰器"><span class="nav-number">16.2.</span> <span class="nav-text">有参装饰器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#wraps"><span class="nav-number">16.3.</span> <span class="nav-text">@wraps</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#迭代器"><span class="nav-number">17.</span> <span class="nav-text">迭代器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#可迭代对象-1"><span class="nav-number">17.1.</span> <span class="nav-text">可迭代对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#迭代器对象"><span class="nav-number">17.2.</span> <span class="nav-text">迭代器对象</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#生成器"><span class="nav-number">18.</span> <span class="nav-text">生成器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#表达式"><span class="nav-number">19.</span> <span class="nav-text">表达式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#三元表达式"><span class="nav-number">19.1.</span> <span class="nav-text">三元表达式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#生成式"><span class="nav-number">19.2.</span> <span class="nav-text">生成式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#列表生成式"><span class="nav-number">19.2.1.</span> <span class="nav-text">列表生成式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#字典生成式"><span class="nav-number">19.2.2.</span> <span class="nav-text">字典生成式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#集合生成式"><span class="nav-number">19.2.3.</span> <span class="nav-text">集合生成式</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#生成器表达式"><span class="nav-number">19.3.</span> <span class="nav-text">生成器表达式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#eval-amp-exec"><span class="nav-number">19.4.</span> <span class="nav-text">eval&amp;exec</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#模块"><span class="nav-number">20.</span> <span class="nav-text">模块</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#import语法"><span class="nav-number">20.1.</span> <span class="nav-text">import语法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#循环导入问题"><span class="nav-number">20.2.</span> <span class="nav-text">循环导入问题</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#解决办法"><span class="nav-number">20.2.1.</span> <span class="nav-text">解决办法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#搜索模块的路径与优先级"><span class="nav-number">20.3.</span> <span class="nav-text">搜索模块的路径与优先级</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#区分py文件的两种用途"><span class="nav-number">20.4.</span> <span class="nav-text">区分py文件的两种用途</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#内置模块"><span class="nav-number">20.5.</span> <span class="nav-text">内置模块</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#time-时间模块"><span class="nav-number">20.5.1.</span> <span class="nav-text">time(时间模块)</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#时间的三种模式"><span class="nav-number">20.5.1.1.</span> <span class="nav-text">时间的三种模式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#三种时间模式转换"><span class="nav-number">20.5.1.2.</span> <span class="nav-text">三种时间模式转换</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#其他"><span class="nav-number">20.5.1.3.</span> <span class="nav-text">其他</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#datetime-时间加减"><span class="nav-number">20.5.2.</span> <span class="nav-text">datetime(时间加减)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#random"><span class="nav-number">20.5.3.</span> <span class="nav-text">random</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#os"><span class="nav-number">20.5.4.</span> <span class="nav-text">os</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#os路径处理"><span class="nav-number">20.5.4.1.</span> <span class="nav-text">os路径处理</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#sys"><span class="nav-number">20.5.5.</span> <span class="nav-text">sys</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#shutil-文件、文件夹、压缩包处理模块"><span class="nav-number">20.5.6.</span> <span class="nav-text">shutil(文件、文件夹、压缩包处理模块)</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#压缩和解压缩"><span class="nav-number">20.5.6.1.</span> <span class="nav-text">压缩和解压缩</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#JSON-amp-pickle-序列化和反序列化"><span class="nav-number">20.5.7.</span> <span class="nav-text">JSON&amp;pickle(序列化和反序列化)</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#序列化"><span class="nav-number">20.5.7.1.</span> <span class="nav-text">序列化</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#JSON"><span class="nav-number">20.5.7.2.</span> <span class="nav-text">JSON</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#pickle"><span class="nav-number">20.5.7.3.</span> <span class="nav-text">pickle</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#shelve"><span class="nav-number">20.5.8.</span> <span class="nav-text">shelve</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#xml"><span class="nav-number">20.5.9.</span> <span class="nav-text">xml</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#configparser"><span class="nav-number">20.5.10.</span> <span class="nav-text">configparser</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#读取"><span class="nav-number">20.5.10.1.</span> <span class="nav-text">读取</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#改写"><span class="nav-number">20.5.10.2.</span> <span class="nav-text">改写</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#使用案例"><span class="nav-number">20.5.10.3.</span> <span class="nav-text">使用案例</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#hashlib-加密"><span class="nav-number">20.5.11.</span> <span class="nav-text">hashlib(加密)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#hmac-加密"><span class="nav-number">20.5.12.</span> <span class="nav-text">hmac(加密)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#suprocess"><span class="nav-number">20.5.13.</span> <span class="nav-text">suprocess</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#logging"><span class="nav-number">20.5.14.</span> <span class="nav-text">logging</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#日志级别"><span class="nav-number">20.5.14.1.</span> <span class="nav-text">日志级别</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#全局配置"><span class="nav-number">20.5.14.2.</span> <span class="nav-text">全局配置</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Formatter，Handler，Logger，Filter对象"><span class="nav-number">20.5.14.3.</span> <span class="nav-text">Formatter，Handler，Logger，Filter对象</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Logger的继承"><span class="nav-number">20.5.14.4.</span> <span class="nav-text">Logger的继承</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#应用"><span class="nav-number">20.5.14.5.</span> <span class="nav-text">应用</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#re-正则"><span class="nav-number">20.5.15.</span> <span class="nav-text">re(正则)</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#包"><span class="nav-number">21.</span> <span class="nav-text">包</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#导入包"><span class="nav-number">21.1.</span> <span class="nav-text">导入包</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#绝对导入与相对导入"><span class="nav-number">21.2.</span> <span class="nav-text">绝对导入与相对导入</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#from-包-import"><span class="nav-number">21.3.</span> <span class="nav-text">from 包 import *</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#类-class"><span class="nav-number">22.</span> <span class="nav-text">类(class)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#类的定义与实例化"><span class="nav-number">22.1.</span> <span class="nav-text">类的定义与实例化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#属性访问"><span class="nav-number">22.2.</span> <span class="nav-text">属性访问</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#类属性与对象属性"><span class="nav-number">22.2.1.</span> <span class="nav-text">类属性与对象属性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#绑定方法"><span class="nav-number">22.2.2.</span> <span class="nav-text">绑定方法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#封装"><span class="nav-number">22.3.</span> <span class="nav-text">封装</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#隐藏属性"><span class="nav-number">22.3.1.</span> <span class="nav-text">隐藏属性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#开放接口"><span class="nav-number">22.3.2.</span> <span class="nav-text">开放接口</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#类内的装饰器"><span class="nav-number">22.4.</span> <span class="nav-text">类内的装饰器</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#property"><span class="nav-number">22.4.1.</span> <span class="nav-text">@property</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#setter"><span class="nav-number">22.4.2.</span> <span class="nav-text">@setter</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#deleter"><span class="nav-number">22.4.3.</span> <span class="nav-text">@deleter</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#classmethod"><span class="nav-number">22.4.4.</span> <span class="nav-text">@classmethod</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#staticmethod"><span class="nav-number">22.4.5.</span> <span class="nav-text">@staticmethod</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#继承"><span class="nav-number">22.5.</span> <span class="nav-text">继承</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#属性查找"><span class="nav-number">22.5.1.</span> <span class="nav-text">属性查找</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#菱形问题"><span class="nav-number">22.5.2.</span> <span class="nav-text">菱形问题</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#继承原理"><span class="nav-number">22.5.3.</span> <span class="nav-text">继承原理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#经典类与新式类区别"><span class="nav-number">22.5.4.</span> <span class="nav-text">经典类与新式类区别</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Mixins机制-多继承的正确打开方式"><span class="nav-number">22.5.5.</span> <span class="nav-text">Mixins机制(多继承的正确打开方式)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#派生与方法重用"><span class="nav-number">22.5.6.</span> <span class="nav-text">派生与方法重用</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#组合"><span class="nav-number">22.6.</span> <span class="nav-text">组合</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#多态性"><span class="nav-number">22.7.</span> <span class="nav-text">多态性</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#抽象类"><span class="nav-number">22.7.1.</span> <span class="nav-text">抽象类</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#绑定方法与非绑定方法"><span class="nav-number">22.8.</span> <span class="nav-text">绑定方法与非绑定方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#反射机制"><span class="nav-number">22.9.</span> <span class="nav-text">反射机制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#内置方法-3"><span class="nav-number">22.10.</span> <span class="nav-text">内置方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#元类"><span class="nav-number">22.11.</span> <span class="nav-text">元类</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#自定义元类来控制类的产生"><span class="nav-number">22.11.1.</span> <span class="nav-text">自定义元类来控制类的产生</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#编码"><span class="nav-number">23.</span> <span class="nav-text">编码</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#文件处理"><span class="nav-number">24.</span> <span class="nav-text">文件处理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#close-资源回收"><span class="nav-number">24.1.</span> <span class="nav-text">close(资源回收)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#with-上下文管理"><span class="nav-number">24.2.</span> <span class="nav-text">with(上下文管理)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#open-操作系统打开文件"><span class="nav-number">24.3.</span> <span class="nav-text">open(操作系统打开文件)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#操作文件的方法"><span class="nav-number">24.4.</span> <span class="nav-text">操作文件的方法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#读"><span class="nav-number">24.4.1.</span> <span class="nav-text">读</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#写"><span class="nav-number">24.4.2.</span> <span class="nav-text">写</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#其他文件对象上的方法"><span class="nav-number">24.4.3.</span> <span class="nav-text">其他文件对象上的方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#文件对象上的属性"><span class="nav-number">24.4.4.</span> <span class="nav-text">文件对象上的属性</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#控制文件内指针移动"><span class="nav-number">24.5.</span> <span class="nav-text">控制文件内指针移动</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#0模式"><span class="nav-number">24.5.1.</span> <span class="nav-text">0模式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1模式"><span class="nav-number">24.5.2.</span> <span class="nav-text">1模式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2模式"><span class="nav-number">24.5.3.</span> <span class="nav-text">2模式</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#文件修改"><span class="nav-number">24.6.</span> <span class="nav-text">文件修改</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#文件修改方式一"><span class="nav-number">24.6.1.</span> <span class="nav-text">文件修改方式一</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#文件修改方式二"><span class="nav-number">24.6.2.</span> <span class="nav-text">文件修改方式二</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#异常"><span class="nav-number">25.</span> <span class="nav-text">异常</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#异常特征"><span class="nav-number">25.1.</span> <span class="nav-text">异常特征</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#异常处理"><span class="nav-number">25.2.</span> <span class="nav-text">异常处理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#主动触发异常"><span class="nav-number">25.3.</span> <span class="nav-text">主动触发异常</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#自定义异常"><span class="nav-number">25.4.</span> <span class="nav-text">自定义异常</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#断言"><span class="nav-number">25.5.</span> <span class="nav-text">断言</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#队列和堆栈"><span class="nav-number">26.</span> <span class="nav-text">队列和堆栈</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#猴子补丁"><span class="nav-number">27.</span> <span class="nav-text">猴子补丁</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">刘心怡</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
